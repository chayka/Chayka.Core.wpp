build_settings:
#    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo

setup:
    env:
        PHPCI: "PHPCI"
    composer:
        action: "install"
    shell:
        - "rm -rf ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"
        - "mkdir ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"
        - "cp -R ./* ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"
        - "chown -R www-data:www-data ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"
        - "cd ${WP_CI_DIR} && wp --allow-root plugin activate Chayka.Core.wpp"

test:
    shell:
        - "phpunit --tap"
        - "cd ./tests/casperjs/ && ./test.sh"
#    php_unit:
#        config:
#            - "phpunit.xml.dist"
#        directory:
#            - "tests/"
#        run_from: "phpunit/"
#        coverage: "tests/logs/coverage"

#    shell:

complete:
