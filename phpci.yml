build_settings:
#    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo

setup:
    composer:
        action: "install"
    shell:
        - "ls ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp && rm -r ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"
        - "cp %BUILD_PATH% ${WP_CI_DIR}wp-content/plugins/Chayka.Core.wpp"

test:
    php_unit:
        config:
            - "phpunit.xml.dist"
#        directory:
#            - "tests/"
#        run_from: "phpunit/"
#        coverage: "tests/logs/coverage"

    shell:
        - "bash %BUILD_PATH%/tests/casperjs/test.sh"

complete:
