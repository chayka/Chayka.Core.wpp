"use strict";angular.module("chayka-utils",[]).factory("utils",["$window","$timeout","$compile",function($window,$timeout,$compile){var Chayka=$window.Chayka||{};return Chayka.Utils=Chayka.Utils||{declare:function(classname,parent,implementation){for(var parts=classname.split("."),root=$window,part="",i=0;i<parts.length&&(part=parts[i],i!==parts.length-1);i++)root[part]=root[part]||{},root=root[part];return angular.isUndefined(implementation)&&(implementation=parent,parent=null),parent?parent.extend&&angular.isFunction(parent.extend)?root[part]=parent.extend(implementation):root[part]=angular.extend(parent,implementation):root[part]=implementation,root[part]},ensure:function(classname,extend){for(var parts=classname.split("."),root=$window,part="",i=0;i<parts.length;i++)part=parts[i],root[part]=root[part]||{},root=root[part];return extend&&angular.isObject(extend)&&angular.extend(root,extend),root},getItem:function(obj,key,defaultValue){void 0===defaultValue&&(defaultValue=null);var parts=(key+"").split(".");if(obj&&(angular.isObject(obj)||angular.isArray(obj))){for(var root=obj,i=0;i<parts.length;i++){var part=parts[i];if(!angular.isObject(root)&&!angular.isArray(root)||void 0===root[part])return defaultValue;root=root[part]}return root}return defaultValue},setObjectDefaults:function(obj,defaults){obj=obj||{};for(var key in defaults)defaults.hasOwnProperty(key)&&("object"==typeof defaults[key]?obj[key]=Chayka.Utils.setObjectDefaults(obj[key]||{},defaults[key]):void 0===obj[key]&&(obj[key]=defaults[key]));return obj},updateObject:function(obj,update){for(var property in obj)obj.hasOwnProperty(property)&&(void 0!==update[property]?obj[property]=null:delete obj[property]);return angular.extend(obj,update)},getHtmlParam:function($element,name,defaultValue){var value=$element.attr(name)||$element.attr("data-"+name)||$element.data(name);return void 0===value&&(value=defaultValue),value},template:function(tpl,params){return tpl.replace(/{([^}]+)}/g,function(all,param){return params[param].toString()||""})},patchScope:function(scope){scope&&angular.isFunction(scope.$apply)&&$timeout(function(){scope.$apply()},0)},getResourceUrl:function(appId,resPath){return Chayka.Utils.getItem(Chayka.Core.appResFolderUrls,appId,"/no_app_url_found/")+resPath},recursiveDirectiveCompile:function(element,link){angular.isFunction(link)&&(link={post:link});var compiledContents,contents=element.contents().remove();return{pre:link&&link.pre?link.pre:null,post:function(scope,element){compiledContents||(compiledContents=$compile(contents)),compiledContents(scope,function(clone){element.append(clone)}),link&&link.post&&link.post.apply(null,arguments)}}},ordinal:function(input){var n=input%100;return 11>n||n>13?["st","nd","rd","th"][Math.min((n-1)%10,3)]:"th"}},Chayka.Utils.ensure("Chayka.Utils",Chayka.Utils),Chayka.Utils}]).directive("wpInclude",["utils",function(utils){return{restrict:"AE",templateUrl:function(element,attributes){var include=attributes.wpInclude||attributes["wp-include"]||attributes["data-wp-include"]||attributes.src,src=include,params=include.split(":"),appId=attributes.wpApp||attributes["wp-app"]||attributes["data-wp-app"]||attributes["app-id"];return params.length>1&&(appId=params[0],src=params[1]),utils.getResourceUrl(appId,src)}}}]).filter("ordinal",["utils",function(utils){return function(input){return input+utils.ordinal(input)}}]);
!function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){return value?(hiddenPre.innerHTML=value.replace(/</g,"&lt;"),hiddenPre.textContent):""}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/i,MAILTO_REGEXP=/^mailto:/i;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular);
"use strict";angular.module("chayka-buttons",["chayka-utils"]).provider("buttons",function(){var stdButtonClass="",buttons={setButtonClass:function(cls){stdButtonClass=cls},getButtonClass:function(){return stdButtonClass},$get:["utils",function(utils){return utils.ensure("Chayka.Buttons",buttons),buttons}]};return buttons});
"use strict";angular.module("chayka-nls",["chayka-utils"]).provider("nls",function(){var currentLocale="en-US",dictionaries={},nls={setLocale:function(locale){currentLocale=locale},getLocale:function(){return currentLocale},setTranslations:function(locale,translations){return dictionaries[locale]=dictionaries[locale]||{},angular.extend(dictionaries[locale],translations),dictionaries[locale]},getSupportedLocales:function(){return Object.keys(dictionaries)},_:function(str,locale){locale=locale||currentLocale||"en-US";var dictionary=dictionaries[locale]||{},defaultDictionary=dictionaries["en-US"]||{};return dictionary[str]||defaultDictionary[str]||str},$get:["utils",function(utils){return utils.ensure("Chayka.NLS",nls),nls}]};return nls}).filter("nls",["nls",function(nls){return function(str,locale){return nls._(str,locale)}}]).config(["nlsProvider",function(nlsProvider){var locale=window.Chayka&&window.Chayka.Core&&window.Chayka.Core.locale||"en-US";nlsProvider.setLocale(locale)}]);
"use strict";angular.module("chayka-spinners",["chayka-nls","chayka-utils"]).directive("spinner",[function(){return{restrict:"AE",scope:{spinner:"=",visible:"=?",message:"=?"},replace:!0,template:'<div class="chayka-spinner" data-ng-show="visible" data-ng-bind-html="message"></div>',controller:function($scope){$scope.show=function(message){$scope.message=message||$scope.message||"Loading...",$scope.visible=!0},$scope.hide=function(){$scope.visible=!1},$scope.spinner=$scope}}}]).directive("multiSpinner",[function(){return{restrict:"AE",scope:{spinner:"=multiSpinner"},replace:!0,template:'<div class="chayka-multi_spinner" data-ng-show="total"><div data-ng-repeat="(id, message) in messages"><div data-spinner="spinners[id]" data-message="message" data-visible="true"></div></div></div>',controller:function($scope){var ctrl={};$scope.spinners={},$scope.messages={},$scope.total=0,ctrl.show=function(message,id){return id||(id="spinner_"+$scope.total),$scope.messages[id]||($scope.messages[id]=message,$scope.total++),id},ctrl.hide=function(id){$scope.messages[id]&&($scope.total--,delete $scope.messages[id],$scope.spinners[id]=null)},$scope.spinner=ctrl}}}]).directive("generalSpinner",["utils","generalSpinner",function(utils){return{restrict:"AE",template:'<div class="chayka-general_spinner"><div data-multi-spinner="spinner"></div></div>',controller:function($scope){$scope.spinner=null;var $=angular.element;$(document).on("Chayka.Spinners.show",function(e,message,id){$scope.spinner&&($scope.spinner.show(message,id),utils.patchScope($scope))}),$(document).on("Chayka.Spinners.hide",function(e,id){$scope.spinner&&($scope.spinner.hide(id),utils.patchScope($scope))})}}}]).factory("generalSpinner",["utils",function(utils){var $=angular.element;return utils.ensure("Chayka.Spinners",{show:function(message,id){$(document).trigger("Chayka.Spinners.show",[message,id])},hide:function(id){$(document).trigger("Chayka.Spinners.hide",[id])}})}]);
"use strict";angular.module("chayka-ajax",["chayka-modals","chayka-spinners"]).factory("ajax",["$window","$http","$timeout","modals","generalSpinner","utils",function($window,$http,$timeout,modals,generalSpinner,utils){var Chayka=(angular.element,$window.Chayka||{}),ajax=Chayka.Ajax=Chayka.Ajax||{errorHandlers:{},addErrorHandler:function(id,handler,errorCode){errorCode=errorCode||null,ajax.errorHandlers[id]={code:errorCode,handler:handler}},removeErrorHandler:function(id){ajax.errorHandlers[id]=null},handleError:function(code,message,payload){var res=!1;for(var id in ajax.errorHandlers)if(ajax.errorHandlers.hasOwnProperty(id)){var reg=ajax.errorHandlers[id];if(reg&&(!reg.code||reg.code===code)&&(res=res||reg.handler(code,message,payload)))break}return res},handleErrors:function(data){if(!data)return{empty_response:"Empty response"};if("mass_errors"===data.code){for(var code in data.message)data.message.hasOwnProperty(code)&&ajax.handleError(code,data.message[code],data.payload)&&delete data.message[code];return data.message}var errors={};return ajax.handleError(data.code,data.message,data.payload)||(errors[data.code]=data.message),errors},processResponse:function(response,defaultMessage){var message=defaultMessage||!1,code=1;if(!angular.isUndefined(response.payload))return response;if(!response||angular.isString(response)&&!response.length)message="Empty response";else if(angular.isString(response)){var m=response.match(/<body[^>]*>([\s\S]*)<\/body>/m);m=m?m:response.match(/<br\s*\/>\s*<b>[^<]+<\/b>\:\s*(.*)<br\s*\/>/m),message=m?m[1].trim():defaultMessage}return{code:code,message:message,payload:null}},spinnersUsed:0,prepare:function(options){var defaults={};options=options||{},options=angular.extend(defaults,options);var spinner=options.spinner;spinner||spinner===!1||(spinner=null);var spinnerId=options.spinnerId||"spinner",spinnerFieldId=options.spinnerFieldId,spinnerMessage=options.spinnerMessage||"Processing...",errorMessage=options.errorMessage||"Operation failed",successMessage=options.successMessage,formValidator=options.formValidator,validateOnSend=angular.isUndefined(options.validateOnSend)?!0:options.validateOnSend,scope=options.scope,send=options.send,success=options.success,error=options.error,complete=options.complete;spinnerId+=ajax.spinnersUsed++;var prepared={},sendHandler=function(){var result=!1;return formValidator&&validateOnSend&&!(!spinnerFieldId&&formValidator.validateFields()||spinnerFieldId&&formValidator.validateFieldById(spinnerId))?!1:(send&&angular.isFunction(send)&&(result=send()),result&&(spinner!==!1&&(spinner?spinner.show(spinnerMessage):spinnerFieldId&&formValidator?formValidator.setFieldState(spinnerFieldId,"progress",spinnerMessage):generalSpinner.show(spinnerMessage,spinnerId)),formValidator&&formValidator.clearMessage(),scope&&utils.patchScope(scope)),result)};prepared.send=sendHandler;var completeHandler=function(data,status,headers,config){spinner!==!1&&(spinner?spinner.hide():spinnerFieldId&&formValidator?formValidator.setFieldState(spinnerFieldId,"clean"):generalSpinner.hide(spinnerId)),complete&&angular.isFunction(complete)&&complete(data,status,headers,config)};prepared.complete=completeHandler;var errorHandler=function(data,status,headers,config){data=ajax.processResponse(data,errorMessage),completeHandler(data,status,headers,config);var errors=ajax.handleErrors(data),message=errorMessage;for(var i in errors)if(errors.hasOwnProperty(i)){message=errors[i]||errorMessage;break}formValidator?spinnerFieldId?formValidator.setFieldState(spinnerFieldId,"error",message):formValidator.showErrors(errors):message!==!1&&modals.alert(message),angular.isFunction(error)&&error(data,status,headers,config),scope&&utils.patchScope(scope)};prepared.error=errorHandler;var successHandler=function(data,status,headers,config){if(data=ajax.processResponse(data,errorMessage),data.code)errorHandler(data,status,headers,config);else{completeHandler(data,status,headers,config);var message=successMessage===!1?!1:data.message||successMessage;formValidator&&message&&formValidator.showMessage(message),success&&angular.isFunction(success)&&success(data,status,headers,config)}scope&&utils.patchScope(scope)};return prepared.success=successHandler,prepared},request:function(url,options){var data=options.data||null,method=options.method||"post",config=options.config||{},send=null;switch(method){case"get":send=function(){return $http.get(url,config)};break;case"delete":send=function(){return $http["delete"](url,config)};break;case"head":send=function(){return $http.head(url,config)};break;case"jsonp":send=function(){return $http.jsonp(url,config)};break;case"post":send=function(){return $http.post(url,data,config)};break;case"put":send=function(){return $http.put(url,data,config)};break;case"patch":send=function(){return $http.patch(url,data,config)}}options.send=send;var prepared=ajax.prepare(options),promise=prepared.send();return promise&&promise.success(prepared.success).error(prepared.error),promise},get:function(url,options,config){return options=options||{},options.method="get",options.config=config,ajax.request(url,options)},del:function(url,options,config){return options=options||{},options.method="delete",options.config=config,ajax.request(url,options)},head:function(url,options,config){return options=options||{},options.method="head",options.config=config,ajax.request(url,options)},jsonp:function(url,options,config){return options=options||{},options.method="jsonp",options.config=config,ajax.request(url,options)},post:function(url,data,options,config){return options=options||{},options.method="post",options.data=data,options.config=config,ajax.request(url,options)},put:function(url,data,options,config){return options=options||{},options.method="put",options.data=data,options.config=config,ajax.request(url,options)},patch:function(url,data,options,config){return options=options||{},options.method="patch",options.data=data,options.config=config,ajax.request(url,options)}};return ajax}]).directive("buttonAjaxRequest",["ajax","modals",function(ajax,modals){return{scope:{url:"@buttonAjaxRequest",postData:"=?post",confirm:"@?",formValidator:"=?validator"},link:function($scope,$element){var onSuccess=function(data){data.message&&modals.alert(data.message)},sendRequest=function(){var params={success:onSuccess};$scope.formValidator&&(params.formValidator=$scope.formValidator),$scope.postData?ajax.post($scope.url,$scope.postData,params):ajax.get($scope.url,params)};$element.click(function(e){e.preventDefault(),$scope.confirm?modals.confirm($scope.confirm,sendRequest):sendRequest()})}}}]);
"use strict";angular.module("chayka-modals",["chayka-nls","chayka-buttons","chayka-utils"]).provider("modals",function(){return{$get:["$window","nls","buttons","utils",function($window,nls,btn,utils){var modals=utils.ensure("Chayka.Modals",{queue:[],create:function(options){if(options.buttons&&angular.isObject(options.buttons)&&!angular.isArray(options.buttons)){var buttons=[];angular.forEach(options.buttons,function(button,text){button.text=text,buttons.push(button)}),options.buttons=buttons}var defaultOptions={},m=angular.extend(defaultOptions,options);return m},show:function(options){var m=modals.create(options);return modals.queue.push(m),m},alert:function(message,title,modalClass,callback){modalClass=modalClass||"modal_alert",modals.show({content:message,title:title||"",modalClass:modalClass,buttons:[{text:nls._("Ok"),click:callback}]})},confirm:function(message,callback,title){modals.show({content:message,title:title||"",modalClass:"modal_confirm",buttons:[{text:nls._("Yes"),click:callback},{text:nls._("No")}]})},close:function($event){$event&&$event.target!==$event.currentTarget||modals.queue.shift()},getButtonClass:function(button){var cls=[],buttonClass=btn.getButtonClass();return buttonClass&&cls.push(buttonClass),button&&button.cls&&cls.push(button.cls),cls.join(" ")}});return modals}]}}).directive("modalsManager",["modals","buttons",function(modals){return{restrict:"AE",controllerAs:"mm",bindToController:{},template:'<div id="chayka-modals" data-ng-show="mm.queue.length" class="ng-cloak chayka-modals" data-ng-cloak="">   <div class="chayka-modals-fader" data-ng-click="mm.close($event)">       <div data-ng-repeat="item in mm.queue | limitTo: 1" class="chayka-modals-modal">           <div class="modal_header">               <div class="modal_header-title">{{item.title | nls}}</div>               <div class="modal_header-close" data-ng-click="mm.close($event)">&times;</div>           </div>           <div class="modal_body">               <div class="modal_body-content" data-ng-bind-html="item.content"></div>           </div>           <div class="modal_buttons" data-ng-show="item.buttons && item.buttons.length">               <button data-ng-repeat="button in item.buttons" data-ng-click="button.persist || mm.close(); button.click && button.click();" class="{{mm.getButtonClass(button)}}">{{button.text | nls}}</button>           </div>       </div>   </div></div>',controller:function(){return{close:modals.close,queue:modals.queue,getButtonClass:modals.getButtonClass}}}}]).directive("modal",["modals",function(modals){return{restrict:"AE",transclude:!0,controllerAs:"m",scope:{modal:"=modal",title:"@?modalTitle",show:"@modalShow",buttons:"=?modalButtons",width:"@modalWidth",height:"@modalHeight",onClose:"&?onModalClose"},template:'<div class="chayka-modals ng-cloak" data-ng-show="m.isOpen">   <div class="chayka-modals-fader" data-ng-click="m.hide($event)">       <div class="chayka-modals-modal">           <div class="modal_header">               <div class="modal_header-title">{{m.title | nls}}</div>               <div class="modal_header-close" data-ng-click="m.hide($event)">&times;</div>           </div>           <div class="modal_body" data-ng-transclude></div>           <div class="modal_buttons" data-ng-show="m.buttons && m.buttons.length">               <button data-ng-repeat="button in buttons" data-ng-click="button.persist || m.hide(); button.click && button.click();" class="{{m.getButtonClass(button)}}">{{button.text | nls}}</button>           </div>       </div>   </div></div>',controller:function($scope,$element){var ctrl={isOpen:!1,title:$scope.title||"",buttons:$scope.buttons||[],show:function(){ctrl.isOpen=!0},hide:function($event){$event&&$event.target!==$event.currentTarget||(ctrl.isOpen=!1,$scope.onClose&&$scope.onClose())},setTitle:function(title){ctrl.title=title},setButtons:function(buttons){if(buttons&&angular.isObject(buttons)&&!angular.isArray(buttons)){var btns=[];angular.forEach(buttons,function(button,text){button.text=text,btns.push(button)}),buttons=btns}ctrl.buttons=$scope.buttons=buttons},getButtonClass:function(button){return modals.getButtonClass(button)}};return $scope.buttons&&ctrl.setButtons($scope.buttons),$scope.modal=ctrl,$scope.show&&ctrl.show(),$scope.height&&$element.css("height",$scope.height),$scope.width&&$element.css("width",$scope.width),ctrl}}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{Yes:"Yes",No:"No",Ok:"Ok"}),nlsProvider.setTranslations("ru-RU",{Yes:"Да",No:"Нет",Ok:"Ok"})}]);
"use strict";angular.module("chayka-forms",["ngSanitize","chayka-modals","chayka-nls","chayka-ajax"]).directive("formValidator",["$window","modals","ajax","utils",function($window,modals,ajax,utils){return{restrict:"AE",scope:{validator:"=?formValidator",scrollMargin:"@",scrollDuration:"@"},link:function($scope,$element){$scope.element=$element},controller:function($scope){var ctrl={scrollMargin:$scope.scrollMargin||50,scrollDuration:$scope.scrollMargin||500,fields:$scope.fields||{},messageBox:null,setMessageBox:function(msgBox){ctrl.messageBox=msgBox},showMessage:function(message,state){return ctrl.messageBox?(ctrl.messageBox.message=message,ctrl.messageBox.state=state||"",!0):(modals.alert(message,"",state),!1)},clearMessage:function(){return ctrl.messageBox?(ctrl.messageBox.message="",ctrl.messageBox.state="",!0):!1},addField:function(field){ctrl.fields[field.name]=field},setFieldState:function(field,state,message){angular.isString(field)&&!(field=ctrl.fields[field])||(field.valid="valid"===state||"clean"===state||"progress"===state,field.state=state,field.message=message||field.hint)},setFieldError:function(field,message){ctrl.setFieldState(field,"invalid",message)},clearFieldError:function(field){ctrl.setFieldState(field,"clear")},checkRequired:function(field){var c=field.checks.required;return!c.active||!!(field.value+"")},checkLength:function(field){var c=field.checks.length;return!c.active||!(c.max&&field.value.length>c.max||field.value.length<c.min)},checkRange:function(field){var c=field.checks.range,lower=c.min&&(c.minE&&field.value<c.min||!c.minE&&field.value<=c.min),greater=c.max&&(c.maxE&&field.value>c.max||!c.minE&&field.value>=c.max);return!c.active||!(lower||greater)},checkLt:function(field){var c=field.checks.lt;return!c.active||field.value<c.max},checkLe:function(field){var c=field.checks.le;return!c.active||field.value<=c.max},checkGt:function(field){var c=field.checks.gt;return!c.active||field.value>c.min},checkGe:function(field){var c=field.checks.ge;return!c.active||field.value>=c.min},checkRegexp:function(field){var c=field.checks.regexp,valid=c.regexp.test(field.value);return c.forbid&&(valid=!valid),!c.active||valid},checkPasswords:function(field){var c=field.checks.passwords,repeatField=ctrl.fields[c.repeat]||field;return!c.active||field.value===repeatField.value},checkApi:function(field){var c=field.checks.api,url=utils.template(c.url,{name:encodeURIComponent(field.name),value:encodeURIComponent(field.value)}),value=field.value+"";if(c.active){if(value in c.dictionary)return"valid"===c.dictionary[value]?ctrl.setFieldState(field,"valid",null):ctrl.setFieldState(field,"invalid",c.message),c.dictionary[value];c.dictionary[value]="progress",ajax.get(url,{spinner:$scope.spinner,spinnerFieldId:field.name,spinnerMessage:" ",showMessage:!1,formValidator:ctrl,errorMessage:c.message,validateOnSend:!1,scope:field,success:function(data){c.dictionary[value]="valid",ctrl.setFieldState(field,"valid",null)},error:function(data){c.dictionary[value]="invalid",c.message=c.message||"mass_errors"===data.code&&data.message[field.name]||data.message}})}return!c.active||c.dictionary[value]},checkCustom:function(field){var c=field.checks.custom,callback=c.callback;return!c.active||$scope.$parent[callback].call($scope,field.value,field)},validateField:function(field,silent){var state,valid=!0,message="",checks=field.checks;return field.active?(checks.required&&!ctrl.checkRequired(field)&&(valid=!1,message=checks.required.message),field.value+""&&angular.forEach(checks,function(c,check){if(valid){switch(check){case"length":valid=ctrl.checkLength(field);break;case"range":valid=ctrl.checkRange(field);break;case"lt":valid=ctrl.checkLt(field);break;case"le":valid=ctrl.checkLe(field);break;case"gt":valid=ctrl.checkGt(field);break;case"ge":valid=ctrl.checkGe(field);break;case"regexp":valid=ctrl.checkRegexp(field);break;case"passwords":valid=ctrl.checkPasswords(field)}valid||(message=c.message)}}),valid&&checks.custom&&(valid=ctrl.checkCustom(field),message=valid?"":checks.custom.message),state=valid?"valid":"invalid",valid&&checks.api&&(state=ctrl.checkApi(field),message="invalid"===state?checks.api.message:""),silent||ctrl.setFieldState(field,state,message),field.valid):!0},validateFieldById:function(fieldId,silent){var field=ctrl.fields[fieldId];return ctrl.validateField(field,silent)},validateFields:function(){var valid=!0,scrollTo=0;return angular.forEach(ctrl.fields,function(field){if(!ctrl.validateField(field)){var scrollPos=field.element.offset().top;(!scrollTo||scrollPos&&scrollTo>scrollPos)&&(scrollTo=scrollPos),valid=!1}}),!valid&&scrollTo&&ctrl.scrollTo(scrollTo),valid},scrollTo:function(scrollTo,duration){if(angular.isUndefined(duration)&&(duration=parseInt(ctrl.scrollDuration)||ctrl.scrollDuration),scrollTo-=parseInt(ctrl.scrollMargin),$window.jQuery){var $=$window.jQuery;(scrollTo<$window.pageYOffset||scrollTo>$window.pageYOffset+$($window).height())&&(duration?$window.jQuery("html, body").animate({scrollTop:scrollTo},duration):$window.jQuery("html, body").scrollTop(scrollTo))}},scrollUp:function(duration){ctrl.scrollTo($scope.element.offset().top,duration)},showErrors:function(errors){var scrollTo=0;angular.forEach(errors,function(message,key){var field=ctrl.fields[key];if(field){ctrl.setFieldState(field,"invalid",message);var scrollPos=field.element.offset().top;(!scrollTo||scrollPos&&scrollTo>scrollPos)&&(scrollTo=scrollPos)}else ctrl.showMessage(message,"error")}),scrollTo&&ctrl.scrollTo(scrollTo)},getFieldValues:function(){var values={};return angular.forEach(ctrl.fields,function(field){values[field]=ctrl.fields[field].value||""}),values}};return $scope.validator=ctrl,ctrl}}}]).directive("formField",["nls","delayedCall","utils",function(nls,delayedCall,utils){return{require:["^^formValidator","formField"],restrict:"AE",transclude:!0,controllerAs:"f",template:'<label>{{f.label|nls}}</label><div class="input {{f.state}}" data-ng-transclude></div><div class="message" data-ng-class="{error: !f.valid}" data-ng-bind-html="f.message"></div>',scope:{name:"@formField",label:"@",hint:"@",message:"@hint"},link:function($scope,$element,$attrs,controllers){function setupIf(){$attrs.checkIf&&$scope.$parent.$watch($attrs.checkIf,function(value){field.active=!!value})}function setupRequired(){var short=$attrs.checkRequired,shorts=short?short.split("|"):[],message=nls._(shorts[0]||$attrs.checkRequiredMessage||"message_required");field.checks.required={message:message,active:!0};var condition=shorts[1]||$attrs.checkRequiredIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.required.active=value})}function setupLength(){var short=$attrs.checkLength,shorts=short?short.split("|"):[],min=parseInt(shorts[1]||$attrs.checkLengthMin||0),max=parseInt(shorts[2]||$attrs.checkLengthMax||0),messageTemplate=nls._(shorts[0]||$attrs.checkLengthMessage||"message_length"),message=utils.template(messageTemplate,{min:min,max:max,label:field.label});field.checks.length={message:message,min:min,max:max,active:!0};var condition=shorts[3]||$attrs.checkLengthIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.length.active=value})}function setupRange(){var short=$attrs.checkRange,shorts=short?short.split("|"):[],minStr=shorts[1]||$attrs.checkRangeMin||0,minE=!!minStr.match(/^=/),min=minE?minStr.substr(1):minStr,maxStr=shorts[2]||$attrs.checkRangeMax||0,maxE=!!maxStr.match(/^=/),max=maxE?maxStr.substr(1):maxStr,format=shorts[3]||$attrs.checkRangeFormat||"int";switch(format){case"int":min=parseInt(min),max=parseInt(max);break;case"float":min=parseFloat(min),max=parseFloat(max)}var messageTemplate=shorts[0]||$attrs.checkRangeMessage||nls._("message_range"),message=utils.template(messageTemplate,{min:min,max:max,label:field.label});field.checks.range={message:message,min:min,minE:minE,max:max,maxE:maxE,active:!0};var condition=shorts[4]||$attrs.checkRangeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.range.active=value})}function setupLt(){var short=$attrs.checkLt,shorts=short?short.split("|"):[],max=shorts[1]||$attrs.checkLtMax||0,messageTemplate=shorts[0]||$attrs.checkLtMessage||nls._("message_lt"),message=utils.template(messageTemplate,{max:max,label:field.label}),format=shorts[2]||$attrs.checkLtFormat||"int";switch(format){case"int":max=parseInt(max);break;case"float":max=parseFloat(max)}field.checks.lt={message:message,max:max,active:!0};var condition=shorts[3]||$attrs.checkLtIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.lt.active=value})}function setupLe(){var short=$attrs.checkLe,shorts=short?short.split("|"):[],max=shorts[1]||$attrs.checkLeMax||0,messageTemplate=shorts[0]||$attrs.checkLeMessage||nls._("message_le"),message=utils.template(messageTemplate,{max:max,label:field.label}),format=shorts[2]||$attrs.checkLeFormat||"int";switch(format){case"int":max=parseInt(max);break;case"float":max=parseFloat(max)}field.checks.le={message:message,max:max,active:!0};var condition=shorts[3]||$attrs.checkLeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.le.active=value})}function setupGt(){var short=$attrs.checkGt,shorts=short?short.split("|"):[],min=shorts[1]||$attrs.checkGtMin||0,messageTemplate=shorts[0]||$attrs.checkGtMessage||nls._("message_gt"),message=utils.template(messageTemplate,{min:min,label:field.label}),format=shorts[2]||$attrs.checkGtFormat||"int";switch(format){case"int":min=parseInt(min);break;case"float":min=parseFloat(min)}field.checks.gt={message:message,min:min,active:!0};var condition=shorts[3]||$attrs.checkGtIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.gt.active=value})}function setupGe(){var short=$attrs.checkGe,shorts=short?short.split("|"):[],min=shorts[1]||$attrs.checkGeMin||0,messageTemplate=shorts[0]||$attrs.checkGeMessage||nls._("message_ge"),message=utils.template(messageTemplate,{min:min,label:field.label}),format=shorts[2]||$attrs.checkGeFormat||"int";switch(format){case"int":min=parseInt(min);break;case"float":min=parseFloat(min)}field.checks.ge={message:message,min:min,active:!0};var condition=shorts[3]||$attrs.checkGeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.ge.active=value})}function setupRegExp(){var short=$attrs.checkRegexp,shorts=short?short.split("|"):[],patternAndModifiers=short&&/\/(.*)\/(\w*)$/.exec(shorts[1])||[],message=shorts[0]||$attrs.checkRegexpMessage||nls._("message_regexp"),pattern=patternAndModifiers[1]||$attrs.checkRegexpPattern||".*",modifiers=patternAndModifiers[2]||$attrs.checkRegexpModifiers||"",forbid=shorts[2]||$attrs.checkRegexpForbid||!1,regexp=new RegExp(pattern,modifiers);field.checks.regexp={message:message,regexp:regexp,forbid:forbid,active:!0};var condition=shorts[4]||$attrs.checkRegexpIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.regexp.active=value})}function setupEmail(){var short=$attrs.checkEmail,shorts=short?short.split("|"):[],message=nls._(shorts[0]||$attrs.checkEmailMessage||"message_email");field.checks.regexp={message:message,regexp:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,forbid:!1,active:!0};var condition=shorts[1]||$attrs.checkEmailIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.regexp.active=value})}function setupPasswords(){var short=$attrs.checkPasswords,shorts=short?short.split("|"):[],repeat=shorts[0]||$attrs.checkPasswordsRepeat,message=shorts[1]||$attrs.checkPasswordsMessage||nls._("message_passwords");field.checks.passwords={message:message,repeat:repeat,active:!0};var condition=shorts[2]||$attrs.checkPasswordsIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.passwords.active=value})}function setupApiCall(){var short=$attrs.checkApi,shorts=short?short.split("|"):[],url=shorts[0]||$attrs.checkApiUrl,message=shorts[1]||$attrs.checkApiMessage,delay=shorts[2]||$attrs.checkApiDelay||0;field.checks.api={message:message,url:url,delay:delay,dictionary:{},active:!0};var condition=shorts[3]||$attrs.checkApiIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.api.active=value}),$input.on("keyup change",function(){formCtrl.setFieldState(field,"clean"),field.value&&delayedCall("check-api-"+field.name,delay,function(){formCtrl.validateField(field,!0)})})}function setupCustom(){var short=$attrs.checkCustom,shorts=short?short.split("|"):[],callback=shorts[0]||$attrs.checkCustomCallback,message=shorts[1]||$attrs.checkCustomMessage||nls._("message_custom");field.checks.custom={message:message,callback:callback,active:!0};var condition=shorts[2]||$attrs.checkCustomIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.custom.active=value})}var formCtrl=controllers[0],field=controllers[1],$input=$element.find("[ng-model],[data-ng-model]"),inputType=$input.attr("type"),$oldLabel=$element.find(".input > label:first-child"),$newLabel=$element.find("> label");field.model=$input.attr("data-ng-model")||$input.attr("ng-model"),field.element=$element,$scope.label||"checkbox"===inputType||($scope.label=$oldLabel.text().replace(/\s*:\s*$/,""),angular.forEach($oldLabel.attributes,function(i,attr){var name=attr.name,value=attr.value;$newLabel.attr(name,value)}),$newLabel.addClass($oldLabel.attr("class")),$newLabel.text($scope.label),$oldLabel.remove()),field.label=$scope.label,field.name=$scope.name,field.message=$scope.message,$input.focus(function(){}),$input.blur(function(){field.value&&formCtrl.validateField(field,!1),utils.patchScope($scope)}),angular.forEach($attrs,function(attr,key){var m=key.match(/^check([A-Z][a-z]*)/),check=m&&m[1];if(check&&!field.checks[check])switch(check){case"If":setupIf();break;case"Required":setupRequired();break;case"Length":setupLength();break;case"Le":setupLe();break;case"Lt":setupLt();break;case"Ge":setupGe();break;case"Gt":setupGt();break;case"Range":setupRange();break;case"Regexp":setupRegExp();break;case"Email":setupEmail();break;case"Passwords":setupPasswords();break;case"Api":setupApiCall();break;case"Custom":setupCustom()}}),$scope.$parent.$watch(field.model,function(value){field.value=value}),$scope.$watch("state",function(value){$element.removeClass("clean progress valid invalid"),$element.addClass(value)}),formCtrl.addField(field)},controller:function($scope){return{name:"",label:"",message:"",value:null,valid:!0,state:"clean",active:!0,checks:{}}}}}]).directive("formMessage",function(){return{require:["^^formValidator","formMessage"],restrict:"AE",replace:!0,controllerAs:"mb",bindToController:!0,template:'<div class="form-message {{mb.state}}" data-ng-show="!!mb.message" data-ng-bind-html="mb.message"></div>',scope:{message:"@"},controller:function(){return{message:"",state:""}},link:function($scope,$element,attrs,controllers){var formCtrl=controllers[0],messageBox=controllers[1];formCtrl.setMessageBox(messageBox)}}}).directive("autoHeight",[function(){return{restrict:"A",link:function($scope,$element){var resizeTextarea=function(){var height="border-box"===$element.css("box-sizing")?parseInt($element.css("borderTopWidth"))+$element.prop("scrollHeight")+parseInt($element.css("borderBottomWidth")):$element.prop("scrollHeight");$element.css("height",height+"px")};$element.on("change input cut paste drop keydown",resizeTextarea)}}}]).factory("delayedCall",["$timeout",function($timeout){var timeouts={};return function(callId,delay,callback){var handle=timeouts[callId];handle&&$timeout.cancel(handle),timeouts[callId]=$timeout(function(){timeouts[callId]=null,callback()},delay)}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{message_required:"Required Field",message_length:"The length of this value should be between {min} and {max} symbols",message_range:"The value should be between {min} and {max}",message_lt:"The value should be lower than {max}",message_le:"The value should be lower than {max} or equal",message_gt:"The value should be greater than {min}",message_ge:"The value should be greater than {min} or equal",message_regexp:"Invalid format",message_email:"Valid email format: user@domain.com",message_passwords:"Passwords do not match",message_custom:"Invalid value"}),nlsProvider.setTranslations("ru-RU",{message_required:"Обязательное поле",message_length:"Длина значения должна быть от {min} до {max} символов",message_range:"Значение должно быть в диапазоне от {min} до {max}",message_lt:"Значение должно быть меньше {max}",message_le:"Значение должно быть меньше или равно {max}",message_gt:"Значение должно быть больше {min}",message_ge:"Значение должно быть больше или равно {min}",message_regexp:"Некорректный формат",message_email:"Формат email: user@domain.com",message_passwords:"Введенные пароли отличаются",message_custom:"Некорректное значение"})}]);
"use strict";angular.module("chayka-pagination",["chayka-nls","chayka-utils"]).directive("pagination",["utils",function(utils){return{restrict:"AE",template:'<ul data-ng-show="totalPages > 1"><li data-ng-repeat="item in items" class="{{item.cls}}"><a data-ng-click="item.click();" data-ng-bind-html="item.text"></a></li></ul>',scope:{pagination:"=",currentPage:"=?",totalPages:"=?",packSize:"=?",hrefTemplate:"@?",click:"=?",order:"@"},controller:function($scope){$scope.state="",$scope.currentPage=$scope.currentPage||1,$scope.totalPages=$scope.totalPages||0,$scope.packSize=$scope.packSize||10,$scope.hrefTemplate=$scope.hrefTemplate||"/page/<%= page %>",$scope.items=[],$scope.click||($scope.click=function(page){$scope.$emit("Pagination.currentPage",page),page!==$scope.currentPage&&$scope.$emit("Pagination.pageChanged",page)}),$scope.setCurrentPage=function(val,render){return $scope.currentPage=val,render&&$scope.render(),$scope},$scope.getCurrentPage=function(){return $scope.currentPage},$scope.setTotalPages=function(val,render){return $scope.totalPages=val,render&&$scope.render(),$scope},$scope.getTotalPages=function(){return $scope.totalPages},$scope.setPackSize=function(val,render){return $scope.packSize=val,render&&$scope.render(),$scope},$scope.getPackSize=function(){return $scope.packSize},$scope.setHrefTemplate=function(val,render){return $scope.hrefTemplate=val,render&&$scope.render(),$scope},$scope.getHrefTemplate=function(){return $scope.hrefTemplate},$scope.getHref=function(page){return page>=1&&page<=$scope.getTotalPages()&&$scope.getHrefTemplate()?utils.template($scope.getHrefTemplate(),{page:page}):"#"},$scope.getItem=function(page,text){page=parseInt(page),text=text||page;var cls="";return page===$scope.getCurrentPage()&&(cls="active"),(1>page||page>$scope.getTotalPages())&&(cls="disabled"),{page:page,text:text,href:$scope.getHref(page),cls:cls,click:function(){return page>0&&page<=$scope.totalPages&&$scope.click(page),!1}}},$scope.getItems=function(){var current=$scope.getCurrentPage(),packSize=$scope.getPackSize(),totalPages=$scope.getTotalPages(),packStart=1,packFinish=totalPages,items=[];if(totalPages>packSize){packStart=current-Math.floor((packSize-1)/2),packFinish=current+Math.ceil((packSize-1)/2);var offset=0;1>packStart&&(offset=1-packStart),packFinish>totalPages&&(offset=totalPages-packFinish),packStart+=offset,packFinish+=offset}return $scope.order.split(/\s+/).forEach(function(item){switch(item){case"previous":items.push($scope.getItem(current-1,"&larr;"));break;case"first":packStart>1&&items.push($scope.getItem(1));break;case"rewind":packStart>2&&items.push($scope.getItem(packStart-1,"..."));break;case"pages":for(var i=packStart;packFinish>=i;i++)items.push($scope.getItem(i));break;case"forward":totalPages-packFinish>=2&&items.push($scope.getItem(packFinish+1,"..."));break;case"last":totalPages>packFinish&&items.push($scope.getItem(totalPages));break;case"next":items.push($scope.getItem(current+1,"&rarr;"))}}),items},$scope.render=function(){$scope.items=$scope.getItems()},$scope.pagination=$scope}}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{next:"Next",previous:"Previous",next_page:"Next page",previous_page:"Previous Page"}),nlsProvider.setTranslations("ru-RU",{next:"Следующая",previous:"Предыдущая",next_page:"Следующая страница",previous_page:"Предыдущая страница"})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXlrYS11dGlscy5qcyIsImFuZ3VsYXItc2FuaXRpemUuanMiLCJjaGF5a2EtYnV0dG9ucy5qcyIsImNoYXlrYS1ubHMuanMiLCJjaGF5a2Etc3Bpbm5lcnMuanMiLCJjaGF5a2EtYWpheC5qcyIsImNoYXlrYS1tb2RhbHMuanMiLCJjaGF5a2EtZm9ybXMuanMiLCJjaGF5a2EtcGFnaW5hdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCIkdGltZW91dCIsIiRjb21waWxlIiwiQ2hheWthIiwiVXRpbHMiLCJkZWNsYXJlIiwiY2xhc3NuYW1lIiwicGFyZW50IiwiaW1wbGVtZW50YXRpb24iLCJwYXJ0cyIsInNwbGl0Iiwicm9vdCIsInBhcnQiLCJpIiwibGVuZ3RoIiwiaXNVbmRlZmluZWQiLCJleHRlbmQiLCJpc0Z1bmN0aW9uIiwiZW5zdXJlIiwiaXNPYmplY3QiLCJnZXRJdGVtIiwib2JqIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwidW5kZWZpbmVkIiwiaXNBcnJheSIsInNldE9iamVjdERlZmF1bHRzIiwiZGVmYXVsdHMiLCJoYXNPd25Qcm9wZXJ0eSIsInVwZGF0ZU9iamVjdCIsInVwZGF0ZSIsInByb3BlcnR5IiwiZ2V0SHRtbFBhcmFtIiwiJGVsZW1lbnQiLCJuYW1lIiwidmFsdWUiLCJhdHRyIiwiZGF0YSIsInRlbXBsYXRlIiwidHBsIiwicGFyYW1zIiwicmVwbGFjZSIsImFsbCIsInBhcmFtIiwidG9TdHJpbmciLCJwYXRjaFNjb3BlIiwic2NvcGUiLCIkYXBwbHkiLCJnZXRSZXNvdXJjZVVybCIsImFwcElkIiwicmVzUGF0aCIsIkNvcmUiLCJhcHBSZXNGb2xkZXJVcmxzIiwicmVjdXJzaXZlRGlyZWN0aXZlQ29tcGlsZSIsImVsZW1lbnQiLCJsaW5rIiwicG9zdCIsImNvbXBpbGVkQ29udGVudHMiLCJjb250ZW50cyIsInJlbW92ZSIsInByZSIsImNsb25lIiwiYXBwZW5kIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvcmRpbmFsIiwiaW5wdXQiLCJuIiwiTWF0aCIsIm1pbiIsImRpcmVjdGl2ZSIsInV0aWxzIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsImF0dHJpYnV0ZXMiLCJpbmNsdWRlIiwic3JjIiwiZmlsdGVyIiwid2luZG93IiwiJFNhbml0aXplUHJvdmlkZXIiLCJ0aGlzIiwiJGdldCIsIiQkc2FuaXRpemVVcmkiLCJodG1sIiwiYnVmIiwiaHRtbFBhcnNlciIsImh0bWxTYW5pdGl6ZVdyaXRlciIsInVyaSIsImlzSW1hZ2UiLCJ0ZXN0Iiwiam9pbiIsInNhbml0aXplVGV4dCIsImNoYXJzIiwid3JpdGVyIiwibm9vcCIsIm1ha2VNYXAiLCJzdHIiLCJpdGVtcyIsImhhbmRsZXIiLCJwYXJzZVN0YXJ0VGFnIiwidGFnIiwidGFnTmFtZSIsInJlc3QiLCJ1bmFyeSIsImxvd2VyY2FzZSIsImJsb2NrRWxlbWVudHMiLCJzdGFjayIsImxhc3QiLCJpbmxpbmVFbGVtZW50cyIsInBhcnNlRW5kVGFnIiwib3B0aW9uYWxFbmRUYWdFbGVtZW50cyIsInZvaWRFbGVtZW50cyIsInB1c2giLCJhdHRycyIsIkFUVFJfUkVHRVhQIiwibWF0Y2giLCJkb3VibGVRdW90ZWRWYWx1ZSIsInNpbmdsZVF1b3RlZFZhbHVlIiwidW5xdW90ZWRWYWx1ZSIsImRlY29kZUVudGl0aWVzIiwic3RhcnQiLCJwb3MiLCJlbmQiLCJpbmRleCIsInRleHQiLCJzcGVjaWFsRWxlbWVudHMiLCJSZWdFeHAiLCJDT01NRU5UX1JFR0VYUCIsIkNEQVRBX1JFR0VYUCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImNvbW1lbnQiLCJzdWJzdHJpbmciLCJET0NUWVBFX1JFR0VYUCIsIkJFR0lOR19FTkRfVEFHRV9SRUdFWFAiLCJFTkRfVEFHX1JFR0VYUCIsIkJFR0lOX1RBR19SRUdFWFAiLCJTVEFSVF9UQUdfUkVHRVhQIiwiJHNhbml0aXplTWluRXJyIiwiaGlkZGVuUHJlIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJlbmNvZGVFbnRpdGllcyIsIlNVUlJPR0FURV9QQUlSX1JFR0VYUCIsImhpIiwiY2hhckNvZGVBdCIsImxvdyIsIk5PTl9BTFBIQU5VTUVSSUNfUkVHRVhQIiwidXJpVmFsaWRhdG9yIiwiaWdub3JlIiwib3V0IiwiYmluZCIsInZhbGlkRWxlbWVudHMiLCJmb3JFYWNoIiwibGtleSIsInZhbGlkQXR0cnMiLCJ1cmlBdHRycyIsIiQkbWluRXJyIiwib3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzIiwib3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyIsInN2Z0VsZW1lbnRzIiwiaHRtbEF0dHJzIiwic3ZnQXR0cnMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwcm92aWRlciIsIiRzYW5pdGl6ZSIsIkxJTktZX1VSTF9SRUdFWFAiLCJNQUlMVE9fUkVHRVhQIiwidGFyZ2V0IiwiYWRkVGV4dCIsImFkZExpbmsiLCJ1cmwiLCJpc0RlZmluZWQiLCJyYXciLCJzdWJzdHIiLCJzdGRCdXR0b25DbGFzcyIsImJ1dHRvbnMiLCJzZXRCdXR0b25DbGFzcyIsImNscyIsImdldEJ1dHRvbkNsYXNzIiwiY3VycmVudExvY2FsZSIsImRpY3Rpb25hcmllcyIsIm5scyIsInNldExvY2FsZSIsImxvY2FsZSIsImdldExvY2FsZSIsInNldFRyYW5zbGF0aW9ucyIsInRyYW5zbGF0aW9ucyIsImdldFN1cHBvcnRlZExvY2FsZXMiLCJPYmplY3QiLCJrZXlzIiwiXyIsImRpY3Rpb25hcnkiLCJkZWZhdWx0RGljdGlvbmFyeSIsImNvbmZpZyIsIm5sc1Byb3ZpZGVyIiwic3Bpbm5lciIsInZpc2libGUiLCJtZXNzYWdlIiwiY29udHJvbGxlciIsIiRzY29wZSIsInNob3ciLCJoaWRlIiwiY3RybCIsInNwaW5uZXJzIiwibWVzc2FnZXMiLCJ0b3RhbCIsImlkIiwiJCIsIm9uIiwiZSIsInRyaWdnZXIiLCIkaHR0cCIsIm1vZGFscyIsImdlbmVyYWxTcGlubmVyIiwiYWpheCIsIkFqYXgiLCJlcnJvckhhbmRsZXJzIiwiYWRkRXJyb3JIYW5kbGVyIiwiZXJyb3JDb2RlIiwiY29kZSIsInJlbW92ZUVycm9ySGFuZGxlciIsImhhbmRsZUVycm9yIiwicGF5bG9hZCIsInJlcyIsInJlZyIsImhhbmRsZUVycm9ycyIsImVtcHR5X3Jlc3BvbnNlIiwiZXJyb3JzIiwicHJvY2Vzc1Jlc3BvbnNlIiwicmVzcG9uc2UiLCJkZWZhdWx0TWVzc2FnZSIsImlzU3RyaW5nIiwibSIsInRyaW0iLCJzcGlubmVyc1VzZWQiLCJwcmVwYXJlIiwib3B0aW9ucyIsInNwaW5uZXJJZCIsInNwaW5uZXJGaWVsZElkIiwic3Bpbm5lck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJzdWNjZXNzTWVzc2FnZSIsImZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0ZU9uU2VuZCIsInNlbmQiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb21wbGV0ZSIsInByZXBhcmVkIiwic2VuZEhhbmRsZXIiLCJyZXN1bHQiLCJ2YWxpZGF0ZUZpZWxkcyIsInZhbGlkYXRlRmllbGRCeUlkIiwic2V0RmllbGRTdGF0ZSIsImNsZWFyTWVzc2FnZSIsImNvbXBsZXRlSGFuZGxlciIsInN0YXR1cyIsImhlYWRlcnMiLCJlcnJvckhhbmRsZXIiLCJzaG93RXJyb3JzIiwiYWxlcnQiLCJzdWNjZXNzSGFuZGxlciIsInNob3dNZXNzYWdlIiwicmVxdWVzdCIsIm1ldGhvZCIsImdldCIsImhlYWQiLCJqc29ucCIsInB1dCIsInBhdGNoIiwicHJvbWlzZSIsImRlbCIsInBvc3REYXRhIiwiY29uZmlybSIsIm9uU3VjY2VzcyIsInNlbmRSZXF1ZXN0IiwiY2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsImJ0biIsInF1ZXVlIiwiY3JlYXRlIiwiYnV0dG9uIiwiZGVmYXVsdE9wdGlvbnMiLCJ0aXRsZSIsIm1vZGFsQ2xhc3MiLCJjYWxsYmFjayIsImNvbnRlbnQiLCJjbG9zZSIsIiRldmVudCIsImN1cnJlbnRUYXJnZXQiLCJzaGlmdCIsImJ1dHRvbkNsYXNzIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsInRyYW5zY2x1ZGUiLCJtb2RhbCIsIndpZHRoIiwiaGVpZ2h0Iiwib25DbG9zZSIsImlzT3BlbiIsInNldFRpdGxlIiwic2V0QnV0dG9ucyIsImJ0bnMiLCJjc3MiLCJZZXMiLCJObyIsIk9rIiwidmFsaWRhdG9yIiwic2Nyb2xsTWFyZ2luIiwic2Nyb2xsRHVyYXRpb24iLCJmaWVsZHMiLCJtZXNzYWdlQm94Iiwic2V0TWVzc2FnZUJveCIsIm1zZ0JveCIsInN0YXRlIiwiYWRkRmllbGQiLCJmaWVsZCIsInNldEZpZWxkRXJyb3IiLCJjbGVhckZpZWxkRXJyb3IiLCJjaGVja1JlcXVpcmVkIiwiYyIsInJlcXVpcmVkIiwiYWN0aXZlIiwiY2hlY2tMZW5ndGgiLCJtYXgiLCJjaGVja1JhbmdlIiwicmFuZ2UiLCJsb3dlciIsIm1pbkUiLCJncmVhdGVyIiwibWF4RSIsImNoZWNrTHQiLCJsdCIsImNoZWNrTGUiLCJsZSIsImNoZWNrR3QiLCJndCIsImNoZWNrR2UiLCJnZSIsImNoZWNrUmVnZXhwIiwicmVnZXhwIiwidmFsaWQiLCJmb3JiaWQiLCJjaGVja1Bhc3N3b3JkcyIsInBhc3N3b3JkcyIsInJlcGVhdEZpZWxkIiwicmVwZWF0IiwiY2hlY2tBcGkiLCJhcGkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjaGVja0N1c3RvbSIsImN1c3RvbSIsIiRwYXJlbnQiLCJjYWxsIiwidmFsaWRhdGVGaWVsZCIsInNpbGVudCIsImNoZWNrcyIsImNoZWNrIiwiZmllbGRJZCIsInNjcm9sbFRvIiwic2Nyb2xsUG9zIiwib2Zmc2V0IiwidG9wIiwiZHVyYXRpb24iLCJwYXJzZUludCIsImpRdWVyeSIsInBhZ2VZT2Zmc2V0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInNjcm9sbFVwIiwiZ2V0RmllbGRWYWx1ZXMiLCJ2YWx1ZXMiLCJkZWxheWVkQ2FsbCIsInJlcXVpcmUiLCJsYWJlbCIsImhpbnQiLCIkYXR0cnMiLCJjb250cm9sbGVycyIsInNldHVwSWYiLCIkd2F0Y2giLCJzZXR1cFJlcXVpcmVkIiwic2hvcnQiLCJzaG9ydHMiLCJjb25kaXRpb24iLCJzZXR1cExlbmd0aCIsIm1lc3NhZ2VUZW1wbGF0ZSIsInNldHVwUmFuZ2UiLCJtaW5TdHIiLCJtYXhTdHIiLCJmb3JtYXQiLCJwYXJzZUZsb2F0Iiwic2V0dXBMdCIsInNldHVwTGUiLCJzZXR1cEd0Iiwic2V0dXBHZSIsInNldHVwUmVnRXhwIiwicGF0dGVybkFuZE1vZGlmaWVycyIsImV4ZWMiLCJwYXR0ZXJuIiwibW9kaWZpZXJzIiwic2V0dXBFbWFpbCIsInNldHVwUGFzc3dvcmRzIiwic2V0dXBBcGlDYWxsIiwiZGVsYXkiLCIkaW5wdXQiLCJmb3JtQ3RybCIsInNldHVwQ3VzdG9tIiwiZmluZCIsImlucHV0VHlwZSIsIiRvbGRMYWJlbCIsIiRuZXdMYWJlbCIsIm1vZGVsIiwiYWRkQ2xhc3MiLCJmb2N1cyIsImJsdXIiLCJyZW1vdmVDbGFzcyIsInJlc2l6ZVRleHRhcmVhIiwicHJvcCIsInRpbWVvdXRzIiwiY2FsbElkIiwiaGFuZGxlIiwiY2FuY2VsIiwibWVzc2FnZV9yZXF1aXJlZCIsIm1lc3NhZ2VfbGVuZ3RoIiwibWVzc2FnZV9yYW5nZSIsIm1lc3NhZ2VfbHQiLCJtZXNzYWdlX2xlIiwibWVzc2FnZV9ndCIsIm1lc3NhZ2VfZ2UiLCJtZXNzYWdlX3JlZ2V4cCIsIm1lc3NhZ2VfZW1haWwiLCJtZXNzYWdlX3Bhc3N3b3JkcyIsIm1lc3NhZ2VfY3VzdG9tIiwicGFnaW5hdGlvbiIsImN1cnJlbnRQYWdlIiwidG90YWxQYWdlcyIsInBhY2tTaXplIiwiaHJlZlRlbXBsYXRlIiwib3JkZXIiLCJwYWdlIiwiJGVtaXQiLCJzZXRDdXJyZW50UGFnZSIsInZhbCIsInJlbmRlciIsImdldEN1cnJlbnRQYWdlIiwic2V0VG90YWxQYWdlcyIsImdldFRvdGFsUGFnZXMiLCJzZXRQYWNrU2l6ZSIsImdldFBhY2tTaXplIiwic2V0SHJlZlRlbXBsYXRlIiwiZ2V0SHJlZlRlbXBsYXRlIiwiZ2V0SHJlZiIsImhyZWYiLCJnZXRJdGVtcyIsImN1cnJlbnQiLCJwYWNrU3RhcnQiLCJwYWNrRmluaXNoIiwiZmxvb3IiLCJjZWlsIiwiaXRlbSIsIm5leHQiLCJwcmV2aW91cyIsIm5leHRfcGFnZSIsInByZXZpb3VzX3BhZ2UiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLFNBQVFDLE9BQU8sbUJBQ1ZDLFFBQVEsU0FBVSxVQUFXLFdBQVksV0FBWSxTQUFTQyxRQUFTQyxTQUFVQyxVQUM5RSxHQUFJQyxRQUFTSCxRQUFRRyxVQXlQckIsT0F2UEFBLFFBQU9DLE1BQVFELE9BQU9DLFFBWWxCQyxRQUFTLFNBQVNDLFVBQVdDLE9BQVFDLGdCQUlqQyxJQUFJLEdBSEFDLE9BQVFILFVBQVVJLE1BQU0sS0FDeEJDLEtBQU9YLFFBQ1BZLEtBQU8sR0FDSEMsRUFBSSxFQUFHQSxFQUFJSixNQUFNSyxTQUNyQkYsS0FBT0gsTUFBTUksR0FDVkEsSUFBTUosTUFBTUssT0FBUyxHQUZLRCxJQUs3QkYsS0FBS0MsTUFBUUQsS0FBS0MsVUFDbEJELEtBQU9BLEtBQUtDLEtBa0JoQixPQWZHZixTQUFRa0IsWUFBWVAsa0JBQ25CQSxlQUFpQkQsT0FDakJBLE9BQVMsTUFHVkEsT0FDSUEsT0FBT1MsUUFBVW5CLFFBQVFvQixXQUFXVixPQUFPUyxRQUMxQ0wsS0FBS0MsTUFBUUwsT0FBT1MsT0FBT1IsZ0JBRTNCRyxLQUFLQyxNQUFRZixRQUFRbUIsT0FBT1QsT0FBUUMsZ0JBR3hDRyxLQUFLQyxNQUFRSixlQUdWRyxLQUFLQyxPQVVoQk0sT0FBUSxTQUFTWixVQUFXVSxRQUl4QixJQUFJLEdBSEFQLE9BQVFILFVBQVVJLE1BQU0sS0FDeEJDLEtBQU9YLFFBQ1BZLEtBQU8sR0FDSEMsRUFBSSxFQUFHQSxFQUFJSixNQUFNSyxPQUFRRCxJQUM3QkQsS0FBT0gsTUFBTUksR0FDYkYsS0FBS0MsTUFBUUQsS0FBS0MsVUFDbEJELEtBQU9BLEtBQUtDLEtBTWhCLE9BSkdJLFNBQVVuQixRQUFRc0IsU0FBU0gsU0FDMUJuQixRQUFRbUIsT0FBT0ws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UW9iLFFBQVEsRUFBRyxjQUsxQ3ZXLE9BTVh3RyxPQUFPb1AsT0FBUyxXQUNacFAsT0FBT3hHLE1BQVF3RyxPQUFPOFAsWUFHMUI5UCxPQUFPME8sV0FBYTFPLFlBSS9CTixRQUFRLGNBQWUsU0FBU0MsYUFHN0JBLFlBQVlULGdCQUFnQixTQUN4Qm1SLEtBQVEsT0FDUkMsU0FBWSxXQUNaQyxVQUFhLFlBQ2JDLGNBQWlCLGtCQUdyQjdRLFlBQVlULGdCQUFnQixTQUN4Qm1SLEtBQVEsWUFDUkMsU0FBWSxhQUNaQyxVQUFhLHFCQUNiQyxjQUFpQiIsImZpbGUiOiJjaGF5a2EtY29yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS11dGlscycsIFtdKVxuICAgIC5mYWN0b3J5KCd1dGlscycsIFsnJHdpbmRvdycsICckdGltZW91dCcsICckY29tcGlsZScsIGZ1bmN0aW9uKCR3aW5kb3csICR0aW1lb3V0LCAkY29tcGlsZSl7XG4gICAgICAgIHZhciBDaGF5a2EgPSAkd2luZG93LkNoYXlrYSB8fCB7fTtcblxuICAgICAgICBDaGF5a2EuVXRpbHMgPSBDaGF5a2EuVXRpbHMgfHxcbiAgICAgICAge1xuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVuaWVudCB3YXkgZG8gZGVmaW5lIHNvbWUgb2JqZWN0IHdpdGggY29tcGxleCBuYW1lcyBsaWtlIENoYXlrYS5BdXRoLmFhYVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc25hbWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRlY2xhcmU6IGZ1bmN0aW9uKGNsYXNzbmFtZSwgcGFyZW50LCBpbXBsZW1lbnRhdGlvbil7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gY2xhc3NuYW1lLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSAkd2luZG93O1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZihpID09PSBwYXJ0cy5sZW5ndGggLSAxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvb3RbcGFydF0gPSByb290W3BhcnRdIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICByb290ID0gcm9vdFtwYXJ0XTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGltcGxlbWVudGF0aW9uKSl7XG4gICAgICAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uID0gcGFyZW50O1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHBhcmVudCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhcmVudC5leHRlbmQgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHBhcmVudC5leHRlbmQpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RbcGFydF0gPSBwYXJlbnQuZXh0ZW5kKGltcGxlbWVudGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290W3BhcnRdID0gYW5ndWxhci5leHRlbmQocGFyZW50LCBpbXBsZW1lbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgcm9vdFtwYXJ0XSA9IGltcGxlbWVudGF0aW9uO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByb290W3BhcnRdO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFbnN1cmUgdGhhdCBvYmplY3QgZXhpc3RzLCBleHRlbmRzIGl0IGlmIG5lZWRlZCBhbmQgcmV0dXJucyByZWZlcmVuY2UgdG8gaXQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzbmFtZVxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZFxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVuc3VyZTogZnVuY3Rpb24oY2xhc3NuYW1lLCBleHRlbmQpe1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGNsYXNzbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgIHZhciByb290ID0gJHdpbmRvdztcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9ICcnO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdFtwYXJ0XSA9IHJvb3RbcGFydF0gfHwge307XG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSByb290W3BhcnRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihleHRlbmQgJiYgYW5ndWxhci5pc09iamVjdChleHRlbmQpKXtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQocm9vdCwgZXh0ZW5kKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU29tZSBsaXR0bGUgaGVscGVyIHRvIGdldCBkZWZhdWx0IHZhbHVlcyxcbiAgICAgICAgICAgICAqIEtleSBjYW4gYmUgY29tcGxleCBsaWtlIENoYXlrYS5BdXRoLmFhYVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBvYmpcbiAgICAgICAgICAgICAqIEBwYXJhbSBrZXlcbiAgICAgICAgICAgICAqIEBwYXJhbSBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbihvYmosIGtleSwgZGVmYXVsdFZhbHVlKXtcbiAgICAgICAgICAgICAgICBpZihkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IChrZXkrJycpLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgICAgaWYob2JqICYmIChhbmd1bGFyLmlzT2JqZWN0KG9iaikgfHwgYW5ndWxhci5pc0FycmF5KG9iaikpKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBvYmo7XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoKGFuZ3VsYXIuaXNPYmplY3Qocm9vdCkgfHwgYW5ndWxhci5pc0FycmF5KHJvb3QpKSAmJiByb290W3BhcnRdIT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290ID0gcm9vdFtwYXJ0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGRlZmF1bHQgdmFsdWVzIGlmIG9iamVjdCBtZW1iZXJzIG5vdCBzZXRcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3t9fSBvYmpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7e319IGRlZmF1bHRzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldE9iamVjdERlZmF1bHRzOiBmdW5jdGlvbihvYmosIGRlZmF1bHRzKXtcbiAgICAgICAgICAgICAgICBvYmogPSBvYmogfHwge307XG4gICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gZGVmYXVsdHMpe1xuICAgICAgICAgICAgICAgICAgICBpZihkZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBkZWZhdWx0c1trZXldID09PSAnb2JqZWN0Jyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSBDaGF5a2EuVXRpbHMuc2V0T2JqZWN0RGVmYXVsdHMob2JqW2tleV0gfHwge30sIGRlZmF1bHRzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYob2JqW2tleV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSBkZWZhdWx0c1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVtb3ZlIGFsbCBleGlzdGluZyBvYmplY3QgbWVtYmVycyBhbmQgc2V0IG5ldyBvbmVzIGZyb20gdXBkYXRlLlxuICAgICAgICAgICAgICogUmV0dXJucyB1cGRhdGVkIG9iamVjdFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7e319IG9ialxuICAgICAgICAgICAgICogQHBhcmFtIHt7fX0gdXBkYXRlXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdXBkYXRlT2JqZWN0OiBmdW5jdGlvbihvYmosIHVwZGF0ZSl7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBwcm9wZXJ0eSBpbiBvYmope1xuICAgICAgICAgICAgICAgICAgICBpZihvYmouaGFzT3duUHJvcGVydHkocHJvcGVydHkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVwZGF0ZVtwcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmV4dGVuZChvYmosIHVwZGF0ZSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBwYXJhbSBmcm9tIGh0bWwgdGFnXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRlbGVtZW50XG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICogQHBhcmFtIHsqfSBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgICAqIEByZXR1cm4geyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldEh0bWxQYXJhbTogZnVuY3Rpb24oJGVsZW1lbnQsIG5hbWUsIGRlZmF1bHRWYWx1ZSl7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJGVsZW1lbnQuYXR0cihuYW1lKSB8fCAkZWxlbWVudC5hdHRyKCdkYXRhLScrbmFtZSkgfHwgJGVsZW1lbnQuZGF0YShuYW1lKTtcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2ltcGxlIHRlbXBsYXRlIGZ1bmN0aW9uLCByZXBsYWNlcyAne3Zhcn0nIHdpdGggdmFyIHZhbHVlLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cGxcbiAgICAgICAgICAgICAqIEBwYXJhbSB7b2JqfSBwYXJhbXNcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRlbXBsYXRlOiBmdW5jdGlvbih0cGwsIHBhcmFtcyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRwbC5yZXBsYWNlKC97KFtefV0rKX0vZywgZnVuY3Rpb24oYWxsLCBwYXJhbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXNbcGFyYW1dLnRvU3RyaW5nKCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJ1bGxldCBwcm9vZiBzY29wZS4kYXBwbHkoKSBjYWxsZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSBzY29wZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwYXRjaFNjb3BlOiBmdW5jdGlvbihzY29wZSl7XG4gICAgICAgICAgICAgICAgaWYoc2NvcGUgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHNjb3BlLiRhcHBseSkpe1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe3Njb3BlLiRhcHBseSgpO30sIDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgcmVzb3VyY2UgdXJsIGZyb20gc3BlY2lmaWVkIGNoYXlrYSBhcHBsaWNhdGlvbiAocGx1Z2luIG9yIHRoZW1lKVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBhcHBJZFxuICAgICAgICAgICAgICogQHBhcmFtIHJlc1BhdGhcbiAgICAgICAgICAgICAqIEByZXR1cm4geyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFJlc291cmNlVXJsOiBmdW5jdGlvbihhcHBJZCwgcmVzUGF0aCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENoYXlrYS5VdGlscy5nZXRJdGVtKENoYXlrYS5Db3JlLmFwcFJlc0ZvbGRlclVybHMsIGFwcElkLCAnL25vX2FwcF91cmxfZm91bmQvJykgKyByZXNQYXRoO1xuICAgICAgICAgICAgfSxcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE1hbnVhbGx5IGNvbXBpbGVzIHRoZSBlbGVtZW50LCBmaXhpbmcgdGhlIHJlY3Vyc2lvbiBsb29wLlxuICAgICAgICAgICAgICogQHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NDMwNjU1L3JlY3Vyc2lvbi1pbi1hbmd1bGFyLWRpcmVjdGl2ZXNcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAgICAgICAgICogQHBhcmFtIFtsaW5rXSBBIHBvc3QtbGluayBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IHdpdGggZnVuY3Rpb24ocykgcmVnaXN0ZXJlZCB2aWEgcHJlIGFuZCBwb3N0IHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgbGlua2luZyBmdW5jdGlvbnMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlY3Vyc2l2ZURpcmVjdGl2ZUNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGxpbmspe1xuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgbGluayBwYXJhbWV0ZXJcbiAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzRnVuY3Rpb24obGluaykpe1xuICAgICAgICAgICAgICAgICAgICBsaW5rID0geyBwb3N0OiBsaW5rIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQnJlYWsgdGhlIHJlY3Vyc2lvbiBsb29wIGJ5IHJlbW92aW5nIHRoZSBjb250ZW50c1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50cyA9IGVsZW1lbnQuY29udGVudHMoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGlsZWRDb250ZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBwcmU6IChsaW5rICYmIGxpbmsucHJlKSA/IGxpbmsucHJlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbXBpbGVzIGFuZCByZS1hZGRzIHRoZSBjb250ZW50c1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGlsZSB0aGUgY29udGVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjb21waWxlZENvbnRlbnRzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxlZENvbnRlbnRzID0gJGNvbXBpbGUoY29udGVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmUtYWRkIHRoZSBjb21waWxlZCBjb250ZW50cyB0byB0aGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZWRDb250ZW50cyhzY29wZSwgZnVuY3Rpb24oY2xvbmUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBwb3N0LWxpbmtpbmcgZnVuY3Rpb24sIGlmIGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobGluayAmJiBsaW5rLnBvc3Qpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsucG9zdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJuIG9yZGluYWwgc3VmZml4IG9mIGFuIGludGVnZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fSBpbnB1dFxuICAgICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvcmRpbmFsOiBmdW5jdGlvbihpbnB1dCl7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBpbnB1dCAlIDEwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG4gPCAxMSB8fCBuID4gMTMpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIFsnc3QnLCAnbmQnLCAncmQnLCAndGgnXVtNYXRoLm1pbigobiAtIDEpICUgMTAsIDMpXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAndGgnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgQ2hheWthLlV0aWxzLmVuc3VyZSgnQ2hheWthLlV0aWxzJywgQ2hheWthLlV0aWxzKTtcblxuICAgICAgICByZXR1cm4gQ2hheWthLlV0aWxzO1xuICAgIH1dKVxuICAgIC8qKlxuICAgICAqIEFuZ3VsYXIgZGlyZWN0aXZlIHRoYXQgaW5jbHVkZXMgYSB0ZW1wbGF0ZSBmcm9tIFdQIHBsdWdpbiBvciB0aGVtZS5cbiAgICAgKiBZb3UgZG9uJ3QgaGF2ZSB0byBrbm93IHBsdWdpbiBzZXJ2ZXIgcGF0aCBidXQgaXQncyBJRCBpbnN0ZWFkXG4gICAgICogV29ya3MgbGlrZSB0aGF0OlxuICAgICAqICAgICAgPGRpdiB3cC1pbmNsdWRlPVwiQ2hheWthLkNvcmU6bmcvdGVtcGxhdGUuaHRtbFwiPjwvZGl2PlxuICAgICAqICAgICAgPGRpdiB3cC1pbmNsdWRlPVwibmcvdGVtcGxhdGUuaHRtbFwiIHdwLWFwcD1cIkNoYXlrYS5Db3JlXCI+PC9kaXY+XG4gICAgICogICAgICA8d3AtaW5jbHVkZT1cIkNoYXlrYS5Db3JlOm5nL3RlbXBsYXRlLmh0bWxcIj48L3dwLWluY2x1ZGU+XG4gICAgICogICAgICA8d3AtaW5jbHVkZT1cIm5nL3RlbXBsYXRlLmh0bWxcIiBhcHAtaWQ9XCJDaGF5a2EuQ29yZVwiPjwvd3AtaW5jbHVkZT5cbiAgICAgKi9cbiAgICAuZGlyZWN0aXZlKCd3cEluY2x1ZGUnLCBbJ3V0aWxzJywgZnVuY3Rpb24odXRpbHMpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlcyl7XG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGUgPSBhdHRyaWJ1dGVzWyd3cEluY2x1ZGUnXSB8fFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzWyd3cC1pbmNsdWRlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1snZGF0YS13cC1pbmNsdWRlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1snc3JjJ107XG4gICAgICAgICAgICAgICAgdmFyIHNyYyA9IGluY2x1ZGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IGluY2x1ZGUuc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICB2YXIgYXBwSWQgPSBhdHRyaWJ1dGVzWyd3cEFwcCddIHx8XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ3dwLWFwcCddIHx8XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ2RhdGEtd3AtYXBwJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1snYXBwLWlkJ107XG4gICAgICAgICAgICAgICAgaWYocGFyYW1zLmxlbmd0aCA+IDEpe1xuICAgICAgICAgICAgICAgICAgICBhcHBJZCA9IHBhcmFtc1swXTtcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gcGFyYW1zWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuZ2V0UmVzb3VyY2VVcmwoYXBwSWQsIHNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmZpbHRlcignb3JkaW5hbCcsIFsndXRpbHMnLCBmdW5jdGlvbih1dGlscyl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCl7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQgKyB1dGlscy5vcmRpbmFsKGlucHV0KTtcbiAgICAgICAgfTtcbiAgICB9XSlcbjsiLCIvKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXJKUyB2MS4zLjIwXG4gKiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRzYW5pdGl6ZU1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIoJyRzYW5pdGl6ZScpO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nU2FuaXRpemVcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICMgbmdTYW5pdGl6ZVxuICpcbiAqIFRoZSBgbmdTYW5pdGl6ZWAgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgdG8gc2FuaXRpemUgSFRNTC5cbiAqXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1Nhbml0aXplXCI+PC9kaXY+XG4gKlxuICogU2VlIHtAbGluayBuZ1Nhbml0aXplLiRzYW5pdGl6ZSBgJHNhbml0aXplYH0gZm9yIHVzYWdlLlxuICovXG5cbi8qXG4gKiBIVE1MIFBhcnNlciBCeSBNaXNrbyBIZXZlcnkgKG1pc2tvQGhldmVyeS5jb20pXG4gKiBiYXNlZCBvbjogIEhUTUwgUGFyc2VyIEJ5IEpvaG4gUmVzaWcgKGVqb2huLm9yZylcbiAqIE9yaWdpbmFsIGNvZGUgYnkgRXJpayBBcnZpZHNzb24sIE1vemlsbGEgUHVibGljIExpY2Vuc2VcbiAqIGh0dHA6Ly9lcmlrLmVhZS5uZXQvc2ltcGxlaHRtbHBhcnNlci9zaW1wbGVodG1scGFyc2VyLmpzXG4gKlxuICogLy8gVXNlIGxpa2Ugc286XG4gKiBodG1sUGFyc2VyKGh0bWxTdHJpbmcsIHtcbiAqICAgICBzdGFydDogZnVuY3Rpb24odGFnLCBhdHRycywgdW5hcnkpIHt9LFxuICogICAgIGVuZDogZnVuY3Rpb24odGFnKSB7fSxcbiAqICAgICBjaGFyczogZnVuY3Rpb24odGV4dCkge30sXG4gKiAgICAgY29tbWVudDogZnVuY3Rpb24odGV4dCkge31cbiAqIH0pO1xuICpcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzYW5pdGl6ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgVGhlIGlucHV0IGlzIHNhbml0aXplZCBieSBwYXJzaW5nIHRoZSBIVE1MIGludG8gdG9rZW5zLiBBbGwgc2FmZSB0b2tlbnMgKGZyb20gYSB3aGl0ZWxpc3QpIGFyZVxuICogICB0aGVuIHNlcmlhbGl6ZWQgYmFjayB0byBwcm9wZXJseSBlc2NhcGVkIGh0bWwgc3RyaW5nLiBUaGlzIG1lYW5zIHRoYXQgbm8gdW5zYWZlIGlucHV0IGNhbiBtYWtlXG4gKiAgIGl0IGludG8gdGhlIHJldHVybmVkIHN0cmluZywgaG93ZXZlciwgc2luY2Ugb3VyIHBhcnNlciBpcyBtb3JlIHN0cmljdCB0aGFuIGEgdHlwaWNhbCBicm93c2VyXG4gKiAgIHBhcnNlciwgaXQncyBwb3NzaWJsZSB0aGF0IHNvbWUgb2JzY3VyZSBpbnB1dCwgd2hpY2ggd291bGQgYmUgcmVjb2duaXplZCBhcyB2YWxpZCBIVE1MIGJ5IGFcbiAqICAgYnJvd3Nlciwgd29uJ3QgbWFrZSBpdCB0aHJvdWdoIHRoZSBzYW5pdGl6ZXIuIFRoZSBpbnB1dCBtYXkgYWxzbyBjb250YWluIFNWRyBtYXJrdXAuXG4gKiAgIFRoZSB3aGl0ZWxpc3QgaXMgY29uZmlndXJlZCB1c2luZyB0aGUgZnVuY3Rpb25zIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGAgYW5kXG4gKiAgIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgIG9mIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyIGAkY29tcGlsZVByb3ZpZGVyYH0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGh0bWwgSFRNTCBpbnB1dC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFNhbml0aXplZCBIVE1MLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJzYW5pdGl6ZUV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdzYW5pdGl6ZUV4YW1wbGUnLCBbJ25nU2FuaXRpemUnXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHNjZScsIGZ1bmN0aW9uKCRzY29wZSwgJHNjZSkge1xuICAgICAgICAgICAgICRzY29wZS5zbmlwcGV0ID1cbiAgICAgICAgICAgICAgICc8cCBzdHlsZT1cImNvbG9yOmJsdWVcIj5hbiBodG1sXFxuJyArXG4gICAgICAgICAgICAgICAnPGVtIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD1cXCdQV04zRCFcXCdcIj5jbGljayBoZXJlPC9lbT5cXG4nICtcbiAgICAgICAgICAgICAgICdzbmlwcGV0PC9wPic7XG4gICAgICAgICAgICAgJHNjb3BlLmRlbGliZXJhdGVseVRydXN0RGFuZ2Vyb3VzU25pcHBldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwoJHNjb3BlLnNuaXBwZXQpO1xuICAgICAgICAgICAgIH07XG4gICAgICAgICAgIH1dKTtcbiAgICAgPC9zY3JpcHQ+XG4gICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgIFNuaXBwZXQ6IDx0ZXh0YXJlYSBuZy1tb2RlbD1cInNuaXBwZXRcIiBjb2xzPVwiNjBcIiByb3dzPVwiM1wiPjwvdGV4dGFyZWE+XG4gICAgICAgPHRhYmxlPlxuICAgICAgICAgPHRyPlxuICAgICAgICAgICA8dGQ+RGlyZWN0aXZlPC90ZD5cbiAgICAgICAgICAgPHRkPkhvdzwvdGQ+XG4gICAgICAgICAgIDx0ZD5Tb3VyY2U8L3RkPlxuICAgICAgICAgICA8dGQ+UmVuZGVyZWQ8L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICAgIDx0ciBpZD1cImJpbmQtaHRtbC13aXRoLXNhbml0aXplXCI+XG4gICAgICAgICAgIDx0ZD5uZy1iaW5kLWh0bWw8L3RkPlxuICAgICAgICAgICA8dGQ+QXV0b21hdGljYWxseSB1c2VzICRzYW5pdGl6ZTwvdGQ+XG4gICAgICAgICAgIDx0ZD48cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwic25pcHBldFwiJmd0Ozxici8+Jmx0Oy9kaXYmZ3Q7PC9wcmU+PC90ZD5cbiAgICAgICAgICAgPHRkPjxkaXYgbmctYmluZC1odG1sPVwic25pcHBldFwiPjwvZGl2PjwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwiYmluZC1odG1sLXdpdGgtdHJ1c3RcIj5cbiAgICAgICAgICAgPHRkPm5nLWJpbmQtaHRtbDwvdGQ+XG4gICAgICAgICAgIDx0ZD5CeXBhc3MgJHNhbml0aXplIGJ5IGV4cGxpY2l0bHkgdHJ1c3RpbmcgdGhlIGRhbmdlcm91cyB2YWx1ZTwvdGQ+XG4gICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cImRlbGliZXJhdGVseVRydXN0RGFuZ2Vyb3VzU25pcHBldCgpXCImZ3Q7XG4mbHQ7L2RpdiZndDs8L3ByZT5cbiAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgPHRkPjxkaXYgbmctYmluZC1odG1sPVwiZGVsaWJlcmF0ZWx5VHJ1c3REYW5nZXJvdXNTbmlwcGV0KClcIj48L2Rpdj48L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICAgIDx0ciBpZD1cImJpbmQtZGVmYXVsdFwiPlxuICAgICAgICAgICA8dGQ+bmctYmluZDwvdGQ+XG4gICAgICAgICAgIDx0ZD5BdXRvbWF0aWNhbGx5IGVzY2FwZXM8L3RkPlxuICAgICAgICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCImZ3Q7PGJyLz4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxuICAgICAgICAgICA8dGQ+PGRpdiBuZy1iaW5kPVwic25pcHBldFwiPjwvZGl2PjwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgIGl0KCdzaG91bGQgc2FuaXRpemUgdGhlIGh0bWwgc25pcHBldCBieSBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtc2FuaXRpemUgZGl2JykpLmdldElubmVySHRtbCgpKS5cbiAgICAgICAgIHRvQmUoJzxwPmFuIGh0bWxcXG48ZW0+Y2xpY2sgaGVyZTwvZW0+XFxuc25pcHBldDwvcD4nKTtcbiAgICAgfSk7XG5cbiAgICAgaXQoJ3Nob3VsZCBpbmxpbmUgcmF3IHNuaXBwZXQgaWYgYm91bmQgdG8gYSB0cnVzdGVkIHZhbHVlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtdHJ1c3QgZGl2JykpLmdldElubmVySHRtbCgpKS5cbiAgICAgICAgIHRvQmUoXCI8cCBzdHlsZT1cXFwiY29sb3I6Ymx1ZVxcXCI+YW4gaHRtbFxcblwiICtcbiAgICAgICAgICAgICAgXCI8ZW0gb25tb3VzZW92ZXI9XFxcInRoaXMudGV4dENvbnRlbnQ9J1BXTjNEISdcXFwiPmNsaWNrIGhlcmU8L2VtPlxcblwiICtcbiAgICAgICAgICAgICAgXCJzbmlwcGV0PC9wPlwiKTtcbiAgICAgfSk7XG5cbiAgICAgaXQoJ3Nob3VsZCBlc2NhcGUgc25pcHBldCB3aXRob3V0IGFueSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWRlZmF1bHQgZGl2JykpLmdldElubmVySHRtbCgpKS5cbiAgICAgICAgIHRvQmUoXCImbHQ7cCBzdHlsZT1cXFwiY29sb3I6Ymx1ZVxcXCImZ3Q7YW4gaHRtbFxcblwiICtcbiAgICAgICAgICAgICAgXCImbHQ7ZW0gb25tb3VzZW92ZXI9XFxcInRoaXMudGV4dENvbnRlbnQ9J1BXTjNEISdcXFwiJmd0O2NsaWNrIGhlcmUmbHQ7L2VtJmd0O1xcblwiICtcbiAgICAgICAgICAgICAgXCJzbmlwcGV0Jmx0Oy9wJmd0O1wiKTtcbiAgICAgfSk7XG5cbiAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLmNsZWFyKCk7XG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnc25pcHBldCcpKS5zZW5kS2V5cygnbmV3IDxiIG9uY2xpY2s9XCJhbGVydCgxKVwiPnRleHQ8L2I+Jyk7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtc2FuaXRpemUgZGl2JykpLmdldElubmVySHRtbCgpKS5cbiAgICAgICAgIHRvQmUoJ25ldyA8Yj50ZXh0PC9iPicpO1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXRydXN0IGRpdicpKS5nZXRJbm5lckh0bWwoKSkudG9CZShcbiAgICAgICAgICduZXcgPGIgb25jbGljaz1cImFsZXJ0KDEpXCI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWRlZmF1bHQgZGl2JykpLmdldElubmVySHRtbCgpKS50b0JlKFxuICAgICAgICAgXCJuZXcgJmx0O2Igb25jbGljaz1cXFwiYWxlcnQoMSlcXFwiJmd0O3RleHQmbHQ7L2ImZ3Q7XCIpO1xuICAgICB9KTtcbiAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJFNhbml0aXplUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJCRzYW5pdGl6ZVVyaScsIGZ1bmN0aW9uKCQkc2FuaXRpemVVcmkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaHRtbCkge1xuICAgICAgdmFyIGJ1ZiA9IFtdO1xuICAgICAgaHRtbFBhcnNlcihodG1sLCBodG1sU2FuaXRpemVXcml0ZXIoYnVmLCBmdW5jdGlvbih1cmksIGlzSW1hZ2UpIHtcbiAgICAgICAgcmV0dXJuICEvXnVuc2FmZS8udGVzdCgkJHNhbml0aXplVXJpKHVyaSwgaXNJbWFnZSkpO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGJ1Zi5qb2luKCcnKTtcbiAgICB9O1xuICB9XTtcbn1cblxuZnVuY3Rpb24gc2FuaXRpemVUZXh0KGNoYXJzKSB7XG4gIHZhciBidWYgPSBbXTtcbiAgdmFyIHdyaXRlciA9IGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIGFuZ3VsYXIubm9vcCk7XG4gIHdyaXRlci5jaGFycyhjaGFycyk7XG4gIHJldHVybiBidWYuam9pbignJyk7XG59XG5cblxuLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzXG52YXIgU1RBUlRfVEFHX1JFR0VYUCA9XG4gICAgICAgL148KCg/OlthLXpBLVpdKVtcXHc6LV0qKSgoPzpcXHMrW1xcdzotXSsoPzpcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXxbXj5cXHNdKykpPykqKVxccyooXFwvPylcXHMqKD4/KS8sXG4gIEVORF9UQUdfUkVHRVhQID0gL148XFwvXFxzKihbXFx3Oi1dKylbXj5dKj4vLFxuICBBVFRSX1JFR0VYUCA9IC8oW1xcdzotXSspKD86XFxzKj1cXHMqKD86KD86XCIoKD86W15cIl0pKilcIil8KD86JygoPzpbXiddKSopJyl8KFtePlxcc10rKSkpPy9nLFxuICBCRUdJTl9UQUdfUkVHRVhQID0gL148LyxcbiAgQkVHSU5HX0VORF9UQUdFX1JFR0VYUCA9IC9ePFxcLy8sXG4gIENPTU1FTlRfUkVHRVhQID0gLzwhLS0oLio/KS0tPi9nLFxuICBET0NUWVBFX1JFR0VYUCA9IC88IURPQ1RZUEUoW14+XSo/KT4vaSxcbiAgQ0RBVEFfUkVHRVhQID0gLzwhXFxbQ0RBVEFcXFsoLio/KV1dPi9nLFxuICBTVVJST0dBVEVfUEFJUl9SRUdFWFAgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nLFxuICAvLyBNYXRjaCBldmVyeXRoaW5nIG91dHNpZGUgb2Ygbm9ybWFsIGNoYXJzIGFuZCBcIiAocXVvdGUgY2hhcmFjdGVyKVxuICBOT05fQUxQSEFOVU1FUklDX1JFR0VYUCA9IC8oW15cXCMtfnwgfCFdKS9nO1xuXG5cbi8vIEdvb2Qgc291cmNlIG9mIGluZm8gYWJvdXQgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXNcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCNzZW1hbnRpY3Ncbi8vIGh0dHA6Ly9zaW1vbi5odG1sNS5vcmcvaHRtbC1lbGVtZW50c1xuXG4vLyBTYWZlIFZvaWQgRWxlbWVudHMgLSBIVE1MNVxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy9PdmVydmlldy5odG1sI3ZvaWQtZWxlbWVudHNcbnZhciB2b2lkRWxlbWVudHMgPSBtYWtlTWFwKFwiYXJlYSxicixjb2wsaHIsaW1nLHdiclwiKTtcblxuLy8gRWxlbWVudHMgdGhhdCB5b3UgY2FuLCBpbnRlbnRpb25hbGx5LCBsZWF2ZSBvcGVuIChhbmQgd2hpY2ggY2xvc2UgdGhlbXNlbHZlcylcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCNvcHRpb25hbC10YWdzXG52YXIgb3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzID0gbWFrZU1hcChcImNvbGdyb3VwLGRkLGR0LGxpLHAsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHJcIiksXG4gICAgb3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyA9IG1ha2VNYXAoXCJycCxydFwiKSxcbiAgICBvcHRpb25hbEVuZFRhZ0VsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cyk7XG5cbi8vIFNhZmUgQmxvY2sgRWxlbWVudHMgLSBIVE1MNVxudmFyIGJsb2NrRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgb3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzLCBtYWtlTWFwKFwiYWRkcmVzcyxhcnRpY2xlLFwiICtcbiAgICAgICAgXCJhc2lkZSxibG9ja3F1b3RlLGNhcHRpb24sY2VudGVyLGRlbCxkaXIsZGl2LGRsLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoMSxoMixoMyxoNCxoNSxcIiArXG4gICAgICAgIFwiaDYsaGVhZGVyLGhncm91cCxocixpbnMsbWFwLG1lbnUsbmF2LG9sLHByZSxzY3JpcHQsc2VjdGlvbix0YWJsZSx1bFwiKSk7XG5cbi8vIElubGluZSBFbGVtZW50cyAtIEhUTUw1XG52YXIgaW5saW5lRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgb3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cywgbWFrZU1hcChcImEsYWJicixhY3JvbnltLGIsXCIgK1xuICAgICAgICBcImJkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxxLHJ1YnkscnAscnQscyxcIiArXG4gICAgICAgIFwic2FtcCxzbWFsbCxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0aW1lLHR0LHUsdmFyXCIpKTtcblxuLy8gU1ZHIEVsZW1lbnRzXG4vLyBodHRwczovL3dpa2kud2hhdHdnLm9yZy93aWtpL1Nhbml0aXphdGlvbl9ydWxlcyNzdmdfRWxlbWVudHNcbnZhciBzdmdFbGVtZW50cyA9IG1ha2VNYXAoXCJhbmltYXRlLGFuaW1hdGVDb2xvcixhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGRlZnMsXCIgK1xuICAgICAgICBcImRlc2MsZWxsaXBzZSxmb250LWZhY2UsZm9udC1mYWNlLW5hbWUsZm9udC1mYWNlLXNyYyxnLGdseXBoLGhrZXJuLGltYWdlLGxpbmVhckdyYWRpZW50LFwiICtcbiAgICAgICAgXCJsaW5lLG1hcmtlcixtZXRhZGF0YSxtaXNzaW5nLWdseXBoLG1wYXRoLHBhdGgscG9seWdvbixwb2x5bGluZSxyYWRpYWxHcmFkaWVudCxyZWN0LHNldCxcIiArXG4gICAgICAgIFwic3RvcCxzdmcsc3dpdGNoLHRleHQsdGl0bGUsdHNwYW4sdXNlXCIpO1xuXG4vLyBTcGVjaWFsIEVsZW1lbnRzIChjYW4gY29udGFpbiBhbnl0aGluZylcbnZhciBzcGVjaWFsRWxlbWVudHMgPSBtYWtlTWFwKFwic2NyaXB0LHN0eWxlXCIpO1xuXG52YXIgdmFsaWRFbGVtZW50cyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUVsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEVuZFRhZ0VsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdmdFbGVtZW50cyk7XG5cbi8vQXR0cmlidXRlcyB0aGF0IGhhdmUgaHJlZiBhbmQgaGVuY2UgbmVlZCB0byBiZSBzYW5pdGl6ZWRcbnZhciB1cmlBdHRycyA9IG1ha2VNYXAoXCJiYWNrZ3JvdW5kLGNpdGUsaHJlZixsb25nZGVzYyxzcmMsdXNlbWFwLHhsaW5rOmhyZWZcIik7XG5cbnZhciBodG1sQXR0cnMgPSBtYWtlTWFwKCdhYmJyLGFsaWduLGFsdCxheGlzLGJnY29sb3IsYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLGNsYXNzLGNsZWFyLCcgK1xuICAgICdjb2xvcixjb2xzLGNvbHNwYW4sY29tcGFjdCxjb29yZHMsZGlyLGZhY2UsaGVhZGVycyxoZWlnaHQsaHJlZmxhbmcsaHNwYWNlLCcgK1xuICAgICdpc21hcCxsYW5nLGxhbmd1YWdlLG5vaHJlZixub3dyYXAscmVsLHJldixyb3dzLHJvd3NwYW4scnVsZXMsJyArXG4gICAgJ3Njb3BlLHNjcm9sbGluZyxzaGFwZSxzaXplLHNwYW4sc3RhcnQsc3VtbWFyeSx0YXJnZXQsdGl0bGUsdHlwZSwnICtcbiAgICAndmFsaWduLHZhbHVlLHZzcGFjZSx3aWR0aCcpO1xuXG4vLyBTVkcgYXR0cmlidXRlcyAod2l0aG91dCBcImlkXCIgYW5kIFwibmFtZVwiIGF0dHJpYnV0ZXMpXG4vLyBodHRwczovL3dpa2kud2hhdHdnLm9yZy93aWtpL1Nhbml0aXphdGlvbl9ydWxlcyNzdmdfQXR0cmlidXRlc1xudmFyIHN2Z0F0dHJzID0gbWFrZU1hcCgnYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFscGhhYmV0aWMsYXJhYmljLWZvcm0sYXNjZW50LCcgK1xuICAgICdhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGNvbG9yLCcgK1xuICAgICdjb2xvci1yZW5kZXJpbmcsY29udGVudCxjeCxjeSxkLGR4LGR5LGRlc2NlbnQsZGlzcGxheSxkdXIsZW5kLGZpbGwsZmlsbC1ydWxlLGZvbnQtZmFtaWx5LCcgK1xuICAgICdmb250LXNpemUsZm9udC1zdHJldGNoLGZvbnQtc3R5bGUsZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZyb20sZngsZnksZzEsZzIsZ2x5cGgtbmFtZSwnICtcbiAgICAnZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxob3Jpei1hZHYteCxob3Jpei1vcmlnaW4teCxpZGVvZ3JhcGhpYyxrLGtleVBvaW50cywnICtcbiAgICAna2V5U3BsaW5lcyxrZXlUaW1lcyxsYW5nLG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLCcgK1xuICAgICdtYXJrZXJXaWR0aCxtYXRoZW1hdGljYWwsbWF4LG1pbixvZmZzZXQsb3BhY2l0eSxvcmllbnQsb3JpZ2luLG92ZXJsaW5lLXBvc2l0aW9uLCcgK1xuICAgICdvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGF0aCxwYXRoTGVuZ3RoLHBvaW50cyxwcmVzZXJ2ZUFzcGVjdFJhdGlvLHIscmVmWCxyZWZZLCcgK1xuICAgICdyZXBlYXRDb3VudCxyZXBlYXREdXIscmVxdWlyZWRFeHRlbnNpb25zLHJlcXVpcmVkRmVhdHVyZXMscmVzdGFydCxyb3RhdGUscngscnksc2xvcGUsc3RlbWgsJyArXG4gICAgJ3N0ZW12LHN0b3AtY29sb3Isc3RvcC1vcGFjaXR5LHN0cmlrZXRocm91Z2gtcG9zaXRpb24sc3RyaWtldGhyb3VnaC10aGlja25lc3Msc3Ryb2tlLCcgK1xuICAgICdzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixzdHJva2UtbWl0ZXJsaW1pdCwnICtcbiAgICAnc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN5c3RlbUxhbmd1YWdlLHRhcmdldCx0ZXh0LWFuY2hvcix0byx0cmFuc2Zvcm0sdHlwZSx1MSx1MiwnICtcbiAgICAndW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLXJhbmdlLHVuaXRzLXBlci1lbSx2YWx1ZXMsdmVyc2lvbiwnICtcbiAgICAndmlld0JveCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx4LHgtaGVpZ2h0LHgxLHgyLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpyb2xlLCcgK1xuICAgICd4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcseG1sOnNwYWNlLHhtbG5zLHhtbG5zOnhsaW5rLHkseTEseTIsJyArXG4gICAgJ3pvb21BbmRQYW4nKTtcblxudmFyIHZhbGlkQXR0cnMgPSBhbmd1bGFyLmV4dGVuZCh7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpQXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN2Z0F0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sQXR0cnMpO1xuXG5mdW5jdGlvbiBtYWtlTWFwKHN0cikge1xuICB2YXIgb2JqID0ge30sIGl0ZW1zID0gc3RyLnNwbGl0KCcsJyksIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XG4gIHJldHVybiBvYmo7XG59XG5cblxuLyoqXG4gKiBAZXhhbXBsZVxuICogaHRtbFBhcnNlcihodG1sU3RyaW5nLCB7XG4gKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7fSxcbiAqICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge30sXG4gKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XG4gKiB9KTtcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBzdHJpbmdcbiAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIGh0bWxQYXJzZXIoaHRtbCwgaGFuZGxlcikge1xuICBpZiAodHlwZW9mIGh0bWwgIT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKGh0bWwgPT09IG51bGwgfHwgdHlwZW9mIGh0bWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBodG1sID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh0bWwgPSAnJyArIGh0bWw7XG4gICAgfVxuICB9XG4gIHZhciBpbmRleCwgY2hhcnMsIG1hdGNoLCBzdGFjayA9IFtdLCBsYXN0ID0gaHRtbCwgdGV4dDtcbiAgc3RhY2subGFzdCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07IH07XG5cbiAgd2hpbGUgKGh0bWwpIHtcbiAgICB0ZXh0ID0gJyc7XG4gICAgY2hhcnMgPSB0cnVlO1xuXG4gICAgLy8gTWFrZSBzdXJlIHdlJ3JlIG5vdCBpbiBhIHNjcmlwdCBvciBzdHlsZSBlbGVtZW50XG4gICAgaWYgKCFzdGFjay5sYXN0KCkgfHwgIXNwZWNpYWxFbGVtZW50c1tzdGFjay5sYXN0KCldKSB7XG5cbiAgICAgIC8vIENvbW1lbnRcbiAgICAgIGlmIChodG1sLmluZGV4T2YoXCI8IS0tXCIpID09PSAwKSB7XG4gICAgICAgIC8vIGNvbW1lbnRzIGNvbnRhaW5pbmcgLS0gYXJlIG5vdCBhbGxvd2VkIHVubGVzcyB0aGV5IHRlcm1pbmF0ZSB0aGUgY29tbWVudFxuICAgICAgICBpbmRleCA9IGh0bWwuaW5kZXhPZihcIi0tXCIsIDQpO1xuXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGh0bWwubGFzdEluZGV4T2YoXCItLT5cIiwgaW5kZXgpID09PSBpbmRleCkge1xuICAgICAgICAgIGlmIChoYW5kbGVyLmNvbW1lbnQpIGhhbmRsZXIuY29tbWVudChodG1sLnN1YnN0cmluZyg0LCBpbmRleCkpO1xuICAgICAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhpbmRleCArIDMpO1xuICAgICAgICAgIGNoYXJzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIC8vIERPQ1RZUEVcbiAgICAgIH0gZWxzZSBpZiAoRE9DVFlQRV9SRUdFWFAudGVzdChodG1sKSkge1xuICAgICAgICBtYXRjaCA9IGh0bWwubWF0Y2goRE9DVFlQRV9SRUdFWFApO1xuXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UobWF0Y2hbMF0sICcnKTtcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAvLyBlbmQgdGFnXG4gICAgICB9IGVsc2UgaWYgKEJFR0lOR19FTkRfVEFHRV9SRUdFWFAudGVzdChodG1sKSkge1xuICAgICAgICBtYXRjaCA9IGh0bWwubWF0Y2goRU5EX1RBR19SRUdFWFApO1xuXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2UoRU5EX1RBR19SRUdFWFAsIHBhcnNlRW5kVGFnKTtcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgIC8vIHN0YXJ0IHRhZ1xuICAgICAgfSBlbHNlIGlmIChCRUdJTl9UQUdfUkVHRVhQLnRlc3QoaHRtbCkpIHtcbiAgICAgICAgbWF0Y2ggPSBodG1sLm1hdGNoKFNUQVJUX1RBR19SRUdFWFApO1xuXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIC8vIFdlIG9ubHkgaGF2ZSBhIHZhbGlkIHN0YXJ0LXRhZyBpZiB0aGVyZSBpcyBhICc+Jy5cbiAgICAgICAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgbWF0Y2hbMF0ucmVwbGFjZShTVEFSVF9UQUdfUkVHRVhQLCBwYXJzZVN0YXJ0VGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhcnMgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBubyBlbmRpbmcgdGFnIGZvdW5kIC0tLSB0aGlzIHBpZWNlIHNob3VsZCBiZSBlbmNvZGVkIGFzIGFuIGVudGl0eS5cbiAgICAgICAgICB0ZXh0ICs9ICc8JztcbiAgICAgICAgICBodG1sID0gaHRtbC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXJzKSB7XG4gICAgICAgIGluZGV4ID0gaHRtbC5pbmRleE9mKFwiPFwiKTtcblxuICAgICAgICB0ZXh0ICs9IGluZGV4IDwgMCA/IGh0bWwgOiBodG1sLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgIGh0bWwgPSBpbmRleCA8IDAgPyBcIlwiIDogaHRtbC5zdWJzdHJpbmcoaW5kZXgpO1xuXG4gICAgICAgIGlmIChoYW5kbGVyLmNoYXJzKSBoYW5kbGVyLmNoYXJzKGRlY29kZUVudGl0aWVzKHRleHQpKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB2ZXJzaW9ucyA5IGFuZCAxMCBkbyBub3QgdW5kZXJzdGFuZCB0aGUgcmVnZXggJ1teXScsIHNvIHVzaW5nIGEgd29ya2Fyb3VuZCB3aXRoIFtcXFdcXHddLlxuICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZShuZXcgUmVnRXhwKFwiKFtcXFxcV1xcXFx3XSopPFxcXFxzKlxcXFwvXFxcXHMqXCIgKyBzdGFjay5sYXN0KCkgKyBcIltePl0qPlwiLCAnaScpLFxuICAgICAgICBmdW5jdGlvbihhbGwsIHRleHQpIHtcbiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKENPTU1FTlRfUkVHRVhQLCBcIiQxXCIpLnJlcGxhY2UoQ0RBVEFfUkVHRVhQLCBcIiQxXCIpO1xuXG4gICAgICAgICAgaWYgKGhhbmRsZXIuY2hhcnMpIGhhbmRsZXIuY2hhcnMoZGVjb2RlRW50aXRpZXModGV4dCkpO1xuXG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9KTtcblxuICAgICAgcGFyc2VFbmRUYWcoXCJcIiwgc3RhY2subGFzdCgpKTtcbiAgICB9XG5cbiAgICBpZiAoaHRtbCA9PSBsYXN0KSB7XG4gICAgICB0aHJvdyAkc2FuaXRpemVNaW5FcnIoJ2JhZHBhcnNlJywgXCJUaGUgc2FuaXRpemVyIHdhcyB1bmFibGUgdG8gcGFyc2UgdGhlIGZvbGxvd2luZyBibG9jayBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvZiBodG1sOiB7MH1cIiwgaHRtbCk7XG4gICAgfVxuICAgIGxhc3QgPSBodG1sO1xuICB9XG5cbiAgLy8gQ2xlYW4gdXAgYW55IHJlbWFpbmluZyB0YWdzXG4gIHBhcnNlRW5kVGFnKCk7XG5cbiAgZnVuY3Rpb24gcGFyc2VTdGFydFRhZyh0YWcsIHRhZ05hbWUsIHJlc3QsIHVuYXJ5KSB7XG4gICAgdGFnTmFtZSA9IGFuZ3VsYXIubG93ZXJjYXNlKHRhZ05hbWUpO1xuICAgIGlmIChibG9ja0VsZW1lbnRzW3RhZ05hbWVdKSB7XG4gICAgICB3aGlsZSAoc3RhY2subGFzdCgpICYmIGlubGluZUVsZW1lbnRzW3N0YWNrLmxhc3QoKV0pIHtcbiAgICAgICAgcGFyc2VFbmRUYWcoXCJcIiwgc3RhY2subGFzdCgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9uYWxFbmRUYWdFbGVtZW50c1t0YWdOYW1lXSAmJiBzdGFjay5sYXN0KCkgPT0gdGFnTmFtZSkge1xuICAgICAgcGFyc2VFbmRUYWcoXCJcIiwgdGFnTmFtZSk7XG4gICAgfVxuXG4gICAgdW5hcnkgPSB2b2lkRWxlbWVudHNbdGFnTmFtZV0gfHwgISF1bmFyeTtcblxuICAgIGlmICghdW5hcnkpXG4gICAgICBzdGFjay5wdXNoKHRhZ05hbWUpO1xuXG4gICAgdmFyIGF0dHJzID0ge307XG5cbiAgICByZXN0LnJlcGxhY2UoQVRUUl9SRUdFWFAsXG4gICAgICBmdW5jdGlvbihtYXRjaCwgbmFtZSwgZG91YmxlUXVvdGVkVmFsdWUsIHNpbmdsZVF1b3RlZFZhbHVlLCB1bnF1b3RlZFZhbHVlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGRvdWJsZVF1b3RlZFZhbHVlXG4gICAgICAgICAgfHwgc2luZ2xlUXVvdGVkVmFsdWVcbiAgICAgICAgICB8fCB1bnF1b3RlZFZhbHVlXG4gICAgICAgICAgfHwgJyc7XG5cbiAgICAgICAgYXR0cnNbbmFtZV0gPSBkZWNvZGVFbnRpdGllcyh2YWx1ZSk7XG4gICAgfSk7XG4gICAgaWYgKGhhbmRsZXIuc3RhcnQpIGhhbmRsZXIuc3RhcnQodGFnTmFtZSwgYXR0cnMsIHVuYXJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlRW5kVGFnKHRhZywgdGFnTmFtZSkge1xuICAgIHZhciBwb3MgPSAwLCBpO1xuICAgIHRhZ05hbWUgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWdOYW1lKTtcbiAgICBpZiAodGFnTmFtZSlcbiAgICAgIC8vIEZpbmQgdGhlIGNsb3Nlc3Qgb3BlbmVkIHRhZyBvZiB0aGUgc2FtZSB0eXBlXG4gICAgICBmb3IgKHBvcyA9IHN0YWNrLmxlbmd0aCAtIDE7IHBvcyA+PSAwOyBwb3MtLSlcbiAgICAgICAgaWYgKHN0YWNrW3Bvc10gPT0gdGFnTmFtZSlcbiAgICAgICAgICBicmVhaztcblxuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgLy8gQ2xvc2UgYWxsIHRoZSBvcGVuIGVsZW1lbnRzLCB1cCB0aGUgc3RhY2tcbiAgICAgIGZvciAoaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gcG9zOyBpLS0pXG4gICAgICAgIGlmIChoYW5kbGVyLmVuZCkgaGFuZGxlci5lbmQoc3RhY2tbaV0pO1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIG9wZW4gZWxlbWVudHMgZnJvbSB0aGUgc3RhY2tcbiAgICAgIHN0YWNrLmxlbmd0aCA9IHBvcztcbiAgICB9XG4gIH1cbn1cblxudmFyIGhpZGRlblByZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuLyoqXG4gKiBkZWNvZGVzIGFsbCBlbnRpdGllcyBpbnRvIHJlZ3VsYXIgc3RyaW5nXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHdpdGggZGVjb2RlZCBlbnRpdGllcy5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlRW50aXRpZXModmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkgeyByZXR1cm4gJyc7IH1cblxuICBoaWRkZW5QcmUuaW5uZXJIVE1MID0gdmFsdWUucmVwbGFjZSgvPC9nLFwiJmx0O1wiKTtcbiAgLy8gaW5uZXJUZXh0IGRlcGVuZHMgb24gc3R5bGluZyBhcyBpdCBkb2Vzbid0IGRpc3BsYXkgaGlkZGVuIGVsZW1lbnRzLlxuICAvLyBUaGVyZWZvcmUsIGl0J3MgYmV0dGVyIHRvIHVzZSB0ZXh0Q29udGVudCBub3QgdG8gY2F1c2UgdW5uZWNlc3NhcnkgcmVmbG93cy5cbiAgcmV0dXJuIGhpZGRlblByZS50ZXh0Q29udGVudDtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGFsbCBwb3RlbnRpYWxseSBkYW5nZXJvdXMgY2hhcmFjdGVycywgc28gdGhhdCB0aGVcbiAqIHJlc3VsdGluZyBzdHJpbmcgY2FuIGJlIHNhZmVseSBpbnNlcnRlZCBpbnRvIGF0dHJpYnV0ZSBvclxuICogZWxlbWVudCB0ZXh0LlxuICogQHBhcmFtIHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBlc2NhcGVkIHRleHRcbiAqL1xuZnVuY3Rpb24gZW5jb2RlRW50aXRpZXModmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLlxuICAgIHJlcGxhY2UoLyYvZywgJyZhbXA7JykuXG4gICAgcmVwbGFjZShTVVJST0dBVEVfUEFJUl9SRUdFWFAsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgaGkgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgICAgdmFyIGxvdyA9IHZhbHVlLmNoYXJDb2RlQXQoMSk7XG4gICAgICByZXR1cm4gJyYjJyArICgoKGhpIC0gMHhEODAwKSAqIDB4NDAwKSArIChsb3cgLSAweERDMDApICsgMHgxMDAwMCkgKyAnOyc7XG4gICAgfSkuXG4gICAgcmVwbGFjZShOT05fQUxQSEFOVU1FUklDX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiAnJiMnICsgdmFsdWUuY2hhckNvZGVBdCgwKSArICc7JztcbiAgICB9KS5cbiAgICByZXBsYWNlKC88L2csICcmbHQ7JykuXG4gICAgcmVwbGFjZSgvPi9nLCAnJmd0OycpO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBhbiBIVE1ML1hNTCB3cml0ZXIgd2hpY2ggd3JpdGVzIHRvIGJ1ZmZlclxuICogQHBhcmFtIHtBcnJheX0gYnVmIHVzZSBidWYuamFpbignJykgdG8gZ2V0IG91dCBzYW5pdGl6ZWQgaHRtbCBzdHJpbmdcbiAqIEByZXR1cm5zIHtvYmplY3R9IGluIHRoZSBmb3JtIG9mIHtcbiAqICAgICBzdGFydDogZnVuY3Rpb24odGFnLCBhdHRycywgdW5hcnkpIHt9LFxuICogICAgIGVuZDogZnVuY3Rpb24odGFnKSB7fSxcbiAqICAgICBjaGFyczogZnVuY3Rpb24odGV4dCkge30sXG4gKiAgICAgY29tbWVudDogZnVuY3Rpb24odGV4dCkge31cbiAqIH1cbiAqL1xuZnVuY3Rpb24gaHRtbFNhbml0aXplV3JpdGVyKGJ1ZiwgdXJpVmFsaWRhdG9yKSB7XG4gIHZhciBpZ25vcmUgPSBmYWxzZTtcbiAgdmFyIG91dCA9IGFuZ3VsYXIuYmluZChidWYsIGJ1Zi5wdXNoKTtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogZnVuY3Rpb24odGFnLCBhdHRycywgdW5hcnkpIHtcbiAgICAgIHRhZyA9IGFuZ3VsYXIubG93ZXJjYXNlKHRhZyk7XG4gICAgICBpZiAoIWlnbm9yZSAmJiBzcGVjaWFsRWxlbWVudHNbdGFnXSkge1xuICAgICAgICBpZ25vcmUgPSB0YWc7XG4gICAgICB9XG4gICAgICBpZiAoIWlnbm9yZSAmJiB2YWxpZEVsZW1lbnRzW3RhZ10gPT09IHRydWUpIHtcbiAgICAgICAgb3V0KCc8Jyk7XG4gICAgICAgIG91dCh0YWcpO1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goYXR0cnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICB2YXIgbGtleT1hbmd1bGFyLmxvd2VyY2FzZShrZXkpO1xuICAgICAgICAgIHZhciBpc0ltYWdlID0gKHRhZyA9PT0gJ2ltZycgJiYgbGtleSA9PT0gJ3NyYycpIHx8IChsa2V5ID09PSAnYmFja2dyb3VuZCcpO1xuICAgICAgICAgIGlmICh2YWxpZEF0dHJzW2xrZXldID09PSB0cnVlICYmXG4gICAgICAgICAgICAodXJpQXR0cnNbbGtleV0gIT09IHRydWUgfHwgdXJpVmFsaWRhdG9yKHZhbHVlLCBpc0ltYWdlKSkpIHtcbiAgICAgICAgICAgIG91dCgnICcpO1xuICAgICAgICAgICAgb3V0KGtleSk7XG4gICAgICAgICAgICBvdXQoJz1cIicpO1xuICAgICAgICAgICAgb3V0KGVuY29kZUVudGl0aWVzKHZhbHVlKSk7XG4gICAgICAgICAgICBvdXQoJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb3V0KHVuYXJ5ID8gJy8+JyA6ICc+Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge1xuICAgICAgICB0YWcgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWcpO1xuICAgICAgICBpZiAoIWlnbm9yZSAmJiB2YWxpZEVsZW1lbnRzW3RhZ10gPT09IHRydWUpIHtcbiAgICAgICAgICBvdXQoJzwvJyk7XG4gICAgICAgICAgb3V0KHRhZyk7XG4gICAgICAgICAgb3V0KCc+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PSBpZ25vcmUpIHtcbiAgICAgICAgICBpZ25vcmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICBjaGFyczogZnVuY3Rpb24oY2hhcnMpIHtcbiAgICAgICAgaWYgKCFpZ25vcmUpIHtcbiAgICAgICAgICBvdXQoZW5jb2RlRW50aXRpZXMoY2hhcnMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9O1xufVxuXG5cbi8vIGRlZmluZSBuZ1Nhbml0aXplIG1vZHVsZSBhbmQgcmVnaXN0ZXIgJHNhbml0aXplIHNlcnZpY2VcbmFuZ3VsYXIubW9kdWxlKCduZ1Nhbml0aXplJywgW10pLnByb3ZpZGVyKCckc2FuaXRpemUnLCAkU2FuaXRpemVQcm92aWRlcik7XG5cbi8qIGdsb2JhbCBzYW5pdGl6ZVRleHQ6IGZhbHNlICovXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgbGlua3lcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBGaW5kcyBsaW5rcyBpbiB0ZXh0IGlucHV0IGFuZCB0dXJucyB0aGVtIGludG8gaHRtbCBsaW5rcy4gU3VwcG9ydHMgaHR0cC9odHRwcy9mdHAvbWFpbHRvIGFuZFxuICogcGxhaW4gZW1haWwgYWRkcmVzcyBsaW5rcy5cbiAqXG4gKiBSZXF1aXJlcyB0aGUge0BsaW5rIG5nU2FuaXRpemUgYG5nU2FuaXRpemVgfSBtb2R1bGUgdG8gYmUgaW5zdGFsbGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IElucHV0IHRleHQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0IFdpbmRvdyAoX2JsYW5rfF9zZWxmfF9wYXJlbnR8X3RvcCkgb3IgbmFtZWQgZnJhbWUgdG8gb3BlbiBsaW5rcyBpbi5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEh0bWwtbGlua2lmaWVkIHRleHQuXG4gKlxuICogQHVzYWdlXG4gICA8c3BhbiBuZy1iaW5kLWh0bWw9XCJsaW5reV9leHByZXNzaW9uIHwgbGlua3lcIj48L3NwYW4+XG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImxpbmt5RXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaW5reUV4YW1wbGUnLCBbJ25nU2FuaXRpemUnXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldCA9XG4gICAgICAgICAgICAgICAnUHJldHR5IHRleHQgd2l0aCBzb21lIGxpbmtzOlxcbicrXG4gICAgICAgICAgICAgICAnaHR0cDovL2FuZ3VsYXJqcy5vcmcvLFxcbicrXG4gICAgICAgICAgICAgICAnbWFpbHRvOnVzQHNvbWV3aGVyZS5vcmcsXFxuJytcbiAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsXFxuJytcbiAgICAgICAgICAgICAgICdhbmQgb25lIG1vcmU6IGZ0cDovLzEyNy4wLjAuMS8uJztcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldFdpdGhUYXJnZXQgPSAnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgU25pcHBldDogPHRleHRhcmVhIG5nLW1vZGVsPVwic25pcHBldFwiIGNvbHM9XCI2MFwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgICA8dGFibGU+XG4gICAgICAgICA8dHI+XG4gICAgICAgICAgIDx0ZD5GaWx0ZXI8L3RkPlxuICAgICAgICAgICA8dGQ+U291cmNlPC90ZD5cbiAgICAgICAgICAgPHRkPlJlbmRlcmVkPC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJsaW5reS1maWx0ZXJcIj5cbiAgICAgICAgICAgPHRkPmxpbmt5IGZpbHRlcjwvdGQ+XG4gICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICA8cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwic25pcHBldCB8IGxpbmt5XCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPlxuICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgPGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0IHwgbGlua3lcIj48L2Rpdj5cbiAgICAgICAgICAgPC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJsaW5reS10YXJnZXRcIj5cbiAgICAgICAgICA8dGQ+bGlua3kgdGFyZ2V0PC90ZD5cbiAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICA8cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwic25pcHBldFdpdGhUYXJnZXQgfCBsaW5reTonX2JsYW5rJ1wiJmd0Ozxicj4mbHQ7L2RpdiZndDs8L3ByZT5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgIDxkaXYgbmctYmluZC1odG1sPVwic25pcHBldFdpdGhUYXJnZXQgfCBsaW5reTonX2JsYW5rJ1wiPjwvZGl2PlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwiZXNjYXBlZC1odG1sXCI+XG4gICAgICAgICAgIDx0ZD5ubyBmaWx0ZXI8L3RkPlxuICAgICAgICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBsaW5raWZ5IHRoZSBzbmlwcGV0IHdpdGggdXJscycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWZpbHRlcicpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQgfCBsaW5reScpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgIHRvQmUoJ1ByZXR0eSB0ZXh0IHdpdGggc29tZSBsaW5rczogaHR0cDovL2FuZ3VsYXJqcy5vcmcvLCB1c0Bzb21ld2hlcmUub3JnLCAnICtcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNsaW5reS1maWx0ZXIgYScpKS5jb3VudCgpKS50b0VxdWFsKDQpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBub3QgbGlua2lmeSBzbmlwcGV0IHdpdGhvdXQgdGhlIGxpbmt5IGZpbHRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2VzY2FwZWQtaHRtbCcpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQnKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgICB0b0JlKCdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6IGh0dHA6Ly9hbmd1bGFyanMub3JnLywgbWFpbHRvOnVzQHNvbWV3aGVyZS5vcmcsICcgK1xuICAgICAgICAgICAgICAgICAgJ2Fub3RoZXJAc29tZXdoZXJlLm9yZywgYW5kIG9uZSBtb3JlOiBmdHA6Ly8xMjcuMC4wLjEvLicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQuYWxsKGJ5LmNzcygnI2VzY2FwZWQtaHRtbCBhJykpLmNvdW50KCkpLnRvRXF1YWwoMCk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc25pcHBldCcpKS5jbGVhcigpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc25pcHBldCcpKS5zZW5kS2V5cygnbmV3IGh0dHA6Ly9saW5rLicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWZpbHRlcicpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQgfCBsaW5reScpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgIHRvQmUoJ25ldyBodHRwOi8vbGluay4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNsaW5reS1maWx0ZXIgYScpKS5jb3VudCgpKS50b0VxdWFsKDEpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2VzY2FwZWQtaHRtbCcpKS5lbGVtZW50KGJ5LmJpbmRpbmcoJ3NuaXBwZXQnKSkuZ2V0VGV4dCgpKVxuICAgICAgICAgICAgIC50b0JlKCduZXcgaHR0cDovL2xpbmsuJyk7XG4gICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHdvcmsgd2l0aCB0aGUgdGFyZ2V0IHByb3BlcnR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS10YXJnZXQnKSkuXG4gICAgICAgICAgICBlbGVtZW50KGJ5LmJpbmRpbmcoXCJzbmlwcGV0V2l0aFRhcmdldCB8IGxpbmt5OidfYmxhbmsnXCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9CZSgnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2xpbmt5LXRhcmdldCBhJykpLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykpLnRvRXF1YWwoJ19ibGFuaycpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ1Nhbml0aXplJykuZmlsdGVyKCdsaW5reScsIFsnJHNhbml0aXplJywgZnVuY3Rpb24oJHNhbml0aXplKSB7XG4gIHZhciBMSU5LWV9VUkxfUkVHRVhQID1cbiAgICAgICAgLygoZnRwfGh0dHBzPyk6XFwvXFwvfCh3d3dcXC4pfChtYWlsdG86KT9bQS1aYS16MC05Ll8lKy1dK0ApXFxTKlteXFxzLjssKCl7fTw+XCLigJ3igJldL2ksXG4gICAgICBNQUlMVE9fUkVHRVhQID0gL15tYWlsdG86L2k7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHRleHQsIHRhcmdldCkge1xuICAgIGlmICghdGV4dCkgcmV0dXJuIHRleHQ7XG4gICAgdmFyIG1hdGNoO1xuICAgIHZhciByYXcgPSB0ZXh0O1xuICAgIHZhciBodG1sID0gW107XG4gICAgdmFyIHVybDtcbiAgICB2YXIgaTtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmF3Lm1hdGNoKExJTktZX1VSTF9SRUdFWFApKSkge1xuICAgICAgLy8gV2UgY2FuIG5vdCBlbmQgaW4gdGhlc2UgYXMgdGhleSBhcmUgc29tZXRpbWVzIGZvdW5kIGF0IHRoZSBlbmQgb2YgdGhlIHNlbnRlbmNlXG4gICAgICB1cmwgPSBtYXRjaFswXTtcbiAgICAgIC8vIGlmIHdlIGRpZCBub3QgbWF0Y2ggZnRwL2h0dHAvd3d3L21haWx0byB0aGVuIGFzc3VtZSBtYWlsdG9cbiAgICAgIGlmICghbWF0Y2hbMl0gJiYgIW1hdGNoWzRdKSB7XG4gICAgICAgIHVybCA9IChtYXRjaFszXSA/ICdodHRwOi8vJyA6ICdtYWlsdG86JykgKyB1cmw7XG4gICAgICB9XG4gICAgICBpID0gbWF0Y2guaW5kZXg7XG4gICAgICBhZGRUZXh0KHJhdy5zdWJzdHIoMCwgaSkpO1xuICAgICAgYWRkTGluayh1cmwsIG1hdGNoWzBdLnJlcGxhY2UoTUFJTFRPX1JFR0VYUCwgJycpKTtcbiAgICAgIHJhdyA9IHJhdy5zdWJzdHJpbmcoaSArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZFRleHQocmF3KTtcbiAgICByZXR1cm4gJHNhbml0aXplKGh0bWwuam9pbignJykpO1xuXG4gICAgZnVuY3Rpb24gYWRkVGV4dCh0ZXh0KSB7XG4gICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaHRtbC5wdXNoKHNhbml0aXplVGV4dCh0ZXh0KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTGluayh1cmwsIHRleHQpIHtcbiAgICAgIGh0bWwucHVzaCgnPGEgJyk7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGFyZ2V0KSkge1xuICAgICAgICBodG1sLnB1c2goJ3RhcmdldD1cIicsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAnXCIgJyk7XG4gICAgICB9XG4gICAgICBodG1sLnB1c2goJ2hyZWY9XCInLFxuICAgICAgICAgICAgICAgIHVybC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JyksXG4gICAgICAgICAgICAgICAgJ1wiPicpO1xuICAgICAgYWRkVGV4dCh0ZXh0KTtcbiAgICAgIGh0bWwucHVzaCgnPC9hPicpO1xuICAgIH1cbiAgfTtcbn1dKTtcblxuXG59KSh3aW5kb3csIHdpbmRvdy5hbmd1bGFyKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS1idXR0b25zJywgWydjaGF5a2EtdXRpbHMnXSlcbiAgICAucHJvdmlkZXIoJ2J1dHRvbnMnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgc3RkQnV0dG9uQ2xhc3MgPSAnJztcblxuICAgICAgICAvL3ZhciBidXR0b25zID0ge1xuICAgICAgICAvL1xuICAgICAgICAvL307XG5cbiAgICAgICAgLy9hbmd1bGFyLmV4dGVuZCh0aGlzLCBidXR0b25zKTtcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGJ1dHRvbiBjbGFzc1xuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRCdXR0b25DbGFzczogZnVuY3Rpb24oY2xzKXtcbiAgICAgICAgICAgICAgICBzdGRCdXR0b25DbGFzcyA9IGNscztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IGJ1dHRvbiBjbGFzc1xuICAgICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRCdXR0b25DbGFzczogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RkQnV0dG9uQ2xhc3M7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAkZ2V0OiBbJ3V0aWxzJywgZnVuY3Rpb24odXRpbHMpe1xuXG4gICAgICAgICAgICAgICAgdXRpbHMuZW5zdXJlKCdDaGF5a2EuQnV0dG9ucycsYnV0dG9ucyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9ucztcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XG4gICAgfSlcbjtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLW5scycsIFsnY2hheWthLXV0aWxzJ10pXG4gICAgLnByb3ZpZGVyKCdubHMnLCBmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciBjdXJyZW50TG9jYWxlID0gJ2VuLVVTJztcblxuICAgICAgICB2YXIgZGljdGlvbmFyaWVzID0ge307XG5cbiAgICAgICAgdmFyIG5scyA9IHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgY3VycmVudCBsb2NhbGUgKGUuZy4gJ2VuLVVTJylcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldExvY2FsZTogZnVuY3Rpb24obG9jYWxlKXtcbiAgICAgICAgICAgICAgICBjdXJyZW50TG9jYWxlID0gbG9jYWxlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgY3VycmVudCBsb2NhbGVcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldExvY2FsZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudExvY2FsZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IHRyYW5zbGF0aW9ucyBmb3Igc3BlY2lmaWVkIGxvY2FsZVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7e319IHRyYW5zbGF0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybiB7e319XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldFRyYW5zbGF0aW9uczogZnVuY3Rpb24obG9jYWxlLCB0cmFuc2xhdGlvbnMpe1xuICAgICAgICAgICAgICAgIGRpY3Rpb25hcmllc1tsb2NhbGVdID0gZGljdGlvbmFyaWVzW2xvY2FsZV0gfHwge307XG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoZGljdGlvbmFyaWVzW2xvY2FsZV0sIHRyYW5zbGF0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyaWVzW2xvY2FsZV07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybnMgYXJyYXkgb2YgcmVnaXN0ZXJlZCBsb2NhbGVzXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFN1cHBvcnRlZExvY2FsZXM6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGRpY3Rpb25hcmllcyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCB0cmFuc2xhdGlvbiBmb3Igc3BlY2lmaWVkIHN0cmluZ1xuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbG9jYWxlXVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBfOiBmdW5jdGlvbihzdHIsIGxvY2FsZSl7XG4gICAgICAgICAgICAgICAgbG9jYWxlID0gbG9jYWxlIHx8IGN1cnJlbnRMb2NhbGUgfHwgJ2VuLVVTJztcbiAgICAgICAgICAgICAgICB2YXIgZGljdGlvbmFyeSA9IGRpY3Rpb25hcmllc1tsb2NhbGVdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0RGljdGlvbmFyeSA9IGRpY3Rpb25hcmllc1snZW4tVVMnXSB8fCB7fTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyeVtzdHJdIHx8IGRlZmF1bHREaWN0aW9uYXJ5W3N0cl0gfHwgc3RyO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJGdldDogWyd1dGlscycsIGZ1bmN0aW9uKHV0aWxzKXtcblxuICAgICAgICAgICAgICAgIHV0aWxzLmVuc3VyZSgnQ2hheWthLk5MUycsIG5scyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmxzO1xuICAgICAgICAgICAgfV1cblxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBubHM7XG4gICAgfSlcbiAgICAuZmlsdGVyKCdubHMnLCBbJ25scycsIGZ1bmN0aW9uKG5scyl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzdHIsIGxvY2FsZSl7XG4gICAgICAgICAgICByZXR1cm4gbmxzLl8oc3RyLCBsb2NhbGUpO1xuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5jb25maWcoWydubHNQcm92aWRlcicsIGZ1bmN0aW9uKG5sc1Byb3ZpZGVyKXtcbiAgICAgICAgdmFyIGxvY2FsZSA9IHdpbmRvdy5DaGF5a2EgJiYgd2luZG93LkNoYXlrYS5Db3JlICYmIHdpbmRvdy5DaGF5a2EuQ29yZS5sb2NhbGUgfHwgJ2VuLVVTJztcbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0TG9jYWxlKGxvY2FsZSk7XG4gICAgfV0pXG4gICAgOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS1zcGlubmVycycsIFsnY2hheWthLW5scycsICdjaGF5a2EtdXRpbHMnXSlcbiAgICAuZGlyZWN0aXZlKCdzcGlubmVyJywgW2Z1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgICBzcGlubmVyOiAnPScsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogJz0/JyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPT8nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImNoYXlrYS1zcGlubmVyXCIgZGF0YS1uZy1zaG93PVwidmlzaWJsZVwiIGRhdGEtbmctYmluZC1odG1sPVwibWVzc2FnZVwiPjwvZGl2PicsXG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvdyA9IGZ1bmN0aW9uKG1lc3NhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJHNjb3BlLm1lc3NhZ2UgfHwgJ0xvYWRpbmcuLi4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXIgPSAkc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnbXVsdGlTcGlubmVyJywgW2Z1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgICBzcGlubmVyOiAnPW11bHRpU3Bpbm5lcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY2hheWthLW11bHRpX3NwaW5uZXJcIiBkYXRhLW5nLXNob3c9XCJ0b3RhbFwiPjxkaXYgZGF0YS1uZy1yZXBlYXQ9XCIoaWQsIG1lc3NhZ2UpIGluIG1lc3NhZ2VzXCI+PGRpdiBkYXRhLXNwaW5uZXI9XCJzcGlubmVyc1tpZF1cIiBkYXRhLW1lc3NhZ2U9XCJtZXNzYWdlXCIgZGF0YS12aXNpYmxlPVwidHJ1ZVwiPjwvZGl2PjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICAvL3JlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgICAgIHZhciBjdHJsID0ge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXJzID0ge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0ge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsID0gMDtcblxuICAgICAgICAgICAgICAgIGN0cmwuc2hvdyA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGlkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gJ3NwaW5uZXJfJyskc2NvcGUudG90YWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5tZXNzYWdlc1tpZF0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzW2lkXSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWwrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQ7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGN0cmwuaGlkZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLm1lc3NhZ2VzW2lkXSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWwtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAkc2NvcGUubWVzc2FnZXNbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXJzW2lkXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc3Bpbm5lciA9IGN0cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnZ2VuZXJhbFNwaW5uZXInLCBbJ3V0aWxzJywgJ2dlbmVyYWxTcGlubmVyJywgZnVuY3Rpb24odXRpbHMpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJjaGF5a2EtZ2VuZXJhbF9zcGlubmVyXCI+PGRpdiBkYXRhLW11bHRpLXNwaW5uZXI9XCJzcGlubmVyXCI+PC9kaXY+PC9kaXY+JyxcbiAgICAgICAgICAgIC8vcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciAkID0gYW5ndWxhci5lbGVtZW50O1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdDaGF5a2EuU3Bpbm5lcnMuc2hvdycsIGZ1bmN0aW9uKGUsIG1lc3NhZ2UsIGlkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNwaW5uZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXIuc2hvdyhtZXNzYWdlLCBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdDaGF5a2EuU3Bpbm5lcnMuaGlkZScsIGZ1bmN0aW9uKGUsIGlkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNwaW5uZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXIuaGlkZShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5mYWN0b3J5KCdnZW5lcmFsU3Bpbm5lcicsIFsndXRpbHMnLCBmdW5jdGlvbih1dGlscyl7XG4gICAgICAgIHZhciAkID0gYW5ndWxhci5lbGVtZW50O1xuXG4gICAgICAgIHJldHVybiB1dGlscy5lbnN1cmUoJ0NoYXlrYS5TcGlubmVycycsIHtcbiAgICAgICAgICAgIHNob3c6ICBmdW5jdGlvbihtZXNzYWdlLCBpZCl7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignQ2hheWthLlNwaW5uZXJzLnNob3cnLCBbbWVzc2FnZSwgaWRdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbihpZCl7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignQ2hheWthLlNwaW5uZXJzLmhpZGUnLCBbaWRdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfV0pXG47IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLWFqYXgnLCBbJ2NoYXlrYS1tb2RhbHMnLCAnY2hheWthLXNwaW5uZXJzJ10pXG4gICAgLmZhY3RvcnkoJ2FqYXgnLCBbJyR3aW5kb3cnLCAnJGh0dHAnLCAnJHRpbWVvdXQnLCAnbW9kYWxzJywgJ2dlbmVyYWxTcGlubmVyJywgJ3V0aWxzJywgZnVuY3Rpb24oJHdpbmRvdywgJGh0dHAsICR0aW1lb3V0LCBtb2RhbHMsIGdlbmVyYWxTcGlubmVyLCB1dGlscyl7XG4gICAgICAgIHZhciAkID0gYW5ndWxhci5lbGVtZW50O1xuICAgICAgICB2YXIgQ2hheWthID0gJHdpbmRvdy5DaGF5a2EgfHwge307XG4gICAgICAgIHZhciBhamF4ID0gQ2hheWthLkFqYXggPSBDaGF5a2EuQWpheCB8fCB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVnaXN0ZXJlZCBlcnJvciBoYW5kbGVycyBmb3IgZGlmZmVyZW50IGVycm9yIGNvZGVzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVycm9ySGFuZGxlcnM6IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQWRkIGVycm9yIGhhbmRsZXIgZm9yIGVycm9yQ29kZS5cbiAgICAgICAgICAgICAqIEhhbmRsZXIgbWF5IGFjY2VwdCBmb2xsb3dpbmcgcGFyYW1zIChjb2RlLCBtZXNzYWdlLCBwYXlsb2FkKSxcbiAgICAgICAgICAgICAqIGFuZCBzaG91bGQgcmV0dXJuIHRydWUgaWYgZXJyb3Igc2hvdWxkIG5vdCBiZSBwcm9jZXNzZWQgd2l0aCBvdGhlciBoYW5kbGVycyxcbiAgICAgICAgICAgICAqIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgICB1bmlxdWUgaGFuZGxlciBpZFxuICAgICAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlciAgICBlcnJvciBoYW5kbGVyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JDb2RlICAgIGVycm9yIGNvZGUgdG8gcHJvY2VzcyB1c2luZyBoYW5kbGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFkZEVycm9ySGFuZGxlcjogZnVuY3Rpb24oaWQsIGhhbmRsZXIsIGVycm9yQ29kZSl7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gZXJyb3JDb2RlIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgYWpheC5lcnJvckhhbmRsZXJzW2lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NvZGUnOiBlcnJvckNvZGUsXG4gICAgICAgICAgICAgICAgICAgICdoYW5kbGVyJzogaGFuZGxlclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlbW92ZSBlcnJvciBoYW5kbGVyIGZvciBzcGVjaWZpZWQgaWRcbiAgICAgICAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZW1vdmVFcnJvckhhbmRsZXI6IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgICAgICBhamF4LmVycm9ySGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSGFuZGxlIGVycm9yIHdpdGggYWxsIHRoZSByZWdpc3RlcmVkIGVycm9yIGhhbmRsZXJzXG4gICAgICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgZXJyb3Igd2FzIHByb2Nlc3NlZCBhbmQgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0aGUgc3RhY2tcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gY29kZVxuICAgICAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgICAgICAgICAqIEBwYXJhbSBwYXlsb2FkXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uKGNvZGUsIG1lc3NhZ2UsIHBheWxvYWQpe1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlkIGluIGFqYXguZXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWpheC5lcnJvckhhbmRsZXJzLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZyA9IGFqYXguZXJyb3JIYW5kbGVyc1tpZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnICYmICghcmVnLmNvZGUgfHwgcmVnLmNvZGUgPT09IGNvZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzIHx8IHJlZy5oYW5kbGVyKGNvZGUsIG1lc3NhZ2UsIHBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSGFuZGxlIGFsbCB0aGUgZXJyb3JzIGZvdW5kIGluIHJlc3BvbnNlIGluY2x1ZGluZyBtYXNzX2Vycm9yc1xuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaGFuZGxlRXJyb3JzOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBpZighZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7J2VtcHR5X3Jlc3BvbnNlJzogJ0VtcHR5IHJlc3BvbnNlJ307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCdtYXNzX2Vycm9ycycgPT09IGRhdGEuY29kZSl7XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgY29kZSBpbiBkYXRhLm1lc3NhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5tZXNzYWdlLmhhc093blByb3BlcnR5KGNvZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFqYXguaGFuZGxlRXJyb3IoY29kZSwgZGF0YS5tZXNzYWdlW2NvZGVdLCBkYXRhLnBheWxvYWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLm1lc3NhZ2VbY29kZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGVycm9ycyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmKCFhamF4LmhhbmRsZUVycm9yKGRhdGEuY29kZSwgZGF0YS5tZXNzYWdlLCBkYXRhLnBheWxvYWQpKXtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzW2RhdGEuY29kZV0gPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFBhcnNlIGpzb24gaW4gY2FzZSBzb21lIGVtcHR5IG9yIGh0bWwgcmVzcG9uc2VcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gcmVzcG9uc2VcbiAgICAgICAgICAgICAqIEBwYXJhbSBkZWZhdWx0TWVzc2FnZVxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByb2Nlc3NSZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UsIGRlZmF1bHRNZXNzYWdlKXtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGRlZmF1bHRNZXNzYWdlIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gMTtcbiAgICAgICAgICAgICAgICBpZighYW5ndWxhci5pc1VuZGVmaW5lZChyZXNwb25zZS5wYXlsb2FkKSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZighcmVzcG9uc2UgfHwgYW5ndWxhci5pc1N0cmluZyhyZXNwb25zZSkgJiYgIXJlc3BvbnNlLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnRW1wdHkgcmVzcG9uc2UnO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGFuZ3VsYXIuaXNTdHJpbmcocmVzcG9uc2UpKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSByZXNwb25zZS5tYXRjaCgvPGJvZHlbXj5dKj4oW1xcc1xcU10qKTxcXC9ib2R5Pi9tKTtcbiAgICAgICAgICAgICAgICAgICAgbSA9IG0/bTpyZXNwb25zZS5tYXRjaCgvPGJyXFxzKlxcLz5cXHMqPGI+W148XSs8XFwvYj5cXDpcXHMqKC4qKTxiclxccypcXC8+L20pO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbT9tWzFdLnRyaW0oKTpkZWZhdWx0TWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtjb2RlOiBjb2RlLCBtZXNzYWdlOiBtZXNzYWdlLCBwYXlsb2FkOiBudWxsfTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNwaW5uZXJzVXNlZDogMCxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcmVwYXJlcyBhbGwgdGhlIGhhbmRsZXJzIHRvIHNob3cgYWxsIHRoZSBzcGlubmVycyBhbmQgZXJyb3JzXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgICAgICAgICAqIC0gc3Bpbm5lcjogcmVmZXJlbmNlIHRvIENoYXlrYS5TcGlubmVycy5zcGlubmVyIG9yIGZhbHNlIGlmIG5vIHNwaW5uZXJzIG5lZWRlZFxuICAgICAgICAgICAgICogLSBzcGlubmVySWQ6IGlkIGZvciBnZW5lcmFsU3Bpbm5lclxuICAgICAgICAgICAgICogLSBzcGlubmVyRmllbGRJZDogZmllbGQgaWQgZm9yIHNob3dpbmcgc3Bpbm5lciBpbiB0aGUgZm9ybSBmaWVsZCAodXNlcyBmb3JtVmFsaWRhdG9yKVxuICAgICAgICAgICAgICogLSBzcGlubmVyTWVzc2FnZTogbWVzc2FnZSB0byBzaG93IHdpdGggc3Bpbm5lclxuICAgICAgICAgICAgICogLSBlcnJvck1lc3NhZ2U6IGRlZmF1bHQgZXJyb3IgbWVzc2FnZSB0byBzaG93IGluIGNhc2Ugb2YgZXJyb3IuIFBhc3MgJ2ZhbHNlJyB0byBzdXBwcmVzcy5cbiAgICAgICAgICAgICAqIC0gc3VjY2Vzc01lc3NhZ2U6IGRlZmF1bHQgc3VjY2VzcyBtZXNzYWdlIHRvIHNob3cgaW4gY2FzZSBvZiBzdWNjZXNzLiBQYXNzICdmYWxzZScgdG8gc3VwcHJlc3MuXG4gICAgICAgICAgICAgKiAtIGZvcm1WYWxpZGF0b3I6IHJlZmVyZW5jZSB0byBDaGF5a2EuRm9ybXMuZm9ybVZhbGlkYXRvclxuICAgICAgICAgICAgICogLSB2YWxpZGF0ZU9uU2VuZDogc2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IGF1dG9tYXRpYyB2YWxpZGF0aW9uXG4gICAgICAgICAgICAgKiAtIHNjb3BlOiBzY29wZSB0byBjYWxsICRhcHBseSBpbiBjYWxsYmFja3NcbiAgICAgICAgICAgICAqIC0gc3VjY2VzczogZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpXG4gICAgICAgICAgICAgKiAtIGVycm9yOiBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZylcbiAgICAgICAgICAgICAqIC0gY29tcGxldGU6IGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcmVwYXJlOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIHZhciBzcGlubmVyID0gb3B0aW9ucy5zcGlubmVyOyAvL3x8IG51bGw7XG4gICAgICAgICAgICAgICAgaWYoIXNwaW5uZXIgJiYgc3Bpbm5lciAhPT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNwaW5uZXJJZCA9IG9wdGlvbnMuc3Bpbm5lcklkIHx8ICdzcGlubmVyJztcbiAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lckZpZWxkSWQgPSBvcHRpb25zLnNwaW5uZXJGaWVsZElkO1xuICAgICAgICAgICAgICAgIHZhciBzcGlubmVyTWVzc2FnZSA9IG9wdGlvbnMuc3Bpbm5lck1lc3NhZ2UgfHwgJ1Byb2Nlc3NpbmcuLi4nO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBvcHRpb25zLmVycm9yTWVzc2FnZSB8fCAnT3BlcmF0aW9uIGZhaWxlZCc7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gb3B0aW9ucy5zdWNjZXNzTWVzc2FnZTtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybVZhbGlkYXRvciA9IG9wdGlvbnMuZm9ybVZhbGlkYXRvcjtcbiAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdGVPblNlbmQgPSBhbmd1bGFyLmlzVW5kZWZpbmVkKG9wdGlvbnMudmFsaWRhdGVPblNlbmQpP3RydWU6b3B0aW9ucy52YWxpZGF0ZU9uU2VuZDtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcGUgPSBvcHRpb25zLnNjb3BlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlbmQgPSBvcHRpb25zLnNlbmQ7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGxldGUgPSBvcHRpb25zLmNvbXBsZXRlO1xuXG4gICAgICAgICAgICAgICAgc3Bpbm5lcklkID0gc3Bpbm5lcklkICsgYWpheC5zcGlubmVyc1VzZWQrKztcblxuICAgICAgICAgICAgICAgIHZhciBwcmVwYXJlZCA9IHt9O1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNlbmRlciwgZW5zdXJlcyBhbGwgdGhlIHNwaW5uZXIgaW5pdGlhbGl6YXRpb25zXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgc2VuZEhhbmRsZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmKGZvcm1WYWxpZGF0b3IgJiYgdmFsaWRhdGVPblNlbmQgJiYgISghc3Bpbm5lckZpZWxkSWQgJiYgZm9ybVZhbGlkYXRvci52YWxpZGF0ZUZpZWxkcygpIHx8IHNwaW5uZXJGaWVsZElkICYmIGZvcm1WYWxpZGF0b3IudmFsaWRhdGVGaWVsZEJ5SWQoc3Bpbm5lcklkKSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHNlbmQgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHNlbmQpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Bpbm5lciE9PWZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzcGlubmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5zaG93KHNwaW5uZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihzcGlubmVyRmllbGRJZCAmJiBmb3JtVmFsaWRhdG9yKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvci5zZXRGaWVsZFN0YXRlKHNwaW5uZXJGaWVsZElkLCAncHJvZ3Jlc3MnLCBzcGlubmVyTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYWxTcGlubmVyLnNob3coc3Bpbm5lck1lc3NhZ2UsIHNwaW5uZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvci5jbGVhck1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2NvcGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLnBhdGNoU2NvcGUoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZihzY29wZSAmJiAhc2NvcGUuJCRwaGFzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcHJlcGFyZWQuc2VuZCA9IHNlbmRIYW5kbGVyO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQ29tcGxldGUgaGFuZGxlciwgY2FsbGVkIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc3RhdHVzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29uZmlnXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlSGFuZGxlciA9IGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoc3Bpbm5lciE9PWZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNwaW5uZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc3Bpbm5lckZpZWxkSWQgJiYgZm9ybVZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvci5zZXRGaWVsZFN0YXRlKHNwaW5uZXJGaWVsZElkLCAnY2xlYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYWxTcGlubmVyLmhpZGUoc3Bpbm5lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihjb21wbGV0ZSAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oY29tcGxldGUpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwcmVwYXJlZC5jb21wbGV0ZSA9IGNvbXBsZXRlSGFuZGxlcjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEV4dGVuZGVkIGVycm9yIGhhbmRsZXIsIGNhbGxzIGNvbXBsZXRlIGJlZm9yZWhhbmRcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbmZpZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGFqYXgucHJvY2Vzc1Jlc3BvbnNlKGRhdGEsIGVycm9yTWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVIYW5kbGVyKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0gYWpheC5oYW5kbGVFcnJvcnMoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gZXJyb3JzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVycm9ycy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlcnJvcnNbaV0gfHwgZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKGZvcm1WYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Bpbm5lckZpZWxkSWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3Iuc2V0RmllbGRTdGF0ZShzcGlubmVyRmllbGRJZCwgJ2Vycm9yJywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvci5zaG93RXJyb3JzKGVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKG1lc3NhZ2UgIT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFscy5hbGVydChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNGdW5jdGlvbihlcnJvcikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHNjb3BlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLnBhdGNoU2NvcGUoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHByZXBhcmVkLmVycm9yID0gZXJyb3JIYW5kbGVyO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRXh0ZW5kZWQgc3VjY2VzcyBoYW5kbGVyLCBjYWxscyBjb21wbGV0ZSBiZWZvcmVoYW5kLCBhbmQgZXJyb3IgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb25maWdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGRhdGEgPSAkLmJyeC5BamF4LmRldGVjdEFyZ0RhdGEoYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGFqYXgucHJvY2Vzc1Jlc3BvbnNlKGRhdGEsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlSGFuZGxlcihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHN1Y2Nlc3NNZXNzYWdlID09PSBmYWxzZSA/IGZhbHNlIDogZGF0YS5tZXNzYWdlIHx8IHN1Y2Nlc3NNZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZm9ybVZhbGlkYXRvciAmJiBtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsaWRhdG9yLnNob3dNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3VjY2VzcyAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oc3VjY2Vzcykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHNjb3BlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLnBhdGNoU2NvcGUoc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHByZXBhcmVkLnN1Y2Nlc3MgPSBzdWNjZXNzSGFuZGxlcjtcblxuICAgICAgICAgICAgICAgIHJldHVybiBwcmVwYXJlZDtcblxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNYWluIHJlcXVlc3QgZnVuY3Rpb24uXG4gICAgICAgICAgICAgKiBAcGFyYW0gdXJsXG4gICAgICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBjYW4gY29udGFpbiBhbGwgdGhlICdwcmVwYXJlJyBvcHRpb25zIGFsb25nc2lkZSB3aXRoOlxuICAgICAgICAgICAgICogLSBkYXRhOiBkYXRhIGZvciBwb3N0LCBwdXQsIHBhdGNoXG4gICAgICAgICAgICAgKiAtIG1ldGhvZDogaHR0cCBtZXRob2QgKCdnZXQnLCAncG9zdCcsIGV0YylcbiAgICAgICAgICAgICAqIC0gY29uZmlnOiBjb25maWcgZm9yIGFuZ3VsYXIuJGh0dHBcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24odXJsLCBvcHRpb25zKXtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8ICdwb3N0JyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gb3B0aW9ucy5jb25maWcgfHwge307XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VuZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1ldGhvZCl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2dldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUodXJsLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5oZWFkKHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnanNvbnAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmpzb25wKHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncG9zdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCh1cmwsIGRhdGEsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3B1dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KHVybCwgZGF0YSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0Y2gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnBhdGNoKHVybCwgZGF0YSwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zZW5kID0gc2VuZDtcblxuICAgICAgICAgICAgICAgIHZhciBwcmVwYXJlZCA9IGFqYXgucHJlcGFyZShvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gcHJlcGFyZWQuc2VuZCgpO1xuXG4gICAgICAgICAgICAgICAgaWYocHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc3VjY2VzcyhwcmVwYXJlZC5zdWNjZXNzKS5lcnJvcihwcmVwYXJlZC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKHVybCwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdnZXQnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGRlbDogZnVuY3Rpb24odXJsLCBvcHRpb25zLCBjb25maWcpe1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ2RlbGV0ZSc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb25maWcgPSBjb25maWc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFqYXgucmVxdWVzdCh1cmwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaGVhZDogZnVuY3Rpb24odXJsLCBvcHRpb25zLCBjb25maWcpe1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ2hlYWQnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGpzb25wOiBmdW5jdGlvbih1cmwsIG9wdGlvbnMsIGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnanNvbnAnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uKHVybCwgZGF0YSwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdwb3N0JztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHB1dDogZnVuY3Rpb24odXJsLCBkYXRhLCBvcHRpb25zLCBjb25maWcpe1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ3B1dCc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwYXRjaDogZnVuY3Rpb24odXJsLCBkYXRhLCBvcHRpb25zLCBjb25maWcpe1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ3BhdGNoJztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gYWpheDtcbiAgICB9XSlcbiAgICAuZGlyZWN0aXZlKCdidXR0b25BamF4UmVxdWVzdCcsIFsnYWpheCcsICdtb2RhbHMnLCBmdW5jdGlvbihhamF4LCBtb2RhbHMpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICB1cmw6ICdAYnV0dG9uQWpheFJlcXVlc3QnLFxuICAgICAgICAgICAgICAgIHBvc3REYXRhOiAnPT9wb3N0JyxcbiAgICAgICAgICAgICAgICBjb25maXJtOiAnQD8nLFxuICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3I6ICc9P3ZhbGlkYXRvcidcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIHZhciBvblN1Y2Nlc3MgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5tZXNzYWdlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFscy5hbGVydChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgc2VuZFJlcXVlc3QgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogb25TdWNjZXNzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5mb3JtVmFsaWRhdG9yKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5mb3JtVmFsaWRhdG9yID0gJHNjb3BlLmZvcm1WYWxpZGF0b3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnBvc3REYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFqYXgucG9zdCgkc2NvcGUudXJsLCAkc2NvcGUucG9zdERhdGEsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgYWpheC5nZXQoJHNjb3BlLnVybCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC5jbGljayhmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuY29uZmlybSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuY29uZmlybSgkc2NvcGUuY29uZmlybSwgc2VuZFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSlcbjsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdjaGF5a2EtbW9kYWxzJywgWydjaGF5a2EtbmxzJywgJ2NoYXlrYS1idXR0b25zJywgJ2NoYXlrYS11dGlscyddKVxuICAgIC5wcm92aWRlcignbW9kYWxzJywgZnVuY3Rpb24oKXtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGdldDogWyckd2luZG93JywgJ25scycsICdidXR0b25zJywgJ3V0aWxzJywgZnVuY3Rpb24oJHdpbmRvdywgbmxzLCBidG4sIHV0aWxzKXtcblxuICAgICAgICAgICAgICAgIHZhciBtb2RhbHMgPSB1dGlscy5lbnN1cmUoJ0NoYXlrYS5Nb2RhbHMnLCB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgLy9xdWV1ZTogbW9kYWxzLnF1ZXVlLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0UXVldWVTY29wZTogZnVuY3Rpb24oJHNjb3BlKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgbW9kYWxzLnNjb3BlID0gJHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICAvL30sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgY29uZmlnIG9iamVjdCB0byBiZSBwdXNoZWQgdG8gYSBtb2RhbCBxdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7bW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYnV0dG9ucyAmJiBhbmd1bGFyLmlzT2JqZWN0KG9wdGlvbnMuYnV0dG9ucykgJiYgIWFuZ3VsYXIuaXNBcnJheShvcHRpb25zLmJ1dHRvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAdmFyIHt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIHRleHQ6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgY2xpY2s6IGZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICBwZXJzaXN0OiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICBjbHM6IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIH19IGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChvcHRpb25zLmJ1dHRvbnMsIGZ1bmN0aW9uKGJ1dHRvbiwgdGV4dCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zID0gYnV0dG9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBhbmd1bGFyLmV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBtID0gYW5ndWxhci5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMsIG1vZGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbS5wcm90b3R5cGUgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKG0uZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgbS5lbGVtZW50LmRhdGEoJ21vZGFsJywgbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTaG93cyBhbnl0aGluZyBpbiBhIG1vZGFsIHdpbmRvdy5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICogIC0gdGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICogIC0gY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgKiAgLSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAqICAtIHdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAqICAtIGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgKiAgLSBidXR0b25zXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gbW9kYWxzLmNyZWF0ZShvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFscy5xdWV1ZS5wdXNoKG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNob3dzIGFsZXJ0IGJveC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFt0aXRsZV1cbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFttb2RhbENsYXNzXVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBhbGVydDogZnVuY3Rpb24obWVzc2FnZSwgdGl0bGUsIG1vZGFsQ2xhc3MsIGNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsQ2xhc3MgPSBtb2RhbENsYXNzIHx8ICdtb2RhbF9hbGVydCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxDbGFzczogbW9kYWxDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ZXh0OiBubHMuXygnT2snKSwgY2xpY2s6IGNhbGxiYWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTaG93cyBjb25maXJtIGJveFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3RpdGxlXVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY29uZmlybTogZnVuY3Rpb24obWVzc2FnZSwgY2FsbGJhY2ssIHRpdGxlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFscy5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbENsYXNzOiAnbW9kYWxfY29uZmlybScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tb2RhbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGV4dDogbmxzLl8oJ1llcycpLCBjbGljazogY2FsbGJhY2t9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGV4dDogbmxzLl8oJ05vJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENsb3NlIGN1cnJlbnQgbW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbigkZXZlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRldmVudCB8fCAkZXZlbnQudGFyZ2V0ID09PSAkZXZlbnQuY3VycmVudFRhcmdldCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEdldCBidXR0b24gY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHt7dGV4dDogc3RyaW5nLCBjbGljazogZnVuY3Rpb24sIGNsczogc3RyaW5nfX0gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGdldEJ1dHRvbkNsYXNzOiBmdW5jdGlvbihidXR0b24pe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gYnV0dG9uQ2xhc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uQ2xhc3MgPSBidG4uZ2V0QnV0dG9uQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNscy5wdXNoKGJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24gJiYgYnV0dG9uLmNscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNscy5wdXNoKGJ1dHRvbi5jbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNscy5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vbW9kYWxzID0gYW5ndWxhci5leHRlbmQobW9kYWxzLCBhcGkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGFscztcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH07XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKCdtb2RhbHNNYW5hZ2VyJywgWydtb2RhbHMnLCAnYnV0dG9ucycsIGZ1bmN0aW9uKG1vZGFscyl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ21tJyxcbiAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHt9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGlkPVwiY2hheWthLW1vZGFsc1wiIGRhdGEtbmctc2hvdz1cIm1tLnF1ZXVlLmxlbmd0aFwiIGNsYXNzPVwibmctY2xvYWsgY2hheWthLW1vZGFsc1wiIGRhdGEtbmctY2xvYWs9XCJcIj4nICtcbiAgICAgICAgICAgICcgICA8ZGl2IGNsYXNzPVwiY2hheWthLW1vZGFscy1mYWRlclwiIGRhdGEtbmctY2xpY2s9XCJtbS5jbG9zZSgkZXZlbnQpXCI+JyArXG4gICAgICAgICAgICAnICAgICAgIDxkaXYgZGF0YS1uZy1yZXBlYXQ9XCJpdGVtIGluIG1tLnF1ZXVlIHwgbGltaXRUbzogMVwiIGNsYXNzPVwiY2hheWthLW1vZGFscy1tb2RhbFwiPicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX2hlYWRlclwiPicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9oZWFkZXItdGl0bGVcIj57e2l0ZW0udGl0bGUgfCBubHN9fTwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9oZWFkZXItY2xvc2VcIiBkYXRhLW5nLWNsaWNrPVwibW0uY2xvc2UoJGV2ZW50KVwiPiZ0aW1lczs8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX2JvZHlcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfYm9keS1jb250ZW50XCIgZGF0YS1uZy1iaW5kLWh0bWw9XCJpdGVtLmNvbnRlbnRcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX2J1dHRvbnNcIiBkYXRhLW5nLXNob3c9XCJpdGVtLmJ1dHRvbnMgJiYgaXRlbS5idXR0b25zLmxlbmd0aFwiPicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS1uZy1yZXBlYXQ9XCJidXR0b24gaW4gaXRlbS5idXR0b25zXCIgZGF0YS1uZy1jbGljaz1cImJ1dHRvbi5wZXJzaXN0IHx8IG1tLmNsb3NlKCk7IGJ1dHRvbi5jbGljayAmJiBidXR0b24uY2xpY2soKTtcIiBjbGFzcz1cInt7bW0uZ2V0QnV0dG9uQ2xhc3MoYnV0dG9uKX19XCI+e3tidXR0b24udGV4dCB8IG5sc319PC9idXR0b24+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgPC9kaXY+JyArXG4gICAgICAgICAgICAnICAgPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgLy8nICAgPGRpdiBjbGFzcz1cIm5nLWhpZGVcIiBpZD1cImNoYXlrYS1tb2RhbHMtcG9vbFwiPjwvZGl2PicgK1xuICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2U6IG1vZGFscy5jbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgcXVldWU6IG1vZGFscy5xdWV1ZSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0QnV0dG9uQ2xhc3M6IG1vZGFscy5nZXRCdXR0b25DbGFzc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnbW9kYWwnLCBbJ21vZGFscycsIGZ1bmN0aW9uKG1vZGFscykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbScsXG4gICAgICAgICAgICAvLyBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBtb2RhbDogJz1tb2RhbCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdAP21vZGFsVGl0bGUnLFxuICAgICAgICAgICAgICAgIHNob3c6ICdAbW9kYWxTaG93JyxcbiAgICAgICAgICAgICAgICBidXR0b25zOiAnPT9tb2RhbEJ1dHRvbnMnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnQG1vZGFsV2lkdGgnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJ0Btb2RhbEhlaWdodCcsXG4gICAgICAgICAgICAgICAgb25DbG9zZTogJyY/b25Nb2RhbENsb3NlJ1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY2hheWthLW1vZGFscyBuZy1jbG9ha1wiIGRhdGEtbmctc2hvdz1cIm0uaXNPcGVuXCI+JyArXG4gICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtZmFkZXJcIiBkYXRhLW5nLWNsaWNrPVwibS5oaWRlKCRldmVudClcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtbW9kYWxcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9oZWFkZXJcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLXRpdGxlXCI+e3ttLnRpdGxlIHwgbmxzfX08L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLWNsb3NlXCIgZGF0YS1uZy1jbGljaz1cIm0uaGlkZSgkZXZlbnQpXCI+JnRpbWVzOzwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPC9kaXY+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfYm9keVwiIGRhdGEtbmctdHJhbnNjbHVkZT48L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9idXR0b25zXCIgZGF0YS1uZy1zaG93PVwibS5idXR0b25zICYmIG0uYnV0dG9ucy5sZW5ndGhcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtbmctcmVwZWF0PVwiYnV0dG9uIGluIGJ1dHRvbnNcIiBkYXRhLW5nLWNsaWNrPVwiYnV0dG9uLnBlcnNpc3QgfHwgbS5oaWRlKCk7IGJ1dHRvbi5jbGljayAmJiBidXR0b24uY2xpY2soKTtcIiBjbGFzcz1cInt7bS5nZXRCdXR0b25DbGFzcyhidXR0b24pfX1cIj57e2J1dHRvbi50ZXh0IHwgbmxzfX08L2J1dHRvbj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb2RhbC5kaXJlY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIHZhciBjdHJsID0ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAkc2NvcGUudGl0bGUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6ICRzY29wZS5idXR0b25zIHx8IFtdLFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTaG93IGVsZW1lbnQgd2l0aGluIG1vZGFsIHBvcHVwLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBIaWRlIG1vZGFsIHBvcHVwLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRldmVudCB8fCAkZXZlbnQudGFyZ2V0ID09PSAkZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5vbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vbkNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTZXQgcG9wdXAgd2luZG93LlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHNldFRpdGxlOiBmdW5jdGlvbiAodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2V0IGJ1dHRvbiBzZXQuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fEFycmF5fSBidXR0b25zXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzZXRCdXR0b25zOiBmdW5jdGlvbiAoYnV0dG9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbnMgJiYgYW5ndWxhci5pc09iamVjdChidXR0b25zKSAmJiAhYW5ndWxhci5pc0FycmF5KGJ1dHRvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ0bnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goYnV0dG9ucywgZnVuY3Rpb24gKGJ1dHRvbiwgdGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bnMucHVzaChidXR0b24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBidG5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5idXR0b25zID0gJHNjb3BlLmJ1dHRvbnMgPSBidXR0b25zO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGdldEJ1dHRvbkNsYXNzOiBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kYWxzLmdldEJ1dHRvbkNsYXNzKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5idXR0b25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0QnV0dG9ucygkc2NvcGUuYnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsID0gY3RybDtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY3RybC5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuY3NzKCdoZWlnaHQnLCAkc2NvcGUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmNzcygnd2lkdGgnLCAkc2NvcGUud2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBjdHJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5jb25maWcoWydubHNQcm92aWRlcicsIGZ1bmN0aW9uKG5sc1Byb3ZpZGVyKXtcblxuICAgICAgICAvLyBBZGRpbmcgYSB0cmFuc2xhdGlvbiB0YWJsZSBmb3IgdGhlIEVuZ2xpc2ggbGFuZ3VhZ2VcbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdlbi1VUycsIHtcbiAgICAgICAgICAgICdZZXMnOiAnWWVzJyxcbiAgICAgICAgICAgICdObyc6ICdObycsXG4gICAgICAgICAgICAnT2snOiAnT2snXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5sc1Byb3ZpZGVyLnNldFRyYW5zbGF0aW9ucygncnUtUlUnLCB7XG4gICAgICAgICAgICAnWWVzJzogJ9CU0LAnLFxuICAgICAgICAgICAgJ05vJzogJ9Cd0LXRgicsXG4gICAgICAgICAgICAnT2snOiAnT2snXG4gICAgICAgIH0pO1xuICAgIH1dKVxuOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBjaGF5a2EtZm9ybXNcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgaXMgYSBtb2R1bGUgdGhhdCBlbmFibGVzIGZvcm0gdmFsaWRhdGlvbiBzdHVmZi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS1mb3JtcycsIFsnbmdTYW5pdGl6ZScsICdjaGF5a2EtbW9kYWxzJywgJ2NoYXlrYS1ubHMnLCAnY2hheWthLWFqYXgnXSlcbiAgICAvKipcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXG4gICAgICogQG5hbWUgY2hheWthLWZvcm1zI2Zvcm1WYWxpZGF0b3JcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIFRoaXMgZGlyZWN0aXZlIGNyZWF0ZXMgd3JhcHBlciBmb3IgdGhlIGZpZWxkcyB0aGF0IHNob3VsZCBiZSB2YWxpZGF0ZWQuXG4gICAgICogVGhlbiB5b3UgY2FuIGFjY2VzcyBpdCBhbmQgcGVyZm9ybSBmaWVsZCBzZXQgdmFsaWRhdGlvbi5cbiAgICAgKi9cbiAgICAuZGlyZWN0aXZlKCdmb3JtVmFsaWRhdG9yJywgWyckd2luZG93JywgJ21vZGFscycsICdhamF4JywgJ3V0aWxzJywgZnVuY3Rpb24oJHdpbmRvdywgbW9kYWxzLCBhamF4LCB1dGlscyl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgICAgIC8vdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yOiAnPT9mb3JtVmFsaWRhdG9yJyxcbiAgICAgICAgICAgICAgICBzY3JvbGxNYXJnaW46ICdAJyxcbiAgICAgICAgICAgICAgICBzY3JvbGxEdXJhdGlvbjogJ0AnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgICAgIHZhciBjdHJsID0ge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbE1hcmdpbjogJHNjb3BlLnNjcm9sbE1hcmdpbiB8fCA1MCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRHVyYXRpb246ICRzY29wZS5zY3JvbGxNYXJnaW4gfHwgNTAwLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6ICRzY29wZS5maWVsZHMgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3g6IG51bGwsXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNldHMgbWVzc2FnZSBib3ggZm9yIHZhbGlkYXRvci5cbiAgICAgICAgICAgICAgICAgICAgICogVGhlIGJveCB0aGF0IHdpbGwgc2hvdyBjb21tb24gZXJyb3JzLlxuICAgICAgICAgICAgICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSAnZm9ybS1tZXNzYWdlJyBkaXJlY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIElmIG5vdCBzZXQsIENoYXlrYS5Nb2RhbHMuYWxlcnQoKSB3aWxsIGJlIHV0aWxpemVkLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gbXNnQm94XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlQm94OiBmdW5jdGlvbihtc2dCb3gpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5tZXNzYWdlQm94ID0gbXNnQm94O1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTaG93IG1lc3NhZ2UgdXNpbmcgbWVzc2FnZSBib3ggb3IgQ2hheWthLk1vZGFscy5hbGVydCgpXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlLCBzdGF0ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3RybC5tZXNzYWdlQm94KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5tZXNzYWdlQm94Lm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwubWVzc2FnZUJveC5zdGF0ZSA9IHN0YXRlIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxzLmFsZXJ0KG1lc3NhZ2UsICcnLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEhpZGUgbWVzc2FnZSBzaG93biBieSBtZXNzYWdlIGJveFxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyTWVzc2FnZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHJsLm1lc3NhZ2VCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLm1lc3NhZ2VCb3gubWVzc2FnZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwubWVzc2FnZUJveC5zdGF0ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBBZGQgZmllbGQgdG8gdGhlIHNldCBvZiB2YWxpZGF0ZWQgZmllbGRzXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuZmllbGRzW2ZpZWxkWyduYW1lJ11dID0gZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNldCBmaWVsZCBzdGF0ZSBhbmQgbWVzc2FnZSAoaGludClcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2V0RmllbGRTdGF0ZTogZnVuY3Rpb24oZmllbGQsIHN0YXRlLCBtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkID0gY3RybC5maWVsZHNbZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkWyd2YWxpZCddID0gc3RhdGUgPT09ICd2YWxpZCcgfHwgc3RhdGUgPT09ICdjbGVhbicgfHwgc3RhdGUgPT09ICdwcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFsnc3RhdGUnXSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRbJ21lc3NhZ2UnXSA9IG1lc3NhZ2UgfHwgZmllbGRbJ2hpbnQnXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy91dGlscy5wYXRjaFNjb3BlKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2V0IGZpZWxkIHN0YXRlIHRvIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2V0RmllbGRFcnJvcjogZnVuY3Rpb24oZmllbGQsIG1lc3NhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAnaW52YWxpZCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDbGVhciBmaWVsZCBlcnJvciBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8c2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjbGVhckZpZWxkRXJyb3I6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ2NsZWFyJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIHJlcXVpcmVkIGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUmVxdWlyZWQ6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLnJlcXVpcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCAhIShmaWVsZFsndmFsdWUnXSArICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja0xlbmd0aDogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCAhKGMubWF4ICYmIGZpZWxkWyd2YWx1ZSddLmxlbmd0aCA+IGMubWF4IHx8IGZpZWxkWyd2YWx1ZSddLmxlbmd0aCA8IGMubWluKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgdmFsdWUgcmFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiAtIG1pblxuICAgICAgICAgICAgICAgICAgICAgKiAtIG1pbkVcbiAgICAgICAgICAgICAgICAgICAgICogLSBtYXhcbiAgICAgICAgICAgICAgICAgICAgICogLSBtYXhFXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tSYW5nZTogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXIgPSBjLm1pbiAmJiAoYy5taW5FICYmIGZpZWxkWyd2YWx1ZSddIDwgYy5taW4gfHwgIWMubWluRSAmJiBmaWVsZFsndmFsdWUnXSA8PSBjLm1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JlYXRlciA9IGMubWF4ICYmIChjLm1heEUgJiYgZmllbGRbJ3ZhbHVlJ10gPiBjLm1heCB8fCAhYy5taW5FICYmIGZpZWxkWyd2YWx1ZSddID49IGMubWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgIShsb3dlciB8fCBncmVhdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgdmFsdWUgbHQgKDwpLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSBtYXhcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja0x0OiBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZpZWxkWydjaGVja3MnXS5sdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgZmllbGRbJ3ZhbHVlJ10gPCBjLm1heDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgdmFsdWUgbGUgKDw9KS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gbWF4XG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tMZTogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ubGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8IGZpZWxkWyd2YWx1ZSddIDw9IGMubWF4O1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDaGVjayBmaWVsZCB2YWx1ZSBndCAoPikuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiAtIG1pblxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrR3Q6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLmd0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCBmaWVsZFsndmFsdWUnXSA+IGMubWluO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDaGVjayBmaWVsZCB2YWx1ZSBnZSAoPj0pLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSBtaW5cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja0dlOiBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZpZWxkWydjaGVja3MnXS5nZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgZmllbGRbJ3ZhbHVlJ10gPj0gYy5taW47XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIGZpZWxkIHZhbHVlIGFnYWluc3QgcmVnZXhwLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSByZWdleHBcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp8Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUmVnZXhwOiBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZpZWxkWydjaGVja3MnXS5yZWdleHA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWQgPSBjLnJlZ2V4cC50ZXN0KGZpZWxkWyd2YWx1ZSddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLmZvcmJpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gIXZhbGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCB2YWxpZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ29tcGFyZSB0d28gcGFzc3dvcmQgZmllbGQgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSByZXBlYXRcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja1Bhc3N3b3JkczogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ucGFzc3dvcmRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGVhdEZpZWxkID0gY3RybC5maWVsZHNbYy5yZXBlYXRdIHx8IGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCBmaWVsZFsndmFsdWUnXSA9PT0gcmVwZWF0RmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIHZhbHVlIHVzaW5nIGFwaSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICAgKiBTdG9yZXMgY2hlY2tlZCB2YWx1ZXMgdG8gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiAtIHVybFxuICAgICAgICAgICAgICAgICAgICAgKiAtIGRlbGF5XG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja0FwaTogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10uYXBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHV0aWxzLnRlbXBsYXRlKGMudXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZW5jb2RlVVJJQ29tcG9uZW50KGZpZWxkWyduYW1lJ10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbmNvZGVVUklDb21wb25lbnQoZmllbGRbJ3ZhbHVlJ10pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGZpZWxkWyd2YWx1ZSddICsgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW4gYy5kaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgndmFsaWQnID09PSBjLmRpY3Rpb25hcnlbdmFsdWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldEZpZWxkU3RhdGUoZmllbGQsICd2YWxpZCcsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAnaW52YWxpZCcsIGMubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuZGljdGlvbmFyeVt2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5kaWN0aW9uYXJ5W3ZhbHVlXSA9ICdwcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWpheC5nZXQodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXI6ICRzY29wZS5zcGlubmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyRmllbGRJZDogZmllbGRbJ25hbWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lck1lc3NhZ2U6ICcgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01lc3NhZ2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsaWRhdG9yOiBjdHJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGMubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVPblNlbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmRpcih7J2RhdGEnOiBkYXRhfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmRpY3Rpb25hcnlbdmFsdWVdID0gJ3ZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ3ZhbGlkJywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZihjLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAkc2NvcGUuJHBhcmVudFtjLmNhbGxiYWNrXS5jYWxsKCRzY29wZSwgZGF0YSwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmRpY3Rpb25hcnlbdmFsdWVdID0gJ2ludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5tZXNzYWdlID0gYy5tZXNzYWdlIHx8ICdtYXNzX2Vycm9ycycgPT09IGRhdGEuY29kZSAmJiBkYXRhLm1lc3NhZ2VbZmllbGRbJ25hbWUnXV0gfHwgZGF0YS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoYy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgJHNjb3BlLiRwYXJlbnRbYy5jYWxsYmFja10uY2FsbCgkc2NvcGUsIGRhdGEsIGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCBjLmRpY3Rpb25hcnlbdmFsdWVdO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFBlcmZvcm0gY3VzdG9tIGNoZWNrIGJ5IGNhbGxpbmcgcHJvdmlkZWQgc2NvcGUgY2FsbGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQ3VzdG9tOiBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZpZWxkWydjaGVja3MnXS5jdXN0b207XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBjLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCAkc2NvcGUuJHBhcmVudFtjYWxsYmFja10uY2FsbCgkc2NvcGUsIGZpZWxkWyd2YWx1ZSddLCBmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFBlcmZvcm0gYWxsIHRoZSBzZXQgdXAgY2hlY2tzIGZvciB0aGUgZ2l2ZW4gZmllbGQuXG4gICAgICAgICAgICAgICAgICAgICAqIElmIHNpbGVudCwgZG9lcyBub3QgdmlzdWFsaXplIHZhbGlkYXRpb24gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaWxlbnRdXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGaWVsZDogZnVuY3Rpb24oZmllbGQsIHNpbGVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja3MgPSBmaWVsZFsnY2hlY2tzJ107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmllbGRbJ2FjdGl2ZSddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja3MucmVxdWlyZWQgJiYgIWN0cmwuY2hlY2tSZXF1aXJlZChmaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBjaGVja3MucmVxdWlyZWQubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkWyd2YWx1ZSddICsgJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2hlY2tzLCBmdW5jdGlvbihjLCBjaGVjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY3RybC5jaGVja0xlbmd0aChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyYW5nZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrUmFuZ2UoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY3RybC5jaGVja0x0KGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tMZShmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrR3QoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY3RybC5jaGVja0dlKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4cCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrUmVnZXhwKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3Jkcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrUGFzc3dvcmRzKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBjLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkICYmIGNoZWNrcy5jdXN0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tDdXN0b20oZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB2YWxpZCA/ICcnIDogY2hlY2tzLmN1c3RvbS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IHZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkICYmIGNoZWNrcy5hcGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IGN0cmwuY2hlY2tBcGkoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBzdGF0ZSA9PT0gJ2ludmFsaWQnID8gY2hlY2tzLmFwaS5tZXNzYWdlIDogJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldEZpZWxkU3RhdGUoZmllbGQsIHN0YXRlLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnZhbGlkO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBWYWxpZGF0ZSBmaWVsZCBieSBmaWVsZCBpZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZmllbGRJZFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gW3NpbGVudF1cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRmllbGRCeUlkOiBmdW5jdGlvbihmaWVsZElkLCBzaWxlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gY3RybC5maWVsZHNbZmllbGRJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC52YWxpZGF0ZUZpZWxkKGZpZWxkLCBzaWxlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBWYWxpZGF0ZSBhbGwgcmVnaXN0ZXJlZCBmaWVsZHMgYW5kIHNjcm9sbCB0b1xuICAgICAgICAgICAgICAgICAgICAgKiB0b3AgaW52YWxpZCBmaWVsZCBpbiBjYXNlIGl0IGlzIGludmlzaWJsZS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUZpZWxkczogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUbyA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjdHJsLmZpZWxkcywgZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3RybC52YWxpZGF0ZUZpZWxkKGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsUG9zID0gZmllbGQuZWxlbWVudC5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsVG8gfHwgc2Nyb2xsUG9zICYmIHNjcm9sbFRvID4gc2Nyb2xsUG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUbyA9IHNjcm9sbFBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQgJiYgc2Nyb2xsVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNjcm9sbFRvKHNjcm9sbFRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUudmFsaWQgPSB2YWxpZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTY3JvbGwgdG8gc2V0IHBvc2l0aW9uIGluIGNhc2UgaWYgcG9zaXRpb24gaXMgb3V0IG9mIHRoZSB2aWVwb3J0LlxuICAgICAgICAgICAgICAgICAgICAgKiBJZiBkdXJhdGlvbiBpcyAwLCBzY3JvbGwgaXMgbm90IGFuaW1hdGVkLlxuICAgICAgICAgICAgICAgICAgICAgKiBEZWZhdWx0IGR1cmF0aW9uIHZhbHVlIGlzIHRha2VuIGZyb20gbWFya3VwIChzZWUgc2Nyb2xsLWR1cmF0aW9uIGRpcmVjdGl2ZSkuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fSBzY3JvbGxUb1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2ludHxzdHJpbmd9IFtkdXJhdGlvbl1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbihzY3JvbGxUbywgZHVyYXRpb24pe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChkdXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHBhcnNlSW50KGN0cmwuc2Nyb2xsRHVyYXRpb24pIHx8IGN0cmwuc2Nyb2xsRHVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvIC09IHBhcnNlSW50KGN0cmwuc2Nyb2xsTWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkd2luZG93LmpRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkID0gJHdpbmRvdy5qUXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRvIDwgJHdpbmRvdy5wYWdlWU9mZnNldCB8fCBzY3JvbGxUbyA+ICR3aW5kb3cucGFnZVlPZmZzZXQgKyAkKCR3aW5kb3cpLmhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5qUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IHNjcm9sbFRvfSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5qUXVlcnkoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3Aoc2Nyb2xsVG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTY3JvbGwgdG8gdG9wIG9mIHRoZSBmb3JtLXZhbGlkYXRvciBET00tZWxlbWVudCBpZiBvbmUgaXMgbm90IHZpc2libGUuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fHN0cmluZ30gW2R1cmF0aW9uXVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVXA6IGZ1bmN0aW9uKGR1cmF0aW9uKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2Nyb2xsVG8oJHNjb3BlLmVsZW1lbnQub2Zmc2V0KCkudG9wLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNob3cgc2V0IG9mIGVycm9ycyBvcmdhbml6ZWQgYnkgZmllbGRzLlxuICAgICAgICAgICAgICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGhhbmR5IHRvIHNob3cgZXJyb3JzIGZyb20gYmFja2VuZCBhcGkgY2FsbC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogRXJyb3JzIGZvciBub24tZXhpc3RpbmcgZmllbGRzIHdpbGwgYmUgc2hvd24gaW4gbWVzc2FnZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICogb3IgdmlhIENoYXlrYS5Nb2RhbHMuYWxlcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGVycm9yc1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2hvd0Vycm9yczogZnVuY3Rpb24oZXJyb3JzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUbyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZXJyb3JzLCBmdW5jdGlvbihtZXNzYWdlLCBrZXkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGN0cmwuZmllbGRzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ2ludmFsaWQnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFBvcyA9IGZpZWxkLmVsZW1lbnQub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNjcm9sbFRvIHx8IHNjcm9sbFBvcyAmJiBzY3JvbGxUbyA+IHNjcm9sbFBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG8gPSBzY3JvbGxQb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNob3dNZXNzYWdlKG1lc3NhZ2UsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNjcm9sbFRvKHNjcm9sbFRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogR2V0IGZvcm0gZmllbGRzIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHt7fX1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGdldEZpZWxkVmFsdWVzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGN0cmwuZmllbGRzLCBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzW2ZpZWxkXSA9IGN0cmwuZmllbGRzW2ZpZWxkXS52YWx1ZSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICRzY29wZS52YWxpZGF0b3IgPSBjdHJsO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnZm9ybUZpZWxkJywgWydubHMnLCAnZGVsYXllZENhbGwnLCAndXRpbHMnLCBmdW5jdGlvbihubHMsIGRlbGF5ZWRDYWxsLCB1dGlscyl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiBbJ15eZm9ybVZhbGlkYXRvcicsICdmb3JtRmllbGQnXSxcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2YnLFxuICAgICAgICAgICAgdGVtcGxhdGU6XG4gICAgICAgICAgICAgICAgJzxsYWJlbD57e2YubGFiZWx8bmxzfX08L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaW5wdXQge3tmLnN0YXRlfX1cIiBkYXRhLW5nLXRyYW5zY2x1ZGU+PC9kaXY+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtZXNzYWdlXCIgZGF0YS1uZy1jbGFzcz1cIntlcnJvcjogIWYudmFsaWR9XCIgZGF0YS1uZy1iaW5kLWh0bWw9XCJmLm1lc3NhZ2VcIj48L2Rpdj4nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnQGZvcm1GaWVsZCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdAJyxcbiAgICAgICAgICAgICAgICBoaW50OiAnQCcsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0BoaW50J1xuICAgICAgICAgICAgICAgIC8vdmFsdWU6ICc9J1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBjb250cm9sbGVycyl7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1DdHJsID0gY29udHJvbGxlcnNbMF0sIGZpZWxkID0gY29udHJvbGxlcnNbMV07XG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICRlbGVtZW50LmZpbmQoJ1tuZy1tb2RlbF0sW2RhdGEtbmctbW9kZWxdJyksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VHlwZSA9ICRpbnB1dC5hdHRyKCd0eXBlJyksXG4gICAgICAgICAgICAgICAgICAgICRvbGRMYWJlbCA9ICRlbGVtZW50LmZpbmQoJy5pbnB1dCA+IGxhYmVsOmZpcnN0LWNoaWxkJyksXG4gICAgICAgICAgICAgICAgICAgICRuZXdMYWJlbCA9ICRlbGVtZW50LmZpbmQoJz4gbGFiZWwnKTtcbiAgICAgICAgICAgICAgICBmaWVsZC5tb2RlbCA9ICRpbnB1dC5hdHRyKCdkYXRhLW5nLW1vZGVsJykgfHwgJGlucHV0LmF0dHIoJ25nLW1vZGVsJyk7XG4gICAgICAgICAgICAgICAgZmllbGQuZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmxhYmVsICYmIGlucHV0VHlwZSAhPT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFiZWwgPSAkb2xkTGFiZWwudGV4dCgpLnJlcGxhY2UoL1xccyo6XFxzKiQvLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkb2xkTGFiZWwuYXR0cmlidXRlcywgZnVuY3Rpb24oaSwgYXR0cil7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbmV3TGFiZWwuYXR0cihuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkbmV3TGFiZWwuYWRkQ2xhc3MoJG9sZExhYmVsLmF0dHIoJ2NsYXNzJykpO1xuICAgICAgICAgICAgICAgICAgICAkbmV3TGFiZWwudGV4dCgkc2NvcGUubGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAkb2xkTGFiZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZpZWxkLmxhYmVsID0gJHNjb3BlLmxhYmVsO1xuICAgICAgICAgICAgICAgIGZpZWxkLm5hbWUgPSAkc2NvcGUubmFtZTtcbiAgICAgICAgICAgICAgICBmaWVsZC5tZXNzYWdlID0gJHNjb3BlLm1lc3NhZ2U7XG5cbiAgICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgLy9mb3JtQ3RybC5jbGVhckZpZWxkRXJyb3Ioc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAvL2Zvcm1DdHJsLnNldEZpZWxkU3RhdGUoZmllbGQsICdjbGVhbicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJGlucHV0LmJsdXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgLy9mb3JtQ3RybC5zZXRGaWVsZEVycm9yKHNjb3BlLCAnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd2YWxpZGF0aW5nIHZhbHVlOiAnK3Njb3BlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1DdHJsLnZhbGlkYXRlRmllbGQoZmllbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJGFwcGx5KCk7IC8vIG9rXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBzZXR1cCBkYXRhLWNoZWNrLWlmPVwiY29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cElmKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJGF0dHJzWydjaGVja0lmJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaCgkYXR0cnNbJ2NoZWNrSWYnXSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmFjdGl2ZSA9ICEhdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIHJlcXVpcmVkIGZpZWxkIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLXJlcXVpcmVkID0gXCJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkfHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZXF1aXJlZC1tZXNzYWdlID0gXCJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmVxdWlyZWQtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cFJlcXVpcmVkKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrUmVxdWlyZWQnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5scy5fKHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrUmVxdWlyZWRNZXNzYWdlJ10gfHwgJ21lc3NhZ2VfcmVxdWlyZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucmVxdWlyZWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja1JlcXVpcmVkSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yZXF1aXJlZC5hY3RpdmUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgZmllbGQgdmFsdWUgbGVuZ3RoIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlbmd0aCA9IFwiVGhlIGxlbmd0aCBvZiB0aGlzIHZhbHVlIHNob3VsZCBiZSBiZXR3ZWVuIHttaW59IGFuZCB7bWF4fSBzeW1ib2xzfDB8MTZ8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlbmd0aC1tZXNzYWdlID0gXCJUaGUgbGVuZ3RoIG9mIHRoaXMgdmFsdWUgc2hvdWxkIGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9IHN5bWJvbHNcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZW5ndGgtbWluID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbGVuZ3RoLW1heCA9IFwiMTZcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZW5ndGgtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwTGVuZ3RoKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrTGVuZ3RoJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IHBhcnNlSW50KHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrTGVuZ3RoTWluJ10gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBwYXJzZUludChzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja0xlbmd0aE1heCddIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZVRlbXBsYXRlID0gbmxzLl8oc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tMZW5ndGhNZXNzYWdlJ10gfHwgJ21lc3NhZ2VfbGVuZ3RoJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdXRpbHMudGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlLCB7bWluOiBtaW4sIG1heDogbWF4LCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmxlbmd0aCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbM10gfHwgJGF0dHJzWydjaGVja0xlbmd0aElmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MubGVuZ3RoLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBmaWVsZCB2YWx1ZSByYW5nZSBjaGVjay5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yYW5nZSA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBiZXR3ZWVuIHttaW59IGFuZCB7bWF4fXw9MHwxNnxpbnR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJhbmdlLW1lc3NhZ2UgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgYmV0d2VlbiB7bWlufSBhbmQge21heH1cIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yYW5nZS1taW4gPSBcIj0wXCIgKCc9JyBtZWFucyAnaW5jbHVzaXZlJylcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmFuZ2UtbWF4ID0gXCIxNlwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJhbmdlLWZvcm1hdCA9IFwiaW50XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmFuZ2UtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwUmFuZ2UoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tSYW5nZSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW5TdHIgPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja1JhbmdlTWluJ10gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbkUgPSAhIW1pblN0ci5tYXRjaCgvXj0vKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IG1pbkUgPyBtaW5TdHIuc3Vic3RyKDEpIDogbWluU3RyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4U3RyID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tSYW5nZU1heCddIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhFID0gISFtYXhTdHIubWF0Y2goL149Lyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBtYXhFID8gbWF4U3RyLnN1YnN0cigxKSA6IG1heFN0cjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHNob3J0c1szXSB8fCAkYXR0cnNbJ2NoZWNrUmFuZ2VGb3JtYXQnXSB8fCAnaW50JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcGFyc2VJbnQobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludChtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBhcnNlRmxvYXQobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja1JhbmdlTWVzc2FnZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBubHMuXygnbWVzc2FnZV9yYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHV0aWxzLnRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSwge21pbjogbWluLCBtYXg6IG1heCwgbGFiZWw6IGZpZWxkLmxhYmVsfSk7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkU6IG1pbkUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEU6IG1heEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1s0XSB8fCAkYXR0cnNbJ2NoZWNrUmFuZ2VJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJhbmdlLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBmaWVsZCB2YWx1ZSAnbG93ZXIgdGhhbiAoPCknLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWx0ID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGxvd2VyIHRoYW4ge21heH18MHxpbnR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWx0LW1lc3NhZ2UgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgbG93ZXIgdGhhbiB7bWF4fVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWx0LW1heCA9IFwiMFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWx0LWZvcm1hdCA9IFwiaW50XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbHQtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEx0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrTHQnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4ID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tMdE1heCddIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0x0TWVzc2FnZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBubHMuXygnbWVzc2FnZV9sdCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHV0aWxzLnRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSwge21heDogbWF4LCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrTHRGb3JtYXQnXSB8fCAnaW50JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGFyc2VJbnQobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5sdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tMdElmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MubHQuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHZhbHVlICdsb3dlciBvciBlcXVhbCAoPD0pJy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZSA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBsb3dlciB0aGFuIHttYXh9IG9yIGVxdWFsfDB8aW50fHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZS1tZXNzYWdlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGxvd2VyIHRoYW4ge21heH0gb3IgZXF1YWxcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZS1tYXggPSBcIjBcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZS1mb3JtYXQgPSBcImludFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlLWlmID0gXCJzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBMZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja0xlJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrTGVNYXgnXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZVRlbXBsYXRlID0gc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tMZU1lc3NhZ2UnXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgbmxzLl8oJ21lc3NhZ2VfbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB1dGlscy50ZW1wbGF0ZShtZXNzYWdlVGVtcGxhdGUsIHttYXg6IG1heCwgbGFiZWw6IGZpZWxkLmxhYmVsfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja0xlRm9ybWF0J10gfHwgJ2ludCc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IHBhcnNlSW50KG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmbG9hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGFyc2VGbG9hdChtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MubGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1szXSB8fCAkYXR0cnNbJ2NoZWNrTGVJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmxlLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBmaWVsZCB2YWx1ZSAnZ3JlYXRlciB0aGFuICg+KScuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ3QgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59fDB8aW50fHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1ndC1tZXNzYWdlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB7bWlufVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWd0LW1heCA9IFwiMFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWd0LWZvcm1hdCA9IFwiaW50XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ3QtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEd0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrR3QnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tHdE1pbiddIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0d0TWVzc2FnZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBubHMuXygnbWVzc2FnZV9ndCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHV0aWxzLnRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSwge21pbjogbWluLCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrR3RGb3JtYXQnXSB8fCAnaW50JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcGFyc2VJbnQobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBwYXJzZUZsb2F0KG1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5ndCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tHdElmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MuZ3QuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHZhbHVlICdncmVhdGVyIG9yIGVxdWFsICg8PSknLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWdlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB7bWlufSBvciBlcXVhbHwwfGludHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ2UtbWVzc2FnZSA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4ge21pbn0gb3IgZXF1YWxcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1nZS1taW4gPSBcIjBcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1nZS1mb3JtYXQgPSBcImludFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWdlLWlmID0gXCJzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBHZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja0dlJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrR2VNaW4nXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZVRlbXBsYXRlID0gc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tHZU1lc3NhZ2UnXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgbmxzLl8oJ21lc3NhZ2VfZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB1dGlscy50ZW1wbGF0ZShtZXNzYWdlVGVtcGxhdGUsIHttaW46IG1pbiwgbGFiZWw6IGZpZWxkLmxhYmVsfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja0dlRm9ybWF0J10gfHwgJ2ludCc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBhcnNlSW50KG1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmbG9hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcGFyc2VGbG9hdChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MuZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBtaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1szXSB8fCAkYXR0cnNbJ2NoZWNrR2VJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmdlLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBmaWVsZCByZWdleHAgY2hlY2suXG4gICAgICAgICAgICAgICAgICogSGVhZHMgdXA6IElmIHlvdSBuZWVkICcvJyBjaGFyIGluIGEgbWVzc2FnZSBvciAnfCcgY2hhciBpbiBhIHBhdHRlcm4sXG4gICAgICAgICAgICAgICAgICogWW91J2QgYmV0dGVyIHVzZSBleHRlbmRlZCBmb3JtYXQgaW5zdGVhZCBvZiBzaG9ydCBvbmUuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmVnZXhwID0gXCJJbnZhbGlkIHBob25lIGZvcm1hdHwvXFxkezd9L2l8Zm9yYmlkfHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZWdleHAtbWVzc2FnZSA9IFwiSW52YWxpZCBwaG9uZSBmb3JtYXRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZWdleHAtcGF0dGVybiA9IFwiXFxkezd9XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmVnZXhwLW1vZGlmaWVycyA9IFwiaVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJlZ2V4cC1mb3JiaWQgPSBcImZvcmJpZFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJlZ2V4cC1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwUmVnRXhwKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrUmVnZXhwJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm5BbmRNb2RpZmllcnMgPSBzaG9ydCAmJiAvXFwvKC4qKVxcLyhcXHcqKSQvLmV4ZWMoc2hvcnRzWzFdKSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja1JlZ2V4cE1lc3NhZ2UnXSB8fCBubHMuXygnbWVzc2FnZV9yZWdleHAnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwYXR0ZXJuQW5kTW9kaWZpZXJzWzFdIHx8ICRhdHRyc1snY2hlY2tSZWdleHBQYXR0ZXJuJ10gfHwgJy4qJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGlmaWVycyA9IHBhdHRlcm5BbmRNb2RpZmllcnNbMl0gfHwgJGF0dHJzWydjaGVja1JlZ2V4cE1vZGlmaWVycyddIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9yYmlkID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tSZWdleHBGb3JiaWQnXSB8fCBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBtb2RpZmllcnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yZWdleHAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhwOiByZWdleHAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JiaWQ6IGZvcmJpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzRdIHx8ICRhdHRyc1snY2hlY2tSZWdleHBJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJlZ2V4cC5hY3RpdmUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmRpcih7J3JlZ2V4cCc6c2NvcGUuY2hlY2tzLnJlZ2V4cH0pO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgZW1haWwgZmllbGQgY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZW1haWwgPSBcIlZhbGlkIGVtYWlsIGZvcm1hdDogdXNlckBkb21haW4uY29tfHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1lbWFpbC1tZXNzYWdlID0gXCJWYWxpZCBlbWFpbCBmb3JtYXQ6IHVzZXJAZG9tYWluLmNvbVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWVtYWlsLWlmID0gXCJzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBFbWFpbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja0VtYWlsJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBubHMuXyhzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0VtYWlsTWVzc2FnZSddIHx8ICdtZXNzYWdlX2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yZWdleHAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhwOiAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/JC9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yYmlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tFbWFpbElmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucmVnZXhwLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBwYXNzd29yZCBjb21wYXJlIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXBhc3N3b3JkcyA9IFwicGFzczFfaWR8UGFzc3dvcmRzIGRvIG5vdCBtYXRjaHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcGFzc3dvcmRzLW1lc3NhZ2UgPSBcIkludmFsaWQgcGhvbmUgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcGFzc3dvcmRzLXJlcGVhdCA9IFwicGFzczFfaWRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1wYXNzd29yZHMtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cFBhc3N3b3JkcygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja1Bhc3N3b3JkcyddOyAvLyAncGFzczFpZHzQktCy0LXQtNC10L3QvdGL0LUg0L/QsNGA0L7Qu9C4INC+0YLQu9C40YfQsNGO0YLRgdGPJ1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGVhdCA9IHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrUGFzc3dvcmRzUmVwZWF0J107XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja1Bhc3N3b3Jkc01lc3NhZ2UnXSB8fCBubHMuXygnbWVzc2FnZV9wYXNzd29yZHMnKTtcblxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucGFzc3dvcmRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdDogcmVwZWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja1Bhc3N3b3Jkc0lmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucGFzc3dvcmRzLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBiYWNrZW5kIGFwaSBjaGVjay5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1hcGkgPSBcIi9hcGkvY2hlY2stZXhpc3Rpbmcve25hbWV9L3t2YWx1ZX18RW1haWwgZXhpc3RzfDUwMHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogLy8gICAgIGRhdGEtY2hlY2stYXBpLWNhbGxiYWNrID0gXCJkb1NvbWV0aGluZ1wiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stYXBpLW1lc3NhZ2UgPSBcIkludmFsaWQgcGhvbmUgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stYXBpLXVybCA9IFwiL2FwaS9jaGVjay1leGlzdGluZy97bmFtZX0ve3ZhbHVlfVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWFwaS1kZWxheSA9IFwiNTAwXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stYXBpLWlmID0gXCJzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogLy8gICAgIGRhdGEtY2hlY2stYXBpLWNhbGxiYWNrID0gXCJkb1NvbWV0aGluZ1wiXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBBcGlDYWxsKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrQXBpJ107IC8vICcvYXBpL2NoZWNrLWV4aXN0aW5nL3tuYW1lfS97dmFsdWV9fEVtYWlsIGV4aXN0c3w1MDAnXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tBcGlVcmwnXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrQXBpTWVzc2FnZSddO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrQXBpRGVsYXknXSB8fCAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjYWxsYmFjayA9ICRhdHRyc1snY2hlY2tBcGlDYWxsYmFjayddO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5hcGkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogZGVsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWN0aW9uYXJ5OiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tBcGlJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmFwaS5hY3RpdmUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJGlucHV0Lm9uKCdrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ2NsZWFuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3V0aWxzLnBhdGNoU2NvcGUoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJGFwcGx5KCk7IC8vIG9rXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheWVkQ2FsbCgnY2hlY2stYXBpLScgKyBmaWVsZC5uYW1lLCBkZWxheSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUN0cmwudmFsaWRhdGVGaWVsZChmaWVsZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXRpbHMucGF0Y2hTY29wZSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Njb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgY3VzdG9tIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWN1c3RvbSA9IFwidmFsaWRhdGVQcm9qZWN0VGl0bGV8UHJvamVjdCBUaXRsZSBzaG91bGQgYmUgc3dlZXR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWN1c3RvbS1tZXNzYWdlID0gXCJQcm9qZWN0IFRpdGxlIHNob3VsZCBiZSBzd2VldFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWN1c3RvbS1jYWxsYmFjayA9IFwidmFsaWRhdGVQcm9qZWN0VGl0bGVcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1jdXN0b20taWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIGNhbGxiYWNrLmNhbGwoJHNjb3BlLCB2YWx1ZSkgd2lsbCBiZSBjYWxsZWRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEN1c3RvbSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja0N1c3RvbSddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tDdXN0b21DYWxsYmFjayddO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tDdXN0b21NZXNzYWdlJ10gfHwgbmxzLl8oJ21lc3NhZ2VfY3VzdG9tJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmN1c3RvbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrQ3VzdG9tSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5jdXN0b20uYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkYXR0cnMsIGZ1bmN0aW9uKGF0dHIsIGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0ga2V5Lm1hdGNoKC9eY2hlY2soW0EtWl1bYS16XSopLyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVjayA9IG0gJiYgbVsxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrICYmICFmaWVsZC5jaGVja3NbY2hlY2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSWYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cElmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlcXVpcmVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBSZXF1aXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdMZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cExlbmd0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdMZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwTGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cEx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0dlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBHZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdHdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwR3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2V4cCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwUmVnRXhwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBFbWFpbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQYXNzd29yZHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFBhc3N3b3JkcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBcGknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cEFwaUNhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ3VzdG9tJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBDdXN0b20oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5kaXIoeydjaGVja3MnOiBzY29wZS5jaGVja3N9KTtcblxuICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChmaWVsZC5tb2RlbCwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd3ZSBhcmUgd2F0Y2hpbmc6ICcrdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvL2Zvcm1DdHJsLnZhbGlkYXRlRmllbGQoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3RhdGUnLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCdjbGVhbiBwcm9ncmVzcyB2YWxpZCBpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvcm1DdHJsLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxuXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcblxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJyxcblxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbCxcblxuICAgICAgICAgICAgICAgICAgICB2YWxpZDogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NsZWFuJywgLy8gY2xlYW58cHJvZ3Jlc3N8dmFsaWR8aW52YWxpZFxuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICBjaGVja3M6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuZGlyZWN0aXZlKCdmb3JtTWVzc2FnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiBbJ15eZm9ybVZhbGlkYXRvcicsICdmb3JtTWVzc2FnZSddLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbWInLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImZvcm0tbWVzc2FnZSB7e21iLnN0YXRlfX1cIiBkYXRhLW5nLXNob3c9XCIhIW1iLm1lc3NhZ2VcIiBkYXRhLW5nLWJpbmQtaHRtbD1cIm1iLm1lc3NhZ2VcIj48L2Rpdj4nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQCdcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKXtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybUN0cmwgPSBjb250cm9sbGVyc1swXSwgbWVzc2FnZUJveCA9IGNvbnRyb2xsZXJzWzFdO1xuICAgICAgICAgICAgICAgIGZvcm1DdHJsLnNldE1lc3NhZ2VCb3gobWVzc2FnZUJveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKCdhdXRvSGVpZ2h0JywgW2Z1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgdmFyIHJlc2l6ZVRleHRhcmVhID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICRlbGVtZW50LmNzcygnYm94LXNpemluZycpID09PSAnYm9yZGVyLWJveCcgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkZWxlbWVudC5jc3MoJ2JvcmRlclRvcFdpZHRoJykpICtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQucHJvcCgnc2Nyb2xsSGVpZ2h0JykgK1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkZWxlbWVudC5jc3MoJ2JvcmRlckJvdHRvbVdpZHRoJykpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnByb3AoJ3Njcm9sbEhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jc3MoJ2hlaWdodCcsIGhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC5vbignY2hhbmdlIGlucHV0IGN1dCBwYXN0ZSBkcm9wIGtleWRvd24nLCByZXNpemVUZXh0YXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmZhY3RvcnkoJ2RlbGF5ZWRDYWxsJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgICAgICAgdmFyIHRpbWVvdXRzID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlZCBuYW1lZCB0aW1lb3V0IHRoYXQgaXMgY2FuY2VsZWQgYW5kIHJlc2NoZWR1bGVkXG4gICAgICAgICAqIGlmIGZ1bmN0aW9uIHdhcyBjYWxsZWQgb25jZSBhZ2FpbiBiZWZvcmUgdGltZW91dCBoYXBwZW5lZC5cbiAgICAgICAgICogSGFuZHkgZm9yIGZpZWxkIGNoZWNrcyB3aGlsZSB1c2VyIHR5cGVzIGluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSB0aW1lb3V0XG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbElkLCBkZWxheSwgY2FsbGJhY2spe1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHRpbWVvdXRzW2NhbGxJZF07XG4gICAgICAgICAgICBpZiAoaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKGhhbmRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aW1lb3V0c1tjYWxsSWRdID0gJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aW1lb3V0c1tjYWxsSWRdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5jb25maWcoWydubHNQcm92aWRlcicsIGZ1bmN0aW9uKG5sc1Byb3ZpZGVyKXtcblxuICAgICAgICAvLyBBZGRpbmcgYSB0cmFuc2xhdGlvbiB0YWJsZSBmb3IgdGhlIEVuZ2xpc2ggbGFuZ3VhZ2VcbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdlbi1VUycsIHtcbiAgICAgICAgICAgICdtZXNzYWdlX3JlcXVpcmVkJzogJ1JlcXVpcmVkIEZpZWxkJyxcbiAgICAgICAgICAgICdtZXNzYWdlX2xlbmd0aCc6ICdUaGUgbGVuZ3RoIG9mIHRoaXMgdmFsdWUgc2hvdWxkIGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9IHN5bWJvbHMnLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmFuZ2UnOiAnVGhlIHZhbHVlIHNob3VsZCBiZSBiZXR3ZWVuIHttaW59IGFuZCB7bWF4fScsXG4gICAgICAgICAgICAnbWVzc2FnZV9sdCc6ICdUaGUgdmFsdWUgc2hvdWxkIGJlIGxvd2VyIHRoYW4ge21heH0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGUnOiAnVGhlIHZhbHVlIHNob3VsZCBiZSBsb3dlciB0aGFuIHttYXh9IG9yIGVxdWFsJyxcbiAgICAgICAgICAgICdtZXNzYWdlX2d0JzogJ1RoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59JyxcbiAgICAgICAgICAgICdtZXNzYWdlX2dlJzogJ1RoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59IG9yIGVxdWFsJyxcbiAgICAgICAgICAgICdtZXNzYWdlX3JlZ2V4cCc6ICdJbnZhbGlkIGZvcm1hdCcsXG4gICAgICAgICAgICAnbWVzc2FnZV9lbWFpbCc6ICdWYWxpZCBlbWFpbCBmb3JtYXQ6IHVzZXJAZG9tYWluLmNvbScsXG4gICAgICAgICAgICAnbWVzc2FnZV9wYXNzd29yZHMnOiAnUGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcsXG4gICAgICAgICAgICAnbWVzc2FnZV9jdXN0b20nOiAnSW52YWxpZCB2YWx1ZSdcblxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5sc1Byb3ZpZGVyLnNldFRyYW5zbGF0aW9ucygncnUtUlUnLCB7XG4gICAgICAgICAgICAnbWVzc2FnZV9yZXF1aXJlZCc6ICfQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LUnLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGVuZ3RoJzogJ9CU0LvQuNC90LAg0LfQvdCw0YfQtdC90LjRjyDQtNC+0LvQttC90LAg0LHRi9GC0Ywg0L7RgiB7bWlufSDQtNC+IHttYXh9INGB0LjQvNCy0L7Qu9C+0LInLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmFuZ2UnOiAn0JfQvdCw0YfQtdC90LjQtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LIg0LTQuNCw0L/QsNC30L7QvdC1INC+0YIge21pbn0g0LTQviB7bWF4fScsXG4gICAgICAgICAgICAnbWVzc2FnZV9sdCc6ICfQl9C90LDRh9C10L3QuNC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQvNC10L3RjNGI0LUge21heH0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGUnOiAn0JfQvdCw0YfQtdC90LjQtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LzQtdC90YzRiNC1INC40LvQuCDRgNCw0LLQvdC+IHttYXh9JyxcbiAgICAgICAgICAgICdtZXNzYWdlX2d0JzogJ9CX0L3QsNGH0LXQvdC40LUg0LTQvtC70LbQvdC+INCx0YvRgtGMINCx0L7Qu9GM0YjQtSB7bWlufScsXG4gICAgICAgICAgICAnbWVzc2FnZV9nZSc6ICfQl9C90LDRh9C10L3QuNC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQsdC+0LvRjNGI0LUg0LjQu9C4INGA0LDQstC90L4ge21pbn0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmVnZXhwJzogJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNC+0YDQvNCw0YInLFxuICAgICAgICAgICAgJ21lc3NhZ2VfZW1haWwnOiAn0KTQvtGA0LzQsNGCIGVtYWlsOiB1c2VyQGRvbWFpbi5jb20nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcGFzc3dvcmRzJzogJ9CS0LLQtdC00LXQvdC90YvQtSDQv9Cw0YDQvtC70Lgg0L7RgtC70LjRh9Cw0Y7RgtGB0Y8nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfY3VzdG9tJzogJ9Cd0LXQutC+0YDRgNC10LrRgtC90L7QtSDQt9C90LDRh9C10L3QuNC1J1xuICAgICAgICB9KTtcbiAgICB9XSlcbjtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLXBhZ2luYXRpb24nLCBbJ2NoYXlrYS1ubHMnLCAnY2hheWthLXV0aWxzJ10pXG4gICAgLmRpcmVjdGl2ZSgncGFnaW5hdGlvbicsIFsndXRpbHMnLCBmdW5jdGlvbih1dGlscyl7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6XG4gICAgICAgICAgICAnPHVsIGRhdGEtbmctc2hvdz1cInRvdGFsUGFnZXMgPiAxXCI+JyArXG4gICAgICAgICAgICAgICAgJzxsaSBkYXRhLW5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbXNcIiBjbGFzcz1cInt7aXRlbS5jbHN9fVwiPjxhIGRhdGEtbmctY2xpY2s9XCJpdGVtLmNsaWNrKCk7XCIgZGF0YS1uZy1iaW5kLWh0bWw9XCJpdGVtLnRleHRcIj48L2E+PC9saT4nK1xuICAgICAgICAgICAgJzwvdWw+JyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAnPScsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6ICc9PycsXG4gICAgICAgICAgICAgICAgdG90YWxQYWdlczogJz0/JyxcbiAgICAgICAgICAgICAgICBwYWNrU2l6ZTogJz0/JyxcbiAgICAgICAgICAgICAgICBocmVmVGVtcGxhdGU6ICdAPycsXG4gICAgICAgICAgICAgICAgY2xpY2s6ICc9PycsXG4gICAgICAgICAgICAgICAgb3JkZXI6ICdAJ1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlKXtcblxuICAgICAgICAgICAgICAgICRzY29wZS5zdGF0ZSA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSA9ICRzY29wZS5jdXJyZW50UGFnZSB8fCAxO1xuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFBhZ2VzID0gJHNjb3BlLnRvdGFsUGFnZXMgfHwgMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFja1NpemUgPSAkc2NvcGUucGFja1NpemUgfHwgMTA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhyZWZUZW1wbGF0ZSA9ICRzY29wZS5ocmVmVGVtcGxhdGUgfHwgJy9wYWdlLzwlPSBwYWdlICU+JztcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS5vcmRlciA9ICRzY29wZS5vcmRlcj9cbiAgICAgICAgICAgICAgICAvLyAgICAkc2NvcGUub3JkZXIuc3BsaXQoL1xccysvKTpcbiAgICAgICAgICAgICAgICAvLyAgICBbJ3ByZXZpb3VzJywgJ2ZpcnN0JywgJ3Jld2luZCcsICdwYWdlcycsICdmb3J3YXJkJywgJ2xhc3QnLCAnbmV4dCddO1xuXG4gICAgICAgICAgICAgICAgaWYoISRzY29wZS5jbGljayl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGljayA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdQYWdpbmF0aW9uLmN1cnJlbnRQYWdlJywgcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwYWdlICE9PSAkc2NvcGUuY3VycmVudFBhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnUGFnaW5hdGlvbi5wYWdlQ2hhbmdlZCcsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldCBjdXJyZW50IHBhZ2VcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fSB2YWxcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2x9IHJlbmRlclxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRDdXJyZW50UGFnZSA9IGZ1bmN0aW9uKHZhbCwgcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICBpZihyZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCBjdXJyZW50IHBhZ2VcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfG51bWJlcn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXQgdG90YWwgYW1vdW50IG9mIHBhZ2VzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHJlbmRlclxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRUb3RhbFBhZ2VzID0gZnVuY3Rpb24odmFsLCByZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQYWdlcyA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgdG90YWwgYW1vdW50IG9mIHBhZ2VzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7KnxudW1iZXJ9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFRvdGFsUGFnZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldCBudW1iZXIgb2YgcGFnZXMgYmV0d2VlbiBbLi4uXVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHZhbFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSByZW5kZXJcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0UGFja1NpemUgPSBmdW5jdGlvbih2YWwsIHJlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWNrU2l6ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgbnVtYmVyIG9mIHBhZ2VzIGJldHdlZW4gWy4uLl1cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7KnxudW1iZXJ9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFBhY2tTaXplID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5wYWNrU2l6ZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0IGhyZWYgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWxcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcmVuZGVyXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldEhyZWZUZW1wbGF0ZSA9IGZ1bmN0aW9uKHZhbCwgcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmhyZWZUZW1wbGF0ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgaHJlZiB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp8c3RyaW5nfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRIcmVmVGVtcGxhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmhyZWZUZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHBhZ2UgaHJlZlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0SHJlZiA9IGZ1bmN0aW9uKHBhZ2Upe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPj0gMSAmJiBwYWdlIDw9ICRzY29wZS5nZXRUb3RhbFBhZ2VzKCkgJiYgJHNjb3BlLmdldEhyZWZUZW1wbGF0ZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy50ZW1wbGF0ZSgkc2NvcGUuZ2V0SHJlZlRlbXBsYXRlKCksIHtwYWdlOiBwYWdlfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMnO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdlbmVyYXRlIHBhZ2UgbmF2IGxpbmsgaXRlbVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdGV4dFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHt7cGFnZTogTnVtYmVyLCB0ZXh0OiAqLCBocmVmOiAqLCBjbHM6IHN0cmluZywgY2xpY2s6IEZ1bmN0aW9ufX1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0SXRlbSA9IGZ1bmN0aW9uKHBhZ2UsIHRleHQpe1xuXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBwYXJzZUludChwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQgfHwgcGFnZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPT09ICRzY29wZS5nZXRDdXJyZW50UGFnZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9ICdhY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPCAxIHx8IHBhZ2UgPiAkc2NvcGUuZ2V0VG90YWxQYWdlcygpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9ICdkaXNhYmxlZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAkc2NvcGUuZ2V0SHJlZihwYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogY2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFnZSA+IDAgJiYgcGFnZSA8PSAkc2NvcGUudG90YWxQYWdlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGljayhwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZW5lcmF0ZSBwYWdlIG5hdiBsaW5rIGl0ZW1zXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEl0ZW1zID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAkc2NvcGUuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhY2tTaXplID0gJHNjb3BlLmdldFBhY2tTaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gJHNjb3BlLmdldFRvdGFsUGFnZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhY2tTdGFydCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWNrRmluaXNoID0gdG90YWxQYWdlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgaWYocGFja1NpemUgPCB0b3RhbFBhZ2VzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2tTdGFydCA9IGN1cnJlbnQgLSBNYXRoLmZsb29yKChwYWNrU2l6ZSAtMSkvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFja0ZpbmlzaCA9IGN1cnJlbnQgKyBNYXRoLmNlaWwoKHBhY2tTaXplIC0xKS8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhY2tTdGFydDwxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAxIC0gcGFja1N0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFja0ZpbmlzaD50b3RhbFBhZ2VzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB0b3RhbFBhZ2VzIC0gcGFja0ZpbmlzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2tTdGFydCs9b2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFja0ZpbmlzaCs9b2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogIFsncHJldmlvdXMnLCAnZmlyc3QnLCAncmV3aW5kJywgJ3BhZ2VzJywgJ2ZvcndhcmQnLCAnbGFzdCcsICduZXh0J107XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShjdXJyZW50LTEsICcmbGFycjsnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcnN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFja1N0YXJ0ID4gMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCRzY29wZS5nZXRJdGVtKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXdpbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYWNrU3RhcnQgPiAyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJHNjb3BlLmdldEl0ZW0ocGFja1N0YXJ0IC0gMSwgJy4uLicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IHBhY2tTdGFydDsgaSA8PSBwYWNrRmluaXNoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9yd2FyZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvdGFsUGFnZXMgLSBwYWNrRmluaXNoID49IDIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShwYWNrRmluaXNoICsgMSwgJy4uLicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsYXN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodG90YWxQYWdlcyA+IHBhY2tGaW5pc2gpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbSh0b3RhbFBhZ2VzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJHNjb3BlLmdldEl0ZW0oY3VycmVudCsxLCAnJnJhcnI7JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBSZW5kZXIgcGFnaW5hdGlvblxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSAkc2NvcGUuZ2V0SXRlbXMoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSAkc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJ25sc1Byb3ZpZGVyJywgZnVuY3Rpb24obmxzUHJvdmlkZXIpe1xuXG4gICAgICAgIC8vIEFkZGluZyBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciB0aGUgRW5nbGlzaCBsYW5ndWFnZVxuICAgICAgICBubHNQcm92aWRlci5zZXRUcmFuc2xhdGlvbnMoJ2VuLVVTJywge1xuICAgICAgICAgICAgJ25leHQnOiAnTmV4dCcsXG4gICAgICAgICAgICAncHJldmlvdXMnOiAnUHJldmlvdXMnLFxuICAgICAgICAgICAgJ25leHRfcGFnZSc6ICdOZXh0IHBhZ2UnLFxuICAgICAgICAgICAgJ3ByZXZpb3VzX3BhZ2UnOiAnUHJldmlvdXMgUGFnZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdydS1SVScsIHtcbiAgICAgICAgICAgICduZXh0JzogJ9Ch0LvQtdC00YPRjtGJ0LDRjycsXG4gICAgICAgICAgICAncHJldmlvdXMnOiAn0J/RgNC10LTRi9C00YPRidCw0Y8nLFxuICAgICAgICAgICAgJ25leHRfcGFnZSc6ICfQodC70LXQtNGD0Y7RidCw0Y8g0YHRgtGA0LDQvdC40YbQsCcsXG4gICAgICAgICAgICAncHJldmlvdXNfcGFnZSc6ICfQn9GA0LXQtNGL0LTRg9GJ0LDRjyDRgdGC0YDQsNC90LjRhtCwJ1xuICAgICAgICB9KTtcbiAgICB9XSlcbjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
