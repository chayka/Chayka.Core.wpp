"use strict";angular.module("chayka-utils",[]).factory("utils",["$window","$timeout","$compile",function($window,$timeout,$compile){var Chayka=$window.Chayka||{};return Chayka.Utils=Chayka.Utils||{declare:function(classname,parent,implementation){for(var parts=classname.split("."),root=$window,part="",i=0;i<parts.length&&(part=parts[i],i!==parts.length-1);i++)root[part]=root[part]||{},root=root[part];return angular.isUndefined(implementation)&&(implementation=parent,parent=null),parent?parent.extend&&angular.isFunction(parent.extend)?root[part]=parent.extend(implementation):root[part]=angular.extend(parent,implementation):root[part]=implementation,root[part]},ensure:function(classname,extend){for(var parts=classname.split("."),root=$window,part="",i=0;i<parts.length;i++)part=parts[i],root[part]=root[part]||{},root=root[part];return extend&&angular.isObject(extend)&&angular.extend(root,extend),root},getItem:function(obj,key,defaultValue){void 0===defaultValue&&(defaultValue=null);var parts=(key+"").split(".");if(obj&&(angular.isObject(obj)||angular.isArray(obj))){for(var root=obj,i=0;i<parts.length;i++){var part=parts[i];if(!angular.isObject(root)&&!angular.isArray(root)||void 0===root[part])return defaultValue;root=root[part]}return root}return defaultValue},setObjectDefaults:function(obj,defaults){obj=obj||{};for(var key in defaults)defaults.hasOwnProperty(key)&&("object"==typeof defaults[key]?obj[key]=Chayka.Utils.setObjectDefaults(obj[key]||{},defaults[key]):void 0===obj[key]&&(obj[key]=defaults[key]));return obj},updateObject:function(obj,update){for(var property in obj)obj.hasOwnProperty(property)&&(void 0!==update[property]?obj[property]=null:delete obj[property]);return angular.extend(obj,update)},getHtmlParam:function($element,name,defaultValue){var value=$element.attr(name)||$element.attr("data-"+name)||$element.data(name);return void 0===value&&(value=defaultValue),value},template:function(tpl,params){return tpl.replace(/{([^}]+)}/g,function(all,param){return params[param].toString()||""})},patchScope:function(scope){scope&&angular.isFunction(scope.$apply)&&$timeout(function(){scope.$apply()},0)},getResourceUrl:function(appId,resPath){return Chayka.Utils.getItem(Chayka.Core.appResFolderUrls,appId,"/no_app_url_found/")+resPath},recursiveDirectiveCompile:function(element,link){angular.isFunction(link)&&(link={post:link});var compiledContents,contents=element.contents().remove();return{pre:link&&link.pre?link.pre:null,post:function(scope,element){compiledContents||(compiledContents=$compile(contents)),compiledContents(scope,function(clone){element.append(clone)}),link&&link.post&&link.post.apply(null,arguments)}}},ordinal:function(input){var n=input%100;return 11>n||n>13?["st","nd","rd","th"][Math.min((n-1)%10,3)]:"th"}},Chayka.Utils.ensure("Chayka.Utils",Chayka.Utils),Chayka.Utils}]).directive("wpInclude",["utils",function(utils){return{restrict:"AE",templateUrl:function(element,attributes){var include=attributes.wpInclude||attributes["wp-include"]||attributes["data-wp-include"]||attributes.src,src=include,params=include.split(":"),appId=attributes.wpApp||attributes["wp-app"]||attributes["data-wp-app"]||attributes["app-id"];return params.length>1&&(appId=params[0],src=params[1]),utils.getResourceUrl(appId,src)}}}]).filter("ordinal",["utils",function(utils){return function(input){return input+utils.ordinal(input)}}]);
!function(window,angular,undefined){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){return value?(hiddenPre.innerHTML=value.replace(/</g,"&lt;"),hiddenPre.textContent):""}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/i,MAILTO_REGEXP=/^mailto:/i;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular);
"use strict";angular.module("chayka-buttons",["chayka-utils"]).provider("buttons",function(){var stdButtonClass="",buttons={setButtonClass:function(cls){stdButtonClass=cls},getButtonClass:function(){return stdButtonClass},$get:["utils",function(utils){return utils.ensure("Chayka.Buttons",buttons),buttons}]};return buttons});
"use strict";angular.module("chayka-nls",["chayka-utils"]).provider("nls",function(){var currentLocale="en-US",dictionaries={},nls={setLocale:function(locale){currentLocale=locale},getLocale:function(){return currentLocale},setTranslations:function(locale,translations){return dictionaries[locale]=dictionaries[locale]||{},angular.extend(dictionaries[locale],translations),dictionaries[locale]},getSupportedLocales:function(){return Object.keys(dictionaries)},_:function(str,locale){locale=locale||currentLocale||"en-US";var dictionary=dictionaries[locale]||{},defaultDictionary=dictionaries["en-US"]||{};return dictionary[str]||defaultDictionary[str]||str},$get:["utils",function(utils){return utils.ensure("Chayka.NLS",nls),nls}]};return nls}).filter("nls",["nls",function(nls){return function(str,locale){return nls._(str,locale)}}]).config(["nlsProvider",function(nlsProvider){var locale=window.Chayka&&window.Chayka.Core&&window.Chayka.Core.locale||"en-US";nlsProvider.setLocale(locale)}]);
"use strict";angular.module("chayka-spinners",["chayka-nls","chayka-utils"]).directive("spinner",[function(){return{restrict:"AE",scope:{spinner:"=",visible:"=?",message:"=?"},replace:!0,template:'<div class="chayka-spinner" data-ng-show="visible" data-ng-bind-html="message"></div>',controller:function($scope){$scope.show=function(message){$scope.message=message||$scope.message||"Loading...",$scope.visible=!0},$scope.hide=function(){$scope.visible=!1},$scope.spinner=$scope}}}]).directive("multiSpinner",[function(){return{restrict:"AE",scope:{spinner:"=multiSpinner"},replace:!0,template:'<div class="chayka-multi_spinner" data-ng-show="total"><div data-ng-repeat="(id, message) in messages"><div data-spinner="spinners[id]" data-message="message" data-visible="true"></div></div></div>',controller:function($scope){var ctrl={};$scope.spinners={},$scope.messages={},$scope.total=0,ctrl.show=function(message,id){return id||(id="spinner_"+$scope.total),$scope.messages[id]||($scope.messages[id]=message,$scope.total++),id},ctrl.hide=function(id){$scope.messages[id]&&($scope.total--,delete $scope.messages[id],$scope.spinners[id]=null)},$scope.spinner=ctrl}}}]).directive("generalSpinner",["utils","generalSpinner",function(utils){return{restrict:"AE",template:'<div class="chayka-general_spinner"><div data-multi-spinner="spinner"></div></div>',controller:function($scope){$scope.spinner=null;var $=angular.element;$(document).on("Chayka.Spinners.show",function(e,message,id){$scope.spinner&&($scope.spinner.show(message,id),utils.patchScope($scope))}),$(document).on("Chayka.Spinners.hide",function(e,id){$scope.spinner&&($scope.spinner.hide(id),utils.patchScope($scope))})}}}]).factory("generalSpinner",["utils",function(utils){var $=angular.element;return utils.ensure("Chayka.Spinners",{show:function(message,id){$(document).trigger("Chayka.Spinners.show",[message,id])},hide:function(id){$(document).trigger("Chayka.Spinners.hide",[id])}})}]);
"use strict";angular.module("chayka-ajax",["chayka-modals","chayka-spinners"]).factory("ajax",["$window","$http","$timeout","modals","generalSpinner","utils",function($window,$http,$timeout,modals,generalSpinner,utils){var Chayka=(angular.element,$window.Chayka||{}),ajax=Chayka.Ajax=Chayka.Ajax||{errorHandlers:{},addErrorHandler:function(id,handler,errorCode){errorCode=errorCode||null,ajax.errorHandlers[id]={code:errorCode,handler:handler}},removeErrorHandler:function(id){ajax.errorHandlers[id]=null},handleError:function(code,message,payload){var res=!1;for(var id in ajax.errorHandlers)if(ajax.errorHandlers.hasOwnProperty(id)){var reg=ajax.errorHandlers[id];if(reg&&(!reg.code||reg.code===code)&&(res=res||reg.handler(code,message,payload)))break}return res},handleErrors:function(data){if(!data)return{empty_response:"Empty response"};if("mass_errors"===data.code){for(var code in data.message)data.message.hasOwnProperty(code)&&ajax.handleError(code,data.message[code],data.payload)&&delete data.message[code];return data.message}var errors={};return ajax.handleError(data.code,data.message,data.payload)||(errors[data.code]=data.message),errors},processResponse:function(response,defaultMessage){var message=defaultMessage||!1,code=1;if(!angular.isUndefined(response.payload))return response;if(!response||angular.isString(response)&&!response.length)message="Empty response";else if(angular.isString(response)){var m=response.match(/<body[^>]*>([\s\S]*)<\/body>/m);m=m?m:response.match(/<br\s*\/>\s*<b>[^<]+<\/b>\:\s*(.*)<br\s*\/>/m),message=m?m[1].trim():defaultMessage}return{code:code,message:message,payload:null}},spinnersUsed:0,prepare:function(options){var defaults={};options=options||{},options=angular.extend(defaults,options);var spinner=options.spinner;spinner||spinner===!1||(spinner=null);var spinnerId=options.spinnerId||"spinner",spinnerFieldId=options.spinnerFieldId,spinnerMessage=options.spinnerMessage||"Processing...",errorMessage=options.errorMessage||"Operation failed",successMessage=options.successMessage,formValidator=options.formValidator,validateOnSend=angular.isUndefined(options.validateOnSend)?!0:options.validateOnSend,scope=options.scope,send=options.send,success=options.success,error=options.error,complete=options.complete;spinnerId+=ajax.spinnersUsed++;var prepared={},sendHandler=function(){var result=!1;return formValidator&&validateOnSend&&!(!spinnerFieldId&&formValidator.validateFields()||spinnerFieldId&&formValidator.validateFieldById(spinnerId))?!1:(send&&angular.isFunction(send)&&(result=send()),result&&(spinner!==!1&&(spinner?spinner.show(spinnerMessage):spinnerFieldId&&formValidator?formValidator.setFieldState(spinnerFieldId,"progress",spinnerMessage):generalSpinner.show(spinnerMessage,spinnerId)),formValidator&&formValidator.clearMessage(),scope&&utils.patchScope(scope)),result)};prepared.send=sendHandler;var completeHandler=function(data,status,headers,config){spinner!==!1&&(spinner?spinner.hide():spinnerFieldId&&formValidator?formValidator.setFieldState(spinnerFieldId,"clean"):generalSpinner.hide(spinnerId)),complete&&angular.isFunction(complete)&&complete(data,status,headers,config)};prepared.complete=completeHandler;var errorHandler=function(data,status,headers,config){data=ajax.processResponse(data,errorMessage),completeHandler(data,status,headers,config);var errors=ajax.handleErrors(data),message=errorMessage;for(var i in errors)if(errors.hasOwnProperty(i)){message=errors[i]||errorMessage;break}formValidator?spinnerFieldId?formValidator.setFieldState(spinnerFieldId,"error",message):formValidator.showErrors(errors):message!==!1&&modals.alert(message),angular.isFunction(error)&&error(data,status,headers,config),scope&&utils.patchScope(scope)};prepared.error=errorHandler;var successHandler=function(data,status,headers,config){if(data=ajax.processResponse(data,errorMessage),data.code)errorHandler(data,status,headers,config);else{completeHandler(data,status,headers,config);var message=successMessage===!1?!1:data.message||successMessage;formValidator&&message&&formValidator.showMessage(message),success&&angular.isFunction(success)&&success(data,status,headers,config)}scope&&utils.patchScope(scope)};return prepared.success=successHandler,prepared},request:function(url,options){var data=options.data||null,method=options.method||"post",config=options.config||{},send=null;switch(method){case"get":send=function(){return $http.get(url,config)};break;case"delete":send=function(){return $http["delete"](url,config)};break;case"head":send=function(){return $http.head(url,config)};break;case"jsonp":send=function(){return $http.jsonp(url,config)};break;case"post":send=function(){return $http.post(url,data,config)};break;case"put":send=function(){return $http.put(url,data,config)};break;case"patch":send=function(){return $http.patch(url,data,config)}}options.send=send;var prepared=ajax.prepare(options),promise=prepared.send();return promise&&promise.success(prepared.success).error(prepared.error),promise},get:function(url,options,config){return options=options||{},options.method="get",options.config=config,ajax.request(url,options)},del:function(url,options,config){return options=options||{},options.method="delete",options.config=config,ajax.request(url,options)},head:function(url,options,config){return options=options||{},options.method="head",options.config=config,ajax.request(url,options)},jsonp:function(url,options,config){return options=options||{},options.method="jsonp",options.config=config,ajax.request(url,options)},post:function(url,data,options,config){return options=options||{},options.method="post",options.data=data,options.config=config,ajax.request(url,options)},put:function(url,data,options,config){return options=options||{},options.method="put",options.data=data,options.config=config,ajax.request(url,options)},patch:function(url,data,options,config){return options=options||{},options.method="patch",options.data=data,options.config=config,ajax.request(url,options)}};return ajax}]).directive("buttonAjaxRequest",["ajax","modals",function(ajax,modals){return{scope:{url:"@buttonAjaxRequest",postData:"=?post",confirm:"@?",formValidator:"=?validator"},link:function($scope,$element){var onSuccess=function(data){data.message&&modals.alert(data.message)},sendRequest=function(){var params={success:onSuccess};$scope.formValidator&&(params.formValidator=$scope.formValidator),$scope.postData?ajax.post($scope.url,$scope.postData,params):ajax.get($scope.url,params)};$element.click(function(e){e.preventDefault(),$scope.confirm?modals.confirm($scope.confirm,sendRequest):sendRequest()})}}}]);
"use strict";angular.module("chayka-modals",["chayka-nls","chayka-buttons","chayka-utils"]).provider("modals",function(){return{$get:["$window","nls","buttons","utils",function($window,nls,btn,utils){var modals=utils.ensure("Chayka.Modals",{queue:[],create:function(options){if(options.buttons&&angular.isObject(options.buttons)&&!angular.isArray(options.buttons)){var buttons=[];angular.forEach(options.buttons,function(button,text){button.text=text,buttons.push(button)}),options.buttons=buttons}var defaultOptions={},m=angular.extend(defaultOptions,options);return m},show:function(options){var m=modals.create(options);return modals.queue.push(m),m},alert:function(message,title,modalClass,callback){modalClass=modalClass||"modal_alert",modals.show({content:message,title:title||"",modalClass:modalClass,buttons:[{text:nls._("Ok"),click:callback}]})},confirm:function(message,callback,title){modals.show({content:message,title:title||"",modalClass:"modal_confirm",buttons:[{text:nls._("Yes"),click:callback},{text:nls._("No")}]})},close:function($event){$event&&$event.target!==$event.currentTarget||modals.queue.shift()},getButtonClass:function(button){var cls=[],buttonClass=btn.getButtonClass();return buttonClass&&cls.push(buttonClass),button&&button.cls&&cls.push(button.cls),cls.join(" ")}});return modals}]}}).directive("modalsManager",["modals","buttons",function(modals){return{restrict:"AE",controllerAs:"mm",bindToController:{},template:'<div id="chayka-modals" data-ng-show="mm.queue.length" class="ng-cloak chayka-modals" data-ng-cloak="">   <div class="chayka-modals-fader" data-ng-click="mm.close($event)">       <div data-ng-repeat="item in mm.queue | limitTo: 1" class="chayka-modals-modal">           <div class="modal_header">               <div class="modal_header-title">{{item.title | nls}}</div>               <div class="modal_header-close" data-ng-click="mm.close($event)">&times;</div>           </div>           <div class="modal_body">               <div class="modal_body-content" data-ng-bind-html="item.content"></div>           </div>           <div class="modal_buttons" data-ng-show="item.buttons && item.buttons.length">               <button data-ng-repeat="button in item.buttons" data-ng-click="button.persist || mm.close(); button.click && button.click();" class="{{mm.getButtonClass(button)}}">{{button.text | nls}}</button>           </div>       </div>   </div></div>',controller:function(){return{close:modals.close,queue:modals.queue,getButtonClass:modals.getButtonClass}}}}]).directive("modal",["modals",function(modals){return{restrict:"AE",transclude:!0,controllerAs:"m",scope:{modal:"=modal",title:"@?modalTitle",show:"@modalShow",buttons:"=?modalButtons",width:"@modalWidth",height:"@modalHeight",onClose:"&?onModalClose"},template:'<div class="chayka-modals ng-cloak" data-ng-show="m.isOpen">   <div class="chayka-modals-fader" data-ng-click="m.hide($event)">       <div class="chayka-modals-modal">           <div class="modal_header">               <div class="modal_header-title">{{m.title | nls}}</div>               <div class="modal_header-close" data-ng-click="m.hide($event)">&times;</div>           </div>           <div class="modal_body" data-ng-transclude></div>           <div class="modal_buttons" data-ng-show="m.buttons && m.buttons.length">               <button data-ng-repeat="button in buttons" data-ng-click="button.persist || m.hide(); button.click && button.click();" class="{{m.getButtonClass(button)}}">{{button.text | nls}}</button>           </div>       </div>   </div></div>',controller:function($scope,$element){var ctrl={isOpen:!1,title:"",buttons:[],show:function(){ctrl.isOpen=!0},hide:function($event){$event&&$event.target!==$event.currentTarget||(ctrl.isOpen=!1,$scope.onClose&&$scope.onClose())},setTitle:function(title){ctrl.title=title},setButtons:function(buttons){if(buttons&&angular.isObject(buttons)&&!angular.isArray(buttons)){var btns=[];angular.forEach(buttons,function(button,text){button.text=text,btns.push(button)}),buttons=btns}ctrl.buttons=$scope.buttons=buttons},getButtonClass:function(button){return modals.getButtonClass(button)}};return $scope.buttons&&ctrl.setButtons($scope.buttons),$scope.modal=ctrl,$scope.show&&ctrl.show(),$scope.height&&$element.css("height",$scope.height),$scope.width&&$element.css("width",$scope.width),ctrl}}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{Yes:"Yes",No:"No",Ok:"Ok"}),nlsProvider.setTranslations("ru-RU",{Yes:"Да",No:"Нет",Ok:"Ok"})}]);
"use strict";angular.module("chayka-forms",["ngSanitize","chayka-modals","chayka-nls","chayka-ajax"]).directive("formValidator",["$window","modals","ajax","utils",function($window,modals,ajax,utils){return{restrict:"AE",scope:{validator:"=?formValidator",scrollMargin:"@",scrollDuration:"@"},link:function($scope,$element){$scope.element=$element},controller:function($scope){var ctrl={scrollMargin:$scope.scrollMargin||50,scrollDuration:$scope.scrollMargin||500,fields:$scope.fields||{},messageBox:null,setMessageBox:function(msgBox){ctrl.messageBox=msgBox},showMessage:function(message,state){return ctrl.messageBox?(ctrl.messageBox.message=message,ctrl.messageBox.state=state||"",!0):(modals.alert(message,"",state),!1)},clearMessage:function(){return ctrl.messageBox?(ctrl.messageBox.message="",ctrl.messageBox.state="",!0):!1},addField:function(field){ctrl.fields[field.name]=field},setFieldState:function(field,state,message){angular.isString(field)&&!(field=ctrl.fields[field])||(field.valid="valid"===state||"clean"===state||"progress"===state,field.state=state,field.message=message||field.hint)},setFieldError:function(field,message){ctrl.setFieldState(field,"invalid",message)},clearFieldError:function(field){ctrl.setFieldState(field,"clear")},checkRequired:function(field){var c=field.checks.required;return!c.active||!!field.value},checkLength:function(field){var c=field.checks.length;return!c.active||!(c.max&&field.value.length>c.max||field.value.length<c.min)},checkRange:function(field){var c=field.checks.range,lower=c.min&&(c.minE&&field.value<c.min||!c.minE&&field.value<=c.min),greater=c.max&&(c.maxE&&field.value>c.max||!c.minE&&field.value>=c.max);return!c.active||!(lower||greater)},checkLt:function(field){var c=field.checks.lt;return!c.active||field.value<c.max},checkLe:function(field){var c=field.checks.le;return!c.active||field.value<=c.max},checkGt:function(field){var c=field.checks.gt;return!c.active||field.value>c.min},checkGe:function(field){var c=field.checks.ge;return!c.active||field.value>=c.min},checkRegexp:function(field){var c=field.checks.regexp,valid=c.regexp.test(field.value);return c.forbid&&(valid=!valid),!c.active||valid},checkPasswords:function(field){var c=field.checks.passwords,repeatField=ctrl.fields[c.repeat]||field;return!c.active||field.value===repeatField.value},checkApi:function(field){var c=field.checks.api,url=utils.template(c.url,{name:encodeURIComponent(field.name),value:encodeURIComponent(field.value)}),value=field.value+"";if(c.active){if(value in c.dictionary)return"valid"===c.dictionary[value]?ctrl.setFieldState(field,"valid",null):ctrl.setFieldState(field,"invalid",c.message),c.dictionary[value];c.dictionary[value]="progress",ajax.get(url,{spinner:$scope.spinner,spinnerFieldId:field.name,spinnerMessage:" ",showMessage:!1,formValidator:ctrl,errorMessage:c.message,validateOnSend:!1,scope:field,success:function(data){c.dictionary[value]="valid",ctrl.setFieldState(field,"valid",null)},error:function(data){c.dictionary[value]="invalid",c.message=c.message||"mass_errors"===data.code&&data.message[field.name]||data.message}})}return!c.active||c.dictionary[value]},checkCustom:function(field){var c=field.checks.custom,callback=c.callback;return!c.active||$scope.$parent[callback].call($scope,field.value)},validateField:function(field,silent){var state,valid=!0,message="",checks=field.checks;return field.active?(checks.required&&!ctrl.checkRequired(field)&&(valid=!1,message=checks.required.message),field.value&&angular.forEach(checks,function(c,check){if(valid){switch(check){case"length":valid=ctrl.checkLength(field);break;case"range":valid=ctrl.checkRange(field);break;case"lt":valid=ctrl.checkLt(field);break;case"le":valid=ctrl.checkLe(field);break;case"gt":valid=ctrl.checkGt(field);break;case"ge":valid=ctrl.checkGe(field);break;case"regexp":valid=ctrl.checkRegexp(field);break;case"passwords":valid=ctrl.checkPasswords(field)}valid||(message=c.message)}}),valid&&checks.custom&&(valid=ctrl.checkCustom(field),message=valid?"":checks.custom.message),state=valid?"valid":"invalid",valid&&checks.api&&(state=ctrl.checkApi(field),message="invalid"===state?checks.api.message:""),silent||ctrl.setFieldState(field,state,message),field.valid):!0},validateFieldById:function(fieldId,silent){var field=ctrl.fields[fieldId];return ctrl.validateField(field,silent)},validateFields:function(){var valid=!0,scrollTo=0;return angular.forEach(ctrl.fields,function(field){if(!ctrl.validateField(field)){var scrollPos=field.element.offset().top;(!scrollTo||scrollPos&&scrollTo>scrollPos)&&(scrollTo=scrollPos),valid=!1}}),!valid&&scrollTo&&ctrl.scrollTo(scrollTo),valid},scrollTo:function(scrollTo,duration){if(angular.isUndefined(duration)&&(duration=parseInt(ctrl.scrollDuration)||ctrl.scrollDuration),scrollTo-=parseInt(ctrl.scrollMargin),$window.jQuery){var $=$window.jQuery;(scrollTo<$window.pageYOffset||scrollTo>$window.pageYOffset+$($window).height())&&(duration?$window.jQuery("html, body").animate({scrollTop:scrollTo},duration):$window.jQuery("html, body").scrollTop(scrollTo))}},scrollUp:function(duration){ctrl.scrollTo($scope.element.offset().top,duration)},showErrors:function(errors){var scrollTo=0;angular.forEach(errors,function(message,key){var field=ctrl.fields[key];if(field){ctrl.setFieldState(field,"invalid",message);var scrollPos=field.element.offset().top;(!scrollTo||scrollPos&&scrollTo>scrollPos)&&(scrollTo=scrollPos)}else ctrl.showMessage(message,"error")}),scrollTo&&ctrl.scrollTo(scrollTo)},getFieldValues:function(){var values={};return angular.forEach(ctrl.fields,function(field){values[field]=ctrl.fields[field].value||""}),values}};return $scope.validator=ctrl,ctrl}}}]).directive("formField",["nls","delayedCall","utils",function(nls,delayedCall,utils){return{require:["^^formValidator","formField"],restrict:"AE",transclude:!0,controllerAs:"f",template:'<label>{{f.label|nls}}</label><div class="input {{f.state}}" data-ng-transclude></div><div class="message" data-ng-class="{error: !f.valid}" data-ng-bind-html="f.message"></div>',scope:{name:"@formField",label:"@",hint:"@",message:"@hint"},link:function($scope,$element,$attrs,controllers){function setupIf(){$attrs.checkIf&&$scope.$parent.$watch($attrs.checkIf,function(value){field.active=!!value})}function setupRequired(){var short=$attrs.checkRequired,shorts=short?short.split("|"):[],message=nls._(shorts[0]||$attrs.checkRequiredMessage||"message_required");field.checks.required={message:message,active:!0};var condition=shorts[1]||$attrs.checkRequiredIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.required.active=value})}function setupLength(){var short=$attrs.checkLength,shorts=short?short.split("|"):[],min=parseInt(shorts[1]||$attrs.checkLengthMin||0),max=parseInt(shorts[2]||$attrs.checkLengthMax||0),messageTemplate=nls._(shorts[0]||$attrs.checkLengthMessage||"message_length"),message=utils.template(messageTemplate,{min:min,max:max,label:field.label});field.checks.length={message:message,min:min,max:max,active:!0};var condition=shorts[3]||$attrs.checkLengthIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.length.active=value})}function setupRange(){var short=$attrs.checkRange,shorts=short?short.split("|"):[],minStr=shorts[1]||$attrs.checkRangeMin||0,minE=!!minStr.match(/^=/),min=minE?minStr.substr(1):minStr,maxStr=shorts[2]||$attrs.checkRangeMax||0,maxE=!!maxStr.match(/^=/),max=maxE?maxStr.substr(1):maxStr,format=shorts[3]||$attrs.checkRangeFormat||"int";switch(format){case"int":min=parseInt(min),max=parseInt(max);break;case"float":min=parseFloat(min),max=parseFloat(max)}var messageTemplate=shorts[0]||$attrs.checkRangeMessage||nls._("message_range"),message=utils.template(messageTemplate,{min:min,max:max,label:field.label});field.checks.range={message:message,min:min,minE:minE,max:max,maxE:maxE,active:!0};var condition=shorts[4]||$attrs.checkRangeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.range.active=value})}function setupLt(){var short=$attrs.checkLt,shorts=short?short.split("|"):[],max=shorts[1]||$attrs.checkLtMax||0,messageTemplate=shorts[0]||$attrs.checkLtMessage||nls._("message_lt"),message=utils.template(messageTemplate,{max:max,label:field.label}),format=shorts[2]||$attrs.checkLtFormat||"int";switch(format){case"int":max=parseInt(max);break;case"float":max=parseFloat(max)}field.checks.lt={message:message,max:max,active:!0};var condition=shorts[3]||$attrs.checkLtIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.lt.active=value})}function setupLe(){var short=$attrs.checkLe,shorts=short?short.split("|"):[],max=shorts[1]||$attrs.checkLeMax||0,messageTemplate=shorts[0]||$attrs.checkLeMessage||nls._("message_le"),message=utils.template(messageTemplate,{max:max,label:field.label}),format=shorts[2]||$attrs.checkLeFormat||"int";switch(format){case"int":max=parseInt(max);break;case"float":max=parseFloat(max)}field.checks.le={message:message,max:max,active:!0};var condition=shorts[3]||$attrs.checkLeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.le.active=value})}function setupGt(){var short=$attrs.checkGt,shorts=short?short.split("|"):[],min=shorts[1]||$attrs.checkGtMin||0,messageTemplate=shorts[0]||$attrs.checkGtMessage||nls._("message_gt"),message=utils.template(messageTemplate,{min:min,label:field.label}),format=shorts[2]||$attrs.checkGtFormat||"int";switch(format){case"int":min=parseInt(min);break;case"float":min=parseFloat(min)}field.checks.gt={message:message,min:min,active:!0};var condition=shorts[3]||$attrs.checkGtIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.gt.active=value})}function setupGe(){var short=$attrs.checkGe,shorts=short?short.split("|"):[],min=shorts[1]||$attrs.checkGeMin||0,messageTemplate=shorts[0]||$attrs.checkGeMessage||nls._("message_ge"),message=utils.template(messageTemplate,{min:min,label:field.label}),format=shorts[2]||$attrs.checkGeFormat||"int";switch(format){case"int":min=parseInt(min);break;case"float":min=parseFloat(min)}field.checks.ge={message:message,min:min,active:!0};var condition=shorts[3]||$attrs.checkGeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.ge.active=value})}function setupRegExp(){var short=$attrs.checkRegexp,shorts=short?short.split("|"):[],patternAndModifiers=short&&/\/(.*)\/(\w*)$/.exec(shorts[1])||[],message=shorts[0]||$attrs.checkRegexpMessage||nls._("message_regexp"),pattern=patternAndModifiers[1]||$attrs.checkRegexpPattern||".*",modifiers=patternAndModifiers[2]||$attrs.checkRegexpModifiers||"",forbid=shorts[2]||$attrs.checkRegexpForbid||!1,regexp=new RegExp(pattern,modifiers);field.checks.regexp={message:message,regexp:regexp,forbid:forbid,active:!0};var condition=shorts[4]||$attrs.checkRegexpIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.regexp.active=value})}function setupEmail(){var short=$attrs.checkEmail,shorts=short?short.split("|"):[],message=nls._(shorts[0]||$attrs.checkEmailMessage||"message_email");field.checks.regexp={message:message,regexp:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,forbid:!1,active:!0};var condition=shorts[1]||$attrs.checkEmailIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.regexp.active=value})}function setupPasswords(){var short=$attrs.checkPasswords,shorts=short?short.split("|"):[],repeat=shorts[0]||$attrs.checkPasswordsRepeat,message=shorts[1]||$attrs.checkPasswordsMessage||nls._("message_passwords");field.checks.passwords={message:message,repeat:repeat,active:!0};var condition=shorts[2]||$attrs.checkPasswordsIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.passwords.active=value})}function setupApiCall(){var short=$attrs.checkApi,shorts=short?short.split("|"):[],url=shorts[0]||$attrs.checkApiUrl,message=shorts[1]||$attrs.checkApiMessage,delay=shorts[2]||$attrs.checkApiDelay||0;field.checks.api={message:message,url:url,delay:delay,dictionary:{},active:!0};var condition=shorts[3]||$attrs.checkApiIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.api.active=value}),$input.on("keyup change",function(){formCtrl.setFieldState(field,"clean"),field.value&&delayedCall("check-api-"+field.name,delay,function(){formCtrl.validateField(field,!0)})})}function setupCustom(){var short=$attrs.checkCustom,shorts=short?short.split("|"):[],callback=shorts[0]||$attrs.checkCustomCallback,message=shorts[1]||$attrs.checkCustomMessage||nls._("message_custom");field.checks.custom={message:message,callback:callback,active:!0};var condition=shorts[2]||$attrs.checkCustomeIf;condition&&$scope.$parent.$watch(condition,function(value){field.checks.custom.active=value})}var formCtrl=controllers[0],field=controllers[1],$input=$element.find("[ng-model],[data-ng-model]"),inputType=$input.attr("type"),$oldLabel=$element.find(".input > label:first-child"),$newLabel=$element.find("> label");field.model=$input.attr("data-ng-model")||$input.attr("ng-model"),field.element=$element,$scope.label||"checkbox"===inputType||($scope.label=$oldLabel.text().replace(/\s*:\s*$/,""),angular.forEach($oldLabel.attributes,function(i,attr){var name=attr.name,value=attr.value;$newLabel.attr(name,value)}),$newLabel.addClass($oldLabel.attr("class")),$newLabel.text($scope.label),$oldLabel.remove()),field.label=$scope.label,field.name=$scope.name,field.message=$scope.message,$input.focus(function(){}),$input.blur(function(){field.value&&formCtrl.validateField(field,!1),utils.patchScope($scope)}),angular.forEach($attrs,function(attr,key){var m=key.match(/^check([A-Z][a-z]*)/),check=m&&m[1];if(check&&!field.checks[check])switch(check){case"If":setupIf();break;case"Required":setupRequired();break;case"Length":setupLength();break;case"Le":setupLe();break;case"Lt":setupLt();break;case"Ge":setupGe();break;case"Gt":setupGt();break;case"Range":setupRange();break;case"Regexp":setupRegExp();break;case"Email":setupEmail();break;case"Passwords":setupPasswords();break;case"Api":setupApiCall();break;case"Custom":setupCustom()}}),$scope.$parent.$watch(field.model,function(value){field.value=value}),$scope.$watch("state",function(value){$element.removeClass("clean progress valid invalid"),$element.addClass(value)}),formCtrl.addField(field)},controller:function($scope){return{name:"",label:"",message:"",value:null,valid:!0,state:"clean",active:!0,checks:{}}}}}]).directive("formMessage",function(){return{require:["^^formValidator","formMessage"],restrict:"AE",replace:!0,controllerAs:"mb",bindToController:!0,template:'<div class="form-message {{mb.state}}" data-ng-show="!!mb.message" data-ng-bind-html="mb.message"></div>',scope:{message:"@"},controller:function(){return{message:"",state:""}},link:function($scope,$element,attrs,controllers){var formCtrl=controllers[0],messageBox=controllers[1];formCtrl.setMessageBox(messageBox)}}}).directive("autoHeight",[function(){return{restrict:"A",link:function($scope,$element){var resizeTextarea=function(){var height="border-box"===$element.css("box-sizing")?parseInt($element.css("borderTopWidth"))+$element.prop("scrollHeight")+parseInt($element.css("borderBottomWidth")):$element.prop("scrollHeight");$element.css("height",height+"px")};$element.on("change input cut paste drop keydown",resizeTextarea)}}}]).factory("delayedCall",["$timeout",function($timeout){var timeouts={};return function(callId,delay,callback){var handle=timeouts[callId];handle&&$timeout.cancel(handle),timeouts[callId]=$timeout(function(){timeouts[callId]=null,callback()},delay)}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{message_required:"Required Field",message_length:"The length of this value should be between {min} and {max} symbols",message_range:"The value should be between {min} and {max}",message_lt:"The value should be lower than {max}",message_le:"The value should be lower than {max} or equal",message_gt:"The value should be greater than {min}",message_ge:"The value should be greater than {min} or equal",message_regexp:"Invalid format",message_email:"Valid email format: user@domain.com",message_passwords:"Passwords do not match",message_custom:"Invalid value"}),nlsProvider.setTranslations("ru-RU",{message_required:"Обязательное поле",message_length:"Длина значения должна быть от {min} до {max} символов",message_range:"Значение должно быть в диапазоне от {min} до {max}",message_lt:"Значение должно быть меньше {max}",message_le:"Значение должно быть меньше или равно {max}",message_gt:"Значение должно быть больше {min}",message_ge:"Значение должно быть больше или равно {min}",message_regexp:"Некорректный формат",message_email:"Формат email: user@domain.com",message_passwords:"Введенные пароли отличаются",message_custom:"Некорректное значение"})}]);
"use strict";angular.module("chayka-pagination",["chayka-nls","chayka-utils"]).directive("pagination",["utils",function(utils){return{restrict:"AE",template:'<ul data-ng-show="totalPages > 1"><li data-ng-repeat="item in items" class="{{item.cls}}"><a data-ng-click="item.click();" data-ng-bind-html="item.text"></a></li></ul>',scope:{pagination:"=",currentPage:"=?",totalPages:"=?",packSize:"=?",hrefTemplate:"@?",click:"=?",order:"@"},controller:function($scope){$scope.state="",$scope.currentPage=$scope.currentPage||1,$scope.totalPages=$scope.totalPages||0,$scope.packSize=$scope.packSize||10,$scope.hrefTemplate=$scope.hrefTemplate||"/page/<%= page %>",$scope.items=[],$scope.click||($scope.click=function(page){$scope.$emit("Pagination.currentPage",page),page!==$scope.currentPage&&$scope.$emit("Pagination.pageChanged",page)}),$scope.setCurrentPage=function(val,render){return $scope.currentPage=val,render&&$scope.render(),$scope},$scope.getCurrentPage=function(){return $scope.currentPage},$scope.setTotalPages=function(val,render){return $scope.totalPages=val,render&&$scope.render(),$scope},$scope.getTotalPages=function(){return $scope.totalPages},$scope.setPackSize=function(val,render){return $scope.packSize=val,render&&$scope.render(),$scope},$scope.getPackSize=function(){return $scope.packSize},$scope.setHrefTemplate=function(val,render){return $scope.hrefTemplate=val,render&&$scope.render(),$scope},$scope.getHrefTemplate=function(){return $scope.hrefTemplate},$scope.getHref=function(page){return page>=1&&page<=$scope.getTotalPages()&&$scope.getHrefTemplate()?utils.template($scope.getHrefTemplate(),{page:page}):"#"},$scope.getItem=function(page,text){page=parseInt(page),text=text||page;var cls="";return page===$scope.getCurrentPage()&&(cls="active"),(1>page||page>$scope.getTotalPages())&&(cls="disabled"),{page:page,text:text,href:$scope.getHref(page),cls:cls,click:function(){return page>0&&page<=$scope.totalPages&&$scope.click(page),!1}}},$scope.getItems=function(){var current=$scope.getCurrentPage(),packSize=$scope.getPackSize(),totalPages=$scope.getTotalPages(),packStart=1,packFinish=totalPages,items=[];if(totalPages>packSize){packStart=current-Math.floor((packSize-1)/2),packFinish=current+Math.ceil((packSize-1)/2);var offset=0;1>packStart&&(offset=1-packStart),packFinish>totalPages&&(offset=totalPages-packFinish),packStart+=offset,packFinish+=offset}return $scope.order.split(/\s+/).forEach(function(item){switch(item){case"previous":items.push($scope.getItem(current-1,"&larr;"));break;case"first":packStart>1&&items.push($scope.getItem(1));break;case"rewind":packStart>2&&items.push($scope.getItem(packStart-1,"..."));break;case"pages":for(var i=packStart;packFinish>=i;i++)items.push($scope.getItem(i));break;case"forward":totalPages-packFinish>=2&&items.push($scope.getItem(packFinish+1,"..."));break;case"last":totalPages>packFinish&&items.push($scope.getItem(totalPages));break;case"next":items.push($scope.getItem(current+1,"&rarr;"))}}),items},$scope.render=function(){$scope.items=$scope.getItems()},$scope.pagination=$scope}}}]).config(["nlsProvider",function(nlsProvider){nlsProvider.setTranslations("en-US",{next:"Next",previous:"Previous",next_page:"Next page",previous_page:"Previous Page"}),nlsProvider.setTranslations("ru-RU",{next:"Следующая",previous:"Предыдущая",next_page:"Следующая страница",previous_page:"Предыдущая страница"})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXlrYS11dGlscy5qcyIsImFuZ3VsYXItc2FuaXRpemUuanMiLCJjaGF5a2EtYnV0dG9ucy5qcyIsImNoYXlrYS1ubHMuanMiLCJjaGF5a2Etc3Bpbm5lcnMuanMiLCJjaGF5a2EtYWpheC5qcyIsImNoYXlrYS1tb2RhbHMuanMiLCJjaGF5a2EtZm9ybXMuanMiLCJjaGF5a2EtcGFnaW5hdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCIkdGltZW91dCIsIiRjb21waWxlIiwiQ2hheWthIiwiVXRpbHMiLCJkZWNsYXJlIiwiY2xhc3NuYW1lIiwicGFyZW50IiwiaW1wbGVtZW50YXRpb24iLCJwYXJ0cyIsInNwbGl0Iiwicm9vdCIsInBhcnQiLCJpIiwibGVuZ3RoIiwiaXNVbmRlZmluZWQiLCJleHRlbmQiLCJpc0Z1bmN0aW9uIiwiZW5zdXJlIiwiaXNPYmplY3QiLCJnZXRJdGVtIiwib2JqIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwidW5kZWZpbmVkIiwiaXNBcnJheSIsInNldE9iamVjdERlZmF1bHRzIiwiZGVmYXVsdHMiLCJoYXNPd25Qcm9wZXJ0eSIsInVwZGF0ZU9iamVjdCIsInVwZGF0ZSIsInByb3BlcnR5IiwiZ2V0SHRtbFBhcmFtIiwiJGVsZW1lbnQiLCJuYW1lIiwidmFsdWUiLCJhdHRyIiwiZGF0YSIsInRlbXBsYXRlIiwidHBsIiwicGFyYW1zIiwicmVwbGFjZSIsImFsbCIsInBhcmFtIiwidG9TdHJpbmciLCJwYXRjaFNjb3BlIiwic2NvcGUiLCIkYXBwbHkiLCJnZXRSZXNvdXJjZVVybCIsImFwcElkIiwicmVzUGF0aCIsIkNvcmUiLCJhcHBSZXNGb2xkZXJVcmxzIiwicmVjdXJzaXZlRGlyZWN0aXZlQ29tcGlsZSIsImVsZW1lbnQiLCJsaW5rIiwicG9zdCIsImNvbXBpbGVkQ29udGVudHMiLCJjb250ZW50cyIsInJlbW92ZSIsInByZSIsImNsb25lIiwiYXBwZW5kIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJvcmRpbmFsIiwiaW5wdXQiLCJuIiwiTWF0aCIsIm1pbiIsImRpcmVjdGl2ZSIsInV0aWxzIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsImF0dHJpYnV0ZXMiLCJpbmNsdWRlIiwic3JjIiwiZmlsdGVyIiwid2luZG93IiwiJFNhbml0aXplUHJvdmlkZXIiLCJ0aGlzIiwiJGdldCIsIiQkc2FuaXRpemVVcmkiLCJodG1sIiwiYnVmIiwiaHRtbFBhcnNlciIsImh0bWxTYW5pdGl6ZVdyaXRlciIsInVyaSIsImlzSW1hZ2UiLCJ0ZXN0Iiwiam9pbiIsInNhbml0aXplVGV4dCIsImNoYXJzIiwid3JpdGVyIiwibm9vcCIsIm1ha2VNYXAiLCJzdHIiLCJpdGVtcyIsImhhbmRsZXIiLCJwYXJzZVN0YXJ0VGFnIiwidGFnIiwidGFnTmFtZSIsInJlc3QiLCJ1bmFyeSIsImxvd2VyY2FzZSIsImJsb2NrRWxlbWVudHMiLCJzdGFjayIsImxhc3QiLCJpbmxpbmVFbGVtZW50cyIsInBhcnNlRW5kVGFnIiwib3B0aW9uYWxFbmRUYWdFbGVtZW50cyIsInZvaWRFbGVtZW50cyIsInB1c2giLCJhdHRycyIsIkFUVFJfUkVHRVhQIiwibWF0Y2giLCJkb3VibGVRdW90ZWRWYWx1ZSIsInNpbmdsZVF1b3RlZFZhbHVlIiwidW5xdW90ZWRWYWx1ZSIsImRlY29kZUVudGl0aWVzIiwic3RhcnQiLCJwb3MiLCJlbmQiLCJpbmRleCIsInRleHQiLCJzcGVjaWFsRWxlbWVudHMiLCJSZWdFeHAiLCJDT01NRU5UX1JFR0VYUCIsIkNEQVRBX1JFR0VYUCIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImNvbW1lbnQiLCJzdWJzdHJpbmciLCJET0NUWVBFX1JFR0VYUCIsIkJFR0lOR19FTkRfVEFHRV9SRUdFWFAiLCJFTkRfVEFHX1JFR0VYUCIsIkJFR0lOX1RBR19SRUdFWFAiLCJTVEFSVF9UQUdfUkVHRVhQIiwiJHNhbml0aXplTWluRXJyIiwiaGlkZGVuUHJlIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJlbmNvZGVFbnRpdGllcyIsIlNVUlJPR0FURV9QQUlSX1JFR0VYUCIsImhpIiwiY2hhckNvZGVBdCIsImxvdyIsIk5PTl9BTFBIQU5VTUVSSUNfUkVHRVhQIiwidXJpVmFsaWRhdG9yIiwiaWdub3JlIiwib3V0IiwiYmluZCIsInZhbGlkRWxlbWVudHMiLCJmb3JFYWNoIiwibGtleSIsInZhbGlkQXR0cnMiLCJ1cmlBdHRycyIsIiQkbWluRXJyIiwib3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzIiwib3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cyIsInN2Z0VsZW1lbnRzIiwiaHRtbEF0dHJzIiwic3ZnQXR0cnMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwcm92aWRlciIsIiRzYW5pdGl6ZSIsIkxJTktZX1VSTF9SRUdFWFAiLCJNQUlMVE9fUkVHRVhQIiwidGFyZ2V0IiwiYWRkVGV4dCIsImFkZExpbmsiLCJ1cmwiLCJpc0RlZmluZWQiLCJyYXciLCJzdWJzdHIiLCJzdGRCdXR0b25DbGFzcyIsImJ1dHRvbnMiLCJzZXRCdXR0b25DbGFzcyIsImNscyIsImdldEJ1dHRvbkNsYXNzIiwiY3VycmVudExvY2FsZSIsImRpY3Rpb25hcmllcyIsIm5scyIsInNldExvY2FsZSIsImxvY2FsZSIsImdldExvY2FsZSIsInNldFRyYW5zbGF0aW9ucyIsInRyYW5zbGF0aW9ucyIsImdldFN1cHBvcnRlZExvY2FsZXMiLCJPYmplY3QiLCJrZXlzIiwiXyIsImRpY3Rpb25hcnkiLCJkZWZhdWx0RGljdGlvbmFyeSIsImNvbmZpZyIsIm5sc1Byb3ZpZGVyIiwic3Bpbm5lciIsInZpc2libGUiLCJtZXNzYWdlIiwiY29udHJvbGxlciIsIiRzY29wZSIsInNob3ciLCJoaWRlIiwiY3RybCIsInNwaW5uZXJzIiwibWVzc2FnZXMiLCJ0b3RhbCIsImlkIiwiJCIsIm9uIiwiZSIsInRyaWdnZXIiLCIkaHR0cCIsIm1vZGFscyIsImdlbmVyYWxTcGlubmVyIiwiYWpheCIsIkFqYXgiLCJlcnJvckhhbmRsZXJzIiwiYWRkRXJyb3JIYW5kbGVyIiwiZXJyb3JDb2RlIiwiY29kZSIsInJlbW92ZUVycm9ySGFuZGxlciIsImhhbmRsZUVycm9yIiwicGF5bG9hZCIsInJlcyIsInJlZyIsImhhbmRsZUVycm9ycyIsImVtcHR5X3Jlc3BvbnNlIiwiZXJyb3JzIiwicHJvY2Vzc1Jlc3BvbnNlIiwicmVzcG9uc2UiLCJkZWZhdWx0TWVzc2FnZSIsImlzU3RyaW5nIiwibSIsInRyaW0iLCJzcGlubmVyc1VzZWQiLCJwcmVwYXJlIiwib3B0aW9ucyIsInNwaW5uZXJJZCIsInNwaW5uZXJGaWVsZElkIiwic3Bpbm5lck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJzdWNjZXNzTWVzc2FnZSIsImZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0ZU9uU2VuZCIsInNlbmQiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb21wbGV0ZSIsInByZXBhcmVkIiwic2VuZEhhbmRsZXIiLCJyZXN1bHQiLCJ2YWxpZGF0ZUZpZWxkcyIsInZhbGlkYXRlRmllbGRCeUlkIiwic2V0RmllbGRTdGF0ZSIsImNsZWFyTWVzc2FnZSIsImNvbXBsZXRlSGFuZGxlciIsInN0YXR1cyIsImhlYWRlcnMiLCJlcnJvckhhbmRsZXIiLCJzaG93RXJyb3JzIiwiYWxlcnQiLCJzdWNjZXNzSGFuZGxlciIsInNob3dNZXNzYWdlIiwicmVxdWVzdCIsIm1ldGhvZCIsImdldCIsImhlYWQiLCJqc29ucCIsInB1dCIsInBhdGNoIiwicHJvbWlzZSIsImRlbCIsInBvc3REYXRhIiwiY29uZmlybSIsIm9uU3VjY2VzcyIsInNlbmRSZXF1ZXN0IiwiY2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsImJ0biIsInF1ZXVlIiwiY3JlYXRlIiwiYnV0dG9uIiwiZGVmYXVsdE9wdGlvbnMiLCJ0aXRsZSIsIm1vZGFsQ2xhc3MiLCJjYWxsYmFjayIsImNvbnRlbnQiLCJjbG9zZSIsIiRldmVudCIsImN1cnJlbnRUYXJnZXQiLCJzaGlmdCIsImJ1dHRvbkNsYXNzIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsInRyYW5zY2x1ZGUiLCJtb2RhbCIsIndpZHRoIiwiaGVpZ2h0Iiwib25DbG9zZSIsImlzT3BlbiIsInNldFRpdGxlIiwic2V0QnV0dG9ucyIsImJ0bnMiLCJjc3MiLCJZZXMiLCJObyIsIk9rIiwidmFsaWRhdG9yIiwic2Nyb2xsTWFyZ2luIiwic2Nyb2xsRHVyYXRpb24iLCJmaWVsZHMiLCJtZXNzYWdlQm94Iiwic2V0TWVzc2FnZUJveCIsIm1zZ0JveCIsInN0YXRlIiwiYWRkRmllbGQiLCJmaWVsZCIsInNldEZpZWxkRXJyb3IiLCJjbGVhckZpZWxkRXJyb3IiLCJjaGVja1JlcXVpcmVkIiwiYyIsInJlcXVpcmVkIiwiYWN0aXZlIiwiY2hlY2tMZW5ndGgiLCJtYXgiLCJjaGVja1JhbmdlIiwicmFuZ2UiLCJsb3dlciIsIm1pbkUiLCJncmVhdGVyIiwibWF4RSIsImNoZWNrTHQiLCJsdCIsImNoZWNrTGUiLCJsZSIsImNoZWNrR3QiLCJndCIsImNoZWNrR2UiLCJnZSIsImNoZWNrUmVnZXhwIiwicmVnZXhwIiwidmFsaWQiLCJmb3JiaWQiLCJjaGVja1Bhc3N3b3JkcyIsInBhc3N3b3JkcyIsInJlcGVhdEZpZWxkIiwicmVwZWF0IiwiY2hlY2tBcGkiLCJhcGkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjaGVja0N1c3RvbSIsImN1c3RvbSIsIiRwYXJlbnQiLCJjYWxsIiwidmFsaWRhdGVGaWVsZCIsInNpbGVudCIsImNoZWNrcyIsImNoZWNrIiwiZmllbGRJZCIsInNjcm9sbFRvIiwic2Nyb2xsUG9zIiwib2Zmc2V0IiwidG9wIiwiZHVyYXRpb24iLCJwYXJzZUludCIsImpRdWVyeSIsInBhZ2VZT2Zmc2V0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInNjcm9sbFVwIiwiZ2V0RmllbGRWYWx1ZXMiLCJ2YWx1ZXMiLCJkZWxheWVkQ2FsbCIsInJlcXVpcmUiLCJsYWJlbCIsImhpbnQiLCIkYXR0cnMiLCJjb250cm9sbGVycyIsInNldHVwSWYiLCIkd2F0Y2giLCJzZXR1cFJlcXVpcmVkIiwic2hvcnQiLCJzaG9ydHMiLCJjb25kaXRpb24iLCJzZXR1cExlbmd0aCIsIm1lc3NhZ2VUZW1wbGF0ZSIsInNldHVwUmFuZ2UiLCJtaW5TdHIiLCJtYXhTdHIiLCJmb3JtYXQiLCJwYXJzZUZsb2F0Iiwic2V0dXBMdCIsInNldHVwTGUiLCJzZXR1cEd0Iiwic2V0dXBHZSIsInNldHVwUmVnRXhwIiwicGF0dGVybkFuZE1vZGlmaWVycyIsImV4ZWMiLCJwYXR0ZXJuIiwibW9kaWZpZXJzIiwic2V0dXBFbWFpbCIsInNldHVwUGFzc3dvcmRzIiwic2V0dXBBcGlDYWxsIiwiZGVsYXkiLCIkaW5wdXQiLCJmb3JtQ3RybCIsInNldHVwQ3VzdG9tIiwiZmluZCIsImlucHV0VHlwZSIsIiRvbGRMYWJlbCIsIiRuZXdMYWJlbCIsIm1vZGVsIiwiYWRkQ2xhc3MiLCJmb2N1cyIsImJsdXIiLCJyZW1vdmVDbGFzcyIsInJlc2l6ZVRleHRhcmVhIiwicHJvcCIsInRpbWVvdXRzIiwiY2FsbElkIiwiaGFuZGxlIiwiY2FuY2VsIiwibWVzc2FnZV9yZXF1aXJlZCIsIm1lc3NhZ2VfbGVuZ3RoIiwibWVzc2FnZV9yYW5nZSIsIm1lc3NhZ2VfbHQiLCJtZXNzYWdlX2xlIiwibWVzc2FnZV9ndCIsIm1lc3NhZ2VfZ2UiLCJtZXNzYWdlX3JlZ2V4cCIsIm1lc3NhZ2VfZW1haWwiLCJtZXNzYWdlX3Bhc3N3b3JkcyIsIm1lc3NhZ2VfY3VzdG9tIiwicGFnaW5hdGlvbiIsImN1cnJlbnRQYWdlIiwidG90YWxQYWdlcyIsInBhY2tTaXplIiwiaHJlZlRlbXBsYXRlIiwib3JkZXIiLCJwYWdlIiwiJGVtaXQiLCJzZXRDdXJyZW50UGFnZSIsInZhbCIsInJlbmRlciIsImdldEN1cnJlbnRQYWdlIiwic2V0VG90YWxQYWdlcyIsImdldFRvdGFsUGFnZXMiLCJzZXRQYWNrU2l6ZSIsImdldFBhY2tTaXplIiwic2V0SHJlZlRlbXBsYXRlIiwiZ2V0SHJlZlRlbXBsYXRlIiwiZ2V0SHJlZiIsImhyZWYiLCJnZXRJdGVtcyIsImN1cnJlbnQiLCJwYWNrU3RhcnQiLCJwYWNrRmluaXNoIiwiZmxvb3IiLCJjZWlsIiwiaXRlbSIsIm5leHQiLCJwcmV2aW91cyIsIm5leHRfcGFnZSIsInByZXZpb3VzX3BhZ2UiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLFNBQVFDLE9BQU8sbUJBQ1ZDLFFBQVEsU0FBVSxVQUFXLFdBQVksV0FBWSxTQUFTQyxRQUFTQyxTQUFVQyxVQUM5RSxHQUFJQyxRQUFTSCxRQUFRRyxVQXlQckIsT0F2UEFBLFFBQU9DLE1BQVFELE9BQU9DLFFBWWxCQyxRQUFTLFNBQVNDLFVBQVdDLE9BQVFDLGdCQUlqQyxJQUFJLEdBSEFDLE9BQVFILFVBQVVJLE1BQU0sS0FDeEJDLEtBQU9YLFFBQ1BZLEtBQU8sR0FDSEMsRUFBSSxFQUFHQSxFQUFJSixNQUFNSyxTQUNyQkYsS0FBT0gsTUFBTUksR0FDVkEsSUFBTUosTUFBTUssT0FBUyxHQUZLRCxJQUs3QkYsS0FBS0MsTUFBUUQsS0FBS0MsVUFDbEJELEtBQU9BLEtBQUtDLEtBa0JoQixPQWZHZixTQUFRa0IsWUFBWVAsa0JBQ25CQSxlQUFpQkQsT0FDakJBLE9BQVMsTUFHVkEsT0FDSUEsT0FBT1MsUUFBVW5CLFFBQVFvQixXQUFXVixPQUFPUyxRQUMxQ0wsS0FBS0MsTUFBUUwsT0FBT1MsT0FBT1IsZ0JBRTNCRyxLQUFLQyxNQUFRZixRQUFRbUIsT0FBT1QsT0FBUUMsZ0JBR3hDRyxLQUFLQyxNQUFRSixlQUdWRyxLQUFLQyxPQVVoQk0sT0FBUSxTQUFTWixVQUFXVSxRQUl4QixJQUFJLEdBSEFQLE9BQVFILFVBQVVJLE1BQU0sS0FDeEJDLEtBQU9YLFFBQ1BZLEtBQU8sR0FDSEMsRUFBSSxFQUFHQSxFQUFJSixNQUFNSyxPQUFRRCxJQUM3QkQsS0FBT0gsTUFBTUksR0FDYkYsS0FBS0MsTUFBUUQsS0FBS0MsVUFDbEJELEtBQU9BLEtBQUtDLEtBTWhCLE9BSkdJLFNBQVVuQixRQUFRc0IsU0FBU0gsU0FDMUJuQixRQUFRbUIsT0FBT0ws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LE9BQU94RyxNQUFRd0csT0FBTzhQLFlBRzFCOVAsT0FBTzBPLFdBQWExTyxZQUkvQk4sUUFBUSxjQUFlLFNBQVNDLGFBRzdCQSxZQUFZVCxnQkFBZ0IsU0FDeEJtUixLQUFRLE9BQ1JDLFNBQVksV0FDWkMsVUFBYSxZQUNiQyxjQUFpQixrQkFHckI3USxZQUFZVCxnQkFBZ0IsU0FDeEJtUixLQUFRLFlBQ1JDLFNBQVksYUFDWkMsVUFBYSxxQkFDYkMsY0FBaUIiLCJmaWxlIjoiY2hheWthLWNvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdjaGF5a2EtdXRpbHMnLCBbXSlcbiAgICAuZmFjdG9yeSgndXRpbHMnLCBbJyR3aW5kb3cnLCAnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkd2luZG93LCAkdGltZW91dCwgJGNvbXBpbGUpe1xuICAgICAgICB2YXIgQ2hheWthID0gJHdpbmRvdy5DaGF5a2EgfHwge307XG5cbiAgICAgICAgQ2hheWthLlV0aWxzID0gQ2hheWthLlV0aWxzIHx8XG4gICAgICAgIHtcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlbmllbnQgd2F5IGRvIGRlZmluZSBzb21lIG9iamVjdCB3aXRoIGNvbXBsZXggbmFtZXMgbGlrZSBDaGF5a2EuQXV0aC5hYWFcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NuYW1lXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWNsYXJlOiBmdW5jdGlvbihjbGFzc25hbWUsIHBhcmVudCwgaW1wbGVtZW50YXRpb24pe1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGNsYXNzbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgIHZhciByb290ID0gJHdpbmRvdztcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9ICcnO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYoaSA9PT0gcGFydHMubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByb290W3BhcnRdID0gcm9vdFtwYXJ0XSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IHJvb3RbcGFydF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChpbXBsZW1lbnRhdGlvbikpe1xuICAgICAgICAgICAgICAgICAgICBpbXBsZW1lbnRhdGlvbiA9IHBhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihwYXJlbnQpe1xuICAgICAgICAgICAgICAgICAgICBpZihwYXJlbnQuZXh0ZW5kICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihwYXJlbnQuZXh0ZW5kKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290W3BhcnRdID0gcGFyZW50LmV4dGVuZChpbXBsZW1lbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFtwYXJ0XSA9IGFuZ3VsYXIuZXh0ZW5kKHBhcmVudCwgaW1wbGVtZW50YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RbcGFydF0gPSBpbXBsZW1lbnRhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFtwYXJ0XTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRW5zdXJlIHRoYXQgb2JqZWN0IGV4aXN0cywgZXh0ZW5kcyBpdCBpZiBuZWVkZWQgYW5kIHJldHVybnMgcmVmZXJlbmNlIHRvIGl0LlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc25hbWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBlbnN1cmU6IGZ1bmN0aW9uKGNsYXNzbmFtZSwgZXh0ZW5kKXtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBjbGFzc25hbWUuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9ICR3aW5kb3c7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnQgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgICAgICAgICAgICAgIHJvb3RbcGFydF0gPSByb290W3BhcnRdIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICByb290ID0gcm9vdFtwYXJ0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoZXh0ZW5kICYmIGFuZ3VsYXIuaXNPYmplY3QoZXh0ZW5kKSl7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHJvb3QsIGV4dGVuZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNvbWUgbGl0dGxlIGhlbHBlciB0byBnZXQgZGVmYXVsdCB2YWx1ZXMsXG4gICAgICAgICAgICAgKiBLZXkgY2FuIGJlIGNvbXBsZXggbGlrZSBDaGF5a2EuQXV0aC5hYWFcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gb2JqXG4gICAgICAgICAgICAgKiBAcGFyYW0ga2V5XG4gICAgICAgICAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24ob2JqLCBrZXksIGRlZmF1bHRWYWx1ZSl7XG4gICAgICAgICAgICAgICAgaWYoZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSAoa2V5KycnKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgICAgIGlmKG9iaiAmJiAoYW5ndWxhci5pc09iamVjdChvYmopIHx8IGFuZ3VsYXIuaXNBcnJheShvYmopKSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb290ID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChhbmd1bGFyLmlzT2JqZWN0KHJvb3QpIHx8IGFuZ3VsYXIuaXNBcnJheShyb290KSkgJiYgcm9vdFtwYXJ0XSE9PXVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdCA9IHJvb3RbcGFydF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBkZWZhdWx0IHZhbHVlcyBpZiBvYmplY3QgbWVtYmVycyBub3Qgc2V0XG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHt7fX0gb2JqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3t9fSBkZWZhdWx0c1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRPYmplY3REZWZhdWx0czogZnVuY3Rpb24ob2JqLCBkZWZhdWx0cyl7XG4gICAgICAgICAgICAgICAgb2JqID0gb2JqIHx8IHt9O1xuICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIGRlZmF1bHRzKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGVmYXVsdHMuaGFzT3duUHJvcGVydHkoa2V5KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgZGVmYXVsdHNba2V5XSA9PT0gJ29iamVjdCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gQ2hheWthLlV0aWxzLnNldE9iamVjdERlZmF1bHRzKG9ialtrZXldIHx8IHt9LCBkZWZhdWx0c1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKG9ialtrZXldID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtrZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlbW92ZSBhbGwgZXhpc3Rpbmcgb2JqZWN0IG1lbWJlcnMgYW5kIHNldCBuZXcgb25lcyBmcm9tIHVwZGF0ZS5cbiAgICAgICAgICAgICAqIFJldHVybnMgdXBkYXRlZCBvYmplY3RcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3t9fSBvYmpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7e319IHVwZGF0ZVxuICAgICAgICAgICAgICogQHJldHVybiB7e319XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHVwZGF0ZU9iamVjdDogZnVuY3Rpb24ob2JqLCB1cGRhdGUpe1xuICAgICAgICAgICAgICAgIGZvcih2YXIgcHJvcGVydHkgaW4gb2JqKXtcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KHByb3BlcnR5KSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih1cGRhdGVbcHJvcGVydHldICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtwcm9wZXJ0eV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5leHRlbmQob2JqLCB1cGRhdGUpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgcGFyYW0gZnJvbSBodG1sIHRhZ1xuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWxlbWVudFxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRIdG1sUGFyYW06IGZ1bmN0aW9uKCRlbGVtZW50LCBuYW1lLCBkZWZhdWx0VmFsdWUpe1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9ICRlbGVtZW50LmF0dHIobmFtZSkgfHwgJGVsZW1lbnQuYXR0cignZGF0YS0nK25hbWUpIHx8ICRlbGVtZW50LmRhdGEobmFtZSk7XG4gICAgICAgICAgICAgICAgaWYodmFsdWUgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNpbXBsZSB0ZW1wbGF0ZSBmdW5jdGlvbiwgcmVwbGFjZXMgJ3t2YXJ9JyB3aXRoIHZhciB2YWx1ZS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHBsXG4gICAgICAgICAgICAgKiBAcGFyYW0ge29ian0gcGFyYW1zXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0ZW1wbGF0ZTogZnVuY3Rpb24odHBsLCBwYXJhbXMpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cGwucmVwbGFjZSgveyhbXn1dKyl9L2csIGZ1bmN0aW9uKGFsbCwgcGFyYW0pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zW3BhcmFtXS50b1N0cmluZygpIHx8ICcnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBCdWxsZXQgcHJvb2Ygc2NvcGUuJGFwcGx5KCkgY2FsbGVyXG4gICAgICAgICAgICAgKiBAcGFyYW0gc2NvcGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcGF0Y2hTY29wZTogZnVuY3Rpb24oc2NvcGUpe1xuICAgICAgICAgICAgICAgIGlmKHNjb3BlICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihzY29wZS4kYXBwbHkpKXtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtzY29wZS4kYXBwbHkoKTt9LCAwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHJlc291cmNlIHVybCBmcm9tIHNwZWNpZmllZCBjaGF5a2EgYXBwbGljYXRpb24gKHBsdWdpbiBvciB0aGVtZSlcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gYXBwSWRcbiAgICAgICAgICAgICAqIEBwYXJhbSByZXNQYXRoXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRSZXNvdXJjZVVybDogZnVuY3Rpb24oYXBwSWQsIHJlc1BhdGgpe1xuICAgICAgICAgICAgICAgIHJldHVybiBDaGF5a2EuVXRpbHMuZ2V0SXRlbShDaGF5a2EuQ29yZS5hcHBSZXNGb2xkZXJVcmxzLCBhcHBJZCwgJy9ub19hcHBfdXJsX2ZvdW5kLycpICsgcmVzUGF0aDtcbiAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBNYW51YWxseSBjb21waWxlcyB0aGUgZWxlbWVudCwgZml4aW5nIHRoZSByZWN1cnNpb24gbG9vcC5cbiAgICAgICAgICAgICAqIEBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDQzMDY1NS9yZWN1cnNpb24taW4tYW5ndWxhci1kaXJlY3RpdmVzXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIGVsZW1lbnRcbiAgICAgICAgICAgICAqIEBwYXJhbSBbbGlua10gQSBwb3N0LWxpbmsgZnVuY3Rpb24sIG9yIGFuIG9iamVjdCB3aXRoIGZ1bmN0aW9uKHMpIHJlZ2lzdGVyZWQgdmlhIHByZSBhbmQgcG9zdCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb25zLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZWN1cnNpdmVEaXJlY3RpdmVDb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBsaW5rKXtcbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgdGhlIGxpbmsgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc0Z1bmN0aW9uKGxpbmspKXtcbiAgICAgICAgICAgICAgICAgICAgbGluayA9IHsgcG9zdDogbGluayB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEJyZWFrIHRoZSByZWN1cnNpb24gbG9vcCBieSByZW1vdmluZyB0aGUgY29udGVudHNcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSBlbGVtZW50LmNvbnRlbnRzKCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkQ29udGVudHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlOiAobGluayAmJiBsaW5rLnByZSkgPyBsaW5rLnByZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDb21waWxlcyBhbmQgcmUtYWRkcyB0aGUgY29udGVudHNcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBpbGUgdGhlIGNvbnRlbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighY29tcGlsZWRDb250ZW50cyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZWRDb250ZW50cyA9ICRjb21waWxlKGNvbnRlbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlLWFkZCB0aGUgY29tcGlsZWQgY29udGVudHMgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGVkQ29udGVudHMoc2NvcGUsIGZ1bmN0aW9uKGNsb25lKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbCB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uLCBpZiBhbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmsgJiYgbGluay5wb3N0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnBvc3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybiBvcmRpbmFsIHN1ZmZpeCBvZiBhbiBpbnRlZ2VyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ludH0gaW5wdXRcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb3JkaW5hbDogZnVuY3Rpb24oaW5wdXQpe1xuICAgICAgICAgICAgICAgIHZhciBuID0gaW5wdXQgJSAxMDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuIDwgMTEgfHwgbiA+IDEzKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBbJ3N0JywgJ25kJywgJ3JkJywgJ3RoJ11bTWF0aC5taW4oKG4gLSAxKSAlIDEwLCAzKV0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RoJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgIENoYXlrYS5VdGlscy5lbnN1cmUoJ0NoYXlrYS5VdGlscycsIENoYXlrYS5VdGlscyk7XG5cbiAgICAgICAgcmV0dXJuIENoYXlrYS5VdGlscztcbiAgICB9XSlcbiAgICAvKipcbiAgICAgKiBBbmd1bGFyIGRpcmVjdGl2ZSB0aGF0IGluY2x1ZGVzIGEgdGVtcGxhdGUgZnJvbSBXUCBwbHVnaW4gb3IgdGhlbWUuXG4gICAgICogWW91IGRvbid0IGhhdmUgdG8ga25vdyBwbHVnaW4gc2VydmVyIHBhdGggYnV0IGl0J3MgSUQgaW5zdGVhZFxuICAgICAqIFdvcmtzIGxpa2UgdGhhdDpcbiAgICAgKiAgICAgIDxkaXYgd3AtaW5jbHVkZT1cIkNoYXlrYS5Db3JlOm5nL3RlbXBsYXRlLmh0bWxcIj48L2Rpdj5cbiAgICAgKiAgICAgIDxkaXYgd3AtaW5jbHVkZT1cIm5nL3RlbXBsYXRlLmh0bWxcIiB3cC1hcHA9XCJDaGF5a2EuQ29yZVwiPjwvZGl2PlxuICAgICAqICAgICAgPHdwLWluY2x1ZGU9XCJDaGF5a2EuQ29yZTpuZy90ZW1wbGF0ZS5odG1sXCI+PC93cC1pbmNsdWRlPlxuICAgICAqICAgICAgPHdwLWluY2x1ZGU9XCJuZy90ZW1wbGF0ZS5odG1sXCIgYXBwLWlkPVwiQ2hheWthLkNvcmVcIj48L3dwLWluY2x1ZGU+XG4gICAgICovXG4gICAgLmRpcmVjdGl2ZSgnd3BJbmNsdWRlJywgWyd1dGlscycsIGZ1bmN0aW9uKHV0aWxzKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZXMpe1xuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlID0gYXR0cmlidXRlc1snd3BJbmNsdWRlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1snd3AtaW5jbHVkZSddIHx8XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ2RhdGEtd3AtaW5jbHVkZSddIHx8XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ3NyYyddO1xuICAgICAgICAgICAgICAgIHZhciBzcmMgPSBpbmNsdWRlLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSBpbmNsdWRlLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGFwcElkID0gYXR0cmlidXRlc1snd3BBcHAnXSB8fFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzWyd3cC1hcHAnXSB8fFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzWydkYXRhLXdwLWFwcCddIHx8XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbJ2FwcC1pZCddO1xuICAgICAgICAgICAgICAgIGlmKHBhcmFtcy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgICAgICAgICAgYXBwSWQgPSBwYXJhbXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHBhcmFtc1sxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmdldFJlc291cmNlVXJsKGFwcElkLCBzcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5maWx0ZXIoJ29yZGluYWwnLCBbJ3V0aWxzJywgZnVuY3Rpb24odXRpbHMpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpe1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0ICsgdXRpbHMub3JkaW5hbChpbnB1dCk7XG4gICAgICAgIH07XG4gICAgfV0pXG47IiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuMy4yMFxuICogKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHsndXNlIHN0cmljdCc7XG5cbi8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICpcbiAqICAgICBBbnkgY29tbWl0cyB0byB0aGlzIGZpbGUgc2hvdWxkIGJlIHJldmlld2VkIHdpdGggc2VjdXJpdHkgaW4gbWluZC4gICpcbiAqICAgQ2hhbmdlcyB0byB0aGlzIGZpbGUgY2FuIHBvdGVudGlhbGx5IGNyZWF0ZSBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMuICpcbiAqICAgICAgICAgIEFuIGFwcHJvdmFsIGZyb20gMiBDb3JlIG1lbWJlcnMgd2l0aCBoaXN0b3J5IG9mIG1vZGlmeWluZyAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgZmlsZSBpcyByZXF1aXJlZC4gICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAqICBEb2VzIHRoZSBjaGFuZ2Ugc29tZWhvdyBhbGxvdyBmb3IgYXJiaXRyYXJ5IGphdmFzY3JpcHQgdG8gYmUgZXhlY3V0ZWQ/ICpcbiAqICAgIE9yIGFsbG93cyBmb3Igc29tZW9uZSB0byBjaGFuZ2UgdGhlIHByb3RvdHlwZSBvZiBidWlsdC1pbiBvYmplY3RzPyAgICpcbiAqICAgICBPciBnaXZlcyB1bmRlc2lyZWQgYWNjZXNzIHRvIHZhcmlhYmxlcyBsaWtlcyBkb2N1bWVudCBvciB3aW5kb3c/ICAgICpcbiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovXG5cbnZhciAkc2FuaXRpemVNaW5FcnIgPSBhbmd1bGFyLiQkbWluRXJyKCckc2FuaXRpemUnKTtcblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ1Nhbml0aXplXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAjIG5nU2FuaXRpemVcbiAqXG4gKiBUaGUgYG5nU2FuaXRpemVgIG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbmFsaXR5IHRvIHNhbml0aXplIEhUTUwuXG4gKlxuICpcbiAqIDxkaXYgZG9jLW1vZHVsZS1jb21wb25lbnRzPVwibmdTYW5pdGl6ZVwiPjwvZGl2PlxuICpcbiAqIFNlZSB7QGxpbmsgbmdTYW5pdGl6ZS4kc2FuaXRpemUgYCRzYW5pdGl6ZWB9IGZvciB1c2FnZS5cbiAqL1xuXG4vKlxuICogSFRNTCBQYXJzZXIgQnkgTWlza28gSGV2ZXJ5IChtaXNrb0BoZXZlcnkuY29tKVxuICogYmFzZWQgb246ICBIVE1MIFBhcnNlciBCeSBKb2huIFJlc2lnIChlam9obi5vcmcpXG4gKiBPcmlnaW5hbCBjb2RlIGJ5IEVyaWsgQXJ2aWRzc29uLCBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlXG4gKiBodHRwOi8vZXJpay5lYWUubmV0L3NpbXBsZWh0bWxwYXJzZXIvc2ltcGxlaHRtbHBhcnNlci5qc1xuICpcbiAqIC8vIFVzZSBsaWtlIHNvOlxuICogaHRtbFBhcnNlcihodG1sU3RyaW5nLCB7XG4gKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7fSxcbiAqICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge30sXG4gKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XG4gKiB9KTtcbiAqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkc2FuaXRpemVcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiAgIFRoZSBpbnB1dCBpcyBzYW5pdGl6ZWQgYnkgcGFyc2luZyB0aGUgSFRNTCBpbnRvIHRva2Vucy4gQWxsIHNhZmUgdG9rZW5zIChmcm9tIGEgd2hpdGVsaXN0KSBhcmVcbiAqICAgdGhlbiBzZXJpYWxpemVkIGJhY2sgdG8gcHJvcGVybHkgZXNjYXBlZCBodG1sIHN0cmluZy4gVGhpcyBtZWFucyB0aGF0IG5vIHVuc2FmZSBpbnB1dCBjYW4gbWFrZVxuICogICBpdCBpbnRvIHRoZSByZXR1cm5lZCBzdHJpbmcsIGhvd2V2ZXIsIHNpbmNlIG91ciBwYXJzZXIgaXMgbW9yZSBzdHJpY3QgdGhhbiBhIHR5cGljYWwgYnJvd3NlclxuICogICBwYXJzZXIsIGl0J3MgcG9zc2libGUgdGhhdCBzb21lIG9ic2N1cmUgaW5wdXQsIHdoaWNoIHdvdWxkIGJlIHJlY29nbml6ZWQgYXMgdmFsaWQgSFRNTCBieSBhXG4gKiAgIGJyb3dzZXIsIHdvbid0IG1ha2UgaXQgdGhyb3VnaCB0aGUgc2FuaXRpemVyLiBUaGUgaW5wdXQgbWF5IGFsc28gY29udGFpbiBTVkcgbWFya3VwLlxuICogICBUaGUgd2hpdGVsaXN0IGlzIGNvbmZpZ3VyZWQgdXNpbmcgdGhlIGZ1bmN0aW9ucyBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgIGFuZFxuICogICBgaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0YCBvZiB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciBgJGNvbXBpbGVQcm92aWRlcmB9LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBodG1sIEhUTUwgaW5wdXQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTYW5pdGl6ZWQgSFRNTC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwic2FuaXRpemVFeGFtcGxlXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnc2FuaXRpemVFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzY2UnLCBmdW5jdGlvbigkc2NvcGUsICRzY2UpIHtcbiAgICAgICAgICAgICAkc2NvcGUuc25pcHBldCA9XG4gICAgICAgICAgICAgICAnPHAgc3R5bGU9XCJjb2xvcjpibHVlXCI+YW4gaHRtbFxcbicgK1xuICAgICAgICAgICAgICAgJzxlbSBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9XFwnUFdOM0QhXFwnXCI+Y2xpY2sgaGVyZTwvZW0+XFxuJyArXG4gICAgICAgICAgICAgICAnc25pcHBldDwvcD4nO1xuICAgICAgICAgICAgICRzY29wZS5kZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKCRzY29wZS5zbmlwcGV0KTtcbiAgICAgICAgICAgICB9O1xuICAgICAgICAgICB9XSk7XG4gICAgIDwvc2NyaXB0PlxuICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICBTbmlwcGV0OiA8dGV4dGFyZWEgbmctbW9kZWw9XCJzbmlwcGV0XCIgY29scz1cIjYwXCIgcm93cz1cIjNcIj48L3RleHRhcmVhPlxuICAgICAgIDx0YWJsZT5cbiAgICAgICAgIDx0cj5cbiAgICAgICAgICAgPHRkPkRpcmVjdGl2ZTwvdGQ+XG4gICAgICAgICAgIDx0ZD5Ib3c8L3RkPlxuICAgICAgICAgICA8dGQ+U291cmNlPC90ZD5cbiAgICAgICAgICAgPHRkPlJlbmRlcmVkPC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJiaW5kLWh0bWwtd2l0aC1zYW5pdGl6ZVwiPlxuICAgICAgICAgICA8dGQ+bmctYmluZC1odG1sPC90ZD5cbiAgICAgICAgICAgPHRkPkF1dG9tYXRpY2FsbHkgdXNlcyAkc2FuaXRpemU8L3RkPlxuICAgICAgICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRcIiZndDs8YnIvPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRcIj48L2Rpdj48L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICAgIDx0ciBpZD1cImJpbmQtaHRtbC13aXRoLXRydXN0XCI+XG4gICAgICAgICAgIDx0ZD5uZy1iaW5kLWh0bWw8L3RkPlxuICAgICAgICAgICA8dGQ+QnlwYXNzICRzYW5pdGl6ZSBieSBleHBsaWNpdGx5IHRydXN0aW5nIHRoZSBkYW5nZXJvdXMgdmFsdWU8L3RkPlxuICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJkZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQoKVwiJmd0O1xuJmx0Oy9kaXYmZ3Q7PC9wcmU+XG4gICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQtaHRtbD1cImRlbGliZXJhdGVseVRydXN0RGFuZ2Vyb3VzU25pcHBldCgpXCI+PC9kaXY+PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJiaW5kLWRlZmF1bHRcIj5cbiAgICAgICAgICAgPHRkPm5nLWJpbmQ8L3RkPlxuICAgICAgICAgICA8dGQ+QXV0b21hdGljYWxseSBlc2NhcGVzPC90ZD5cbiAgICAgICAgICAgPHRkPjxwcmU+Jmx0O2RpdiBuZy1iaW5kPVwic25pcHBldFwiJmd0Ozxici8+Jmx0Oy9kaXYmZ3Q7PC9wcmU+PC90ZD5cbiAgICAgICAgICAgPHRkPjxkaXYgbmctYmluZD1cInNuaXBwZXRcIj48L2Rpdj48L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICA8L3RhYmxlPlxuICAgICAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICBpdCgnc2hvdWxkIHNhbml0aXplIHRoZSBodG1sIHNuaXBwZXQgYnkgZGVmYXVsdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXNhbml0aXplIGRpdicpKS5nZXRJbm5lckh0bWwoKSkuXG4gICAgICAgICB0b0JlKCc8cD5hbiBodG1sXFxuPGVtPmNsaWNrIGhlcmU8L2VtPlxcbnNuaXBwZXQ8L3A+Jyk7XG4gICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgaW5saW5lIHJhdyBzbmlwcGV0IGlmIGJvdW5kIHRvIGEgdHJ1c3RlZCB2YWx1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXRydXN0IGRpdicpKS5nZXRJbm5lckh0bWwoKSkuXG4gICAgICAgICB0b0JlKFwiPHAgc3R5bGU9XFxcImNvbG9yOmJsdWVcXFwiPmFuIGh0bWxcXG5cIiArXG4gICAgICAgICAgICAgIFwiPGVtIG9ubW91c2VvdmVyPVxcXCJ0aGlzLnRleHRDb250ZW50PSdQV04zRCEnXFxcIj5jbGljayBoZXJlPC9lbT5cXG5cIiArXG4gICAgICAgICAgICAgIFwic25pcHBldDwvcD5cIik7XG4gICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgZXNjYXBlIHNuaXBwZXQgd2l0aG91dCBhbnkgZmlsdGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1kZWZhdWx0IGRpdicpKS5nZXRJbm5lckh0bWwoKSkuXG4gICAgICAgICB0b0JlKFwiJmx0O3Agc3R5bGU9XFxcImNvbG9yOmJsdWVcXFwiJmd0O2FuIGh0bWxcXG5cIiArXG4gICAgICAgICAgICAgIFwiJmx0O2VtIG9ubW91c2VvdmVyPVxcXCJ0aGlzLnRleHRDb250ZW50PSdQV04zRCEnXFxcIiZndDtjbGljayBoZXJlJmx0Oy9lbSZndDtcXG5cIiArXG4gICAgICAgICAgICAgIFwic25pcHBldCZsdDsvcCZndDtcIik7XG4gICAgIH0pO1xuXG4gICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgZWxlbWVudChieS5tb2RlbCgnc25pcHBldCcpKS5jbGVhcigpO1xuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuc2VuZEtleXMoJ25ldyA8YiBvbmNsaWNrPVwiYWxlcnQoMSlcIj50ZXh0PC9iPicpO1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtaHRtbC13aXRoLXNhbml0aXplIGRpdicpKS5nZXRJbm5lckh0bWwoKSkuXG4gICAgICAgICB0b0JlKCduZXcgPGI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC10cnVzdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLnRvQmUoXG4gICAgICAgICAnbmV3IDxiIG9uY2xpY2s9XCJhbGVydCgxKVwiPnRleHQ8L2I+Jyk7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1kZWZhdWx0IGRpdicpKS5nZXRJbm5lckh0bWwoKSkudG9CZShcbiAgICAgICAgIFwibmV3ICZsdDtiIG9uY2xpY2s9XFxcImFsZXJ0KDEpXFxcIiZndDt0ZXh0Jmx0Oy9iJmd0O1wiKTtcbiAgICAgfSk7XG4gICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uICRTYW5pdGl6ZVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyQkc2FuaXRpemVVcmknLCBmdW5jdGlvbigkJHNhbml0aXplVXJpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgIHZhciBidWYgPSBbXTtcbiAgICAgIGh0bWxQYXJzZXIoaHRtbCwgaHRtbFNhbml0aXplV3JpdGVyKGJ1ZiwgZnVuY3Rpb24odXJpLCBpc0ltYWdlKSB7XG4gICAgICAgIHJldHVybiAhL151bnNhZmUvLnRlc3QoJCRzYW5pdGl6ZVVyaSh1cmksIGlzSW1hZ2UpKTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBidWYuam9pbignJyk7XG4gICAgfTtcbiAgfV07XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplVGV4dChjaGFycykge1xuICB2YXIgYnVmID0gW107XG4gIHZhciB3cml0ZXIgPSBodG1sU2FuaXRpemVXcml0ZXIoYnVmLCBhbmd1bGFyLm5vb3ApO1xuICB3cml0ZXIuY2hhcnMoY2hhcnMpO1xuICByZXR1cm4gYnVmLmpvaW4oJycpO1xufVxuXG5cbi8vIFJlZ3VsYXIgRXhwcmVzc2lvbnMgZm9yIHBhcnNpbmcgdGFncyBhbmQgYXR0cmlidXRlc1xudmFyIFNUQVJUX1RBR19SRUdFWFAgPVxuICAgICAgIC9ePCgoPzpbYS16QS1aXSlbXFx3Oi1dKikoKD86XFxzK1tcXHc6LV0rKD86XFxzKj1cXHMqKD86KD86XCJbXlwiXSpcIil8KD86J1teJ10qJyl8W14+XFxzXSspKT8pKilcXHMqKFxcLz8pXFxzKig+PykvLFxuICBFTkRfVEFHX1JFR0VYUCA9IC9ePFxcL1xccyooW1xcdzotXSspW14+XSo+LyxcbiAgQVRUUl9SRUdFWFAgPSAvKFtcXHc6LV0rKSg/Olxccyo9XFxzKig/Oig/OlwiKCg/OlteXCJdKSopXCIpfCg/OicoKD86W14nXSkqKScpfChbXj5cXHNdKykpKT8vZyxcbiAgQkVHSU5fVEFHX1JFR0VYUCA9IC9ePC8sXG4gIEJFR0lOR19FTkRfVEFHRV9SRUdFWFAgPSAvXjxcXC8vLFxuICBDT01NRU5UX1JFR0VYUCA9IC88IS0tKC4qPyktLT4vZyxcbiAgRE9DVFlQRV9SRUdFWFAgPSAvPCFET0NUWVBFKFtePl0qPyk+L2ksXG4gIENEQVRBX1JFR0VYUCA9IC88IVxcW0NEQVRBXFxbKC4qPyldXT4vZyxcbiAgU1VSUk9HQVRFX1BBSVJfUkVHRVhQID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZyxcbiAgLy8gTWF0Y2ggZXZlcnl0aGluZyBvdXRzaWRlIG9mIG5vcm1hbCBjaGFycyBhbmQgXCIgKHF1b3RlIGNoYXJhY3RlcilcbiAgTk9OX0FMUEhBTlVNRVJJQ19SRUdFWFAgPSAvKFteXFwjLX58IHwhXSkvZztcblxuXG4vLyBHb29kIHNvdXJjZSBvZiBpbmZvIGFib3V0IGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzXG4vLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjc2VtYW50aWNzXG4vLyBodHRwOi8vc2ltb24uaHRtbDUub3JnL2h0bWwtZWxlbWVudHNcblxuLy8gU2FmZSBWb2lkIEVsZW1lbnRzIC0gSFRNTDVcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCN2b2lkLWVsZW1lbnRzXG52YXIgdm9pZEVsZW1lbnRzID0gbWFrZU1hcChcImFyZWEsYnIsY29sLGhyLGltZyx3YnJcIik7XG5cbi8vIEVsZW1lbnRzIHRoYXQgeW91IGNhbiwgaW50ZW50aW9uYWxseSwgbGVhdmUgb3BlbiAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXG4vLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjb3B0aW9uYWwtdGFnc1xudmFyIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cyA9IG1ha2VNYXAoXCJjb2xncm91cCxkZCxkdCxsaSxwLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyXCIpLFxuICAgIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMgPSBtYWtlTWFwKFwicnAscnRcIiksXG4gICAgb3B0aW9uYWxFbmRUYWdFbGVtZW50cyA9IGFuZ3VsYXIuZXh0ZW5kKHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEVuZFRhZ0lubGluZUVsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbEVuZFRhZ0Jsb2NrRWxlbWVudHMpO1xuXG4vLyBTYWZlIEJsb2NrIEVsZW1lbnRzIC0gSFRNTDVcbnZhciBibG9ja0VsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cywgbWFrZU1hcChcImFkZHJlc3MsYXJ0aWNsZSxcIiArXG4gICAgICAgIFwiYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsXCIgK1xuICAgICAgICBcImg2LGhlYWRlcixoZ3JvdXAsaHIsaW5zLG1hcCxtZW51LG5hdixvbCxwcmUsc2NyaXB0LHNlY3Rpb24sdGFibGUsdWxcIikpO1xuXG4vLyBJbmxpbmUgRWxlbWVudHMgLSBIVE1MNVxudmFyIGlubGluZUVsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMsIG1ha2VNYXAoXCJhLGFiYnIsYWNyb255bSxiLFwiICtcbiAgICAgICAgXCJiZGksYmRvLGJpZyxicixjaXRlLGNvZGUsZGVsLGRmbixlbSxmb250LGksaW1nLGlucyxrYmQsbGFiZWwsbWFwLG1hcmsscSxydWJ5LHJwLHJ0LHMsXCIgK1xuICAgICAgICBcInNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGltZSx0dCx1LHZhclwiKSk7XG5cbi8vIFNWRyBFbGVtZW50c1xuLy8gaHR0cHM6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9TYW5pdGl6YXRpb25fcnVsZXMjc3ZnX0VsZW1lbnRzXG52YXIgc3ZnRWxlbWVudHMgPSBtYWtlTWFwKFwiYW5pbWF0ZSxhbmltYXRlQ29sb3IsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxkZWZzLFwiICtcbiAgICAgICAgXCJkZXNjLGVsbGlwc2UsZm9udC1mYWNlLGZvbnQtZmFjZS1uYW1lLGZvbnQtZmFjZS1zcmMsZyxnbHlwaCxoa2VybixpbWFnZSxsaW5lYXJHcmFkaWVudCxcIiArXG4gICAgICAgIFwibGluZSxtYXJrZXIsbWV0YWRhdGEsbWlzc2luZy1nbHlwaCxtcGF0aCxwYXRoLHBvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsXCIgK1xuICAgICAgICBcInN0b3Asc3ZnLHN3aXRjaCx0ZXh0LHRpdGxlLHRzcGFuLHVzZVwiKTtcblxuLy8gU3BlY2lhbCBFbGVtZW50cyAoY2FuIGNvbnRhaW4gYW55dGhpbmcpXG52YXIgc3BlY2lhbEVsZW1lbnRzID0gbWFrZU1hcChcInNjcmlwdCxzdHlsZVwiKTtcblxudmFyIHZhbGlkRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZEVsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0VsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVFbGVtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxFbmRUYWdFbGVtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ZnRWxlbWVudHMpO1xuXG4vL0F0dHJpYnV0ZXMgdGhhdCBoYXZlIGhyZWYgYW5kIGhlbmNlIG5lZWQgdG8gYmUgc2FuaXRpemVkXG52YXIgdXJpQXR0cnMgPSBtYWtlTWFwKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHVzZW1hcCx4bGluazpocmVmXCIpO1xuXG52YXIgaHRtbEF0dHJzID0gbWFrZU1hcCgnYWJicixhbGlnbixhbHQsYXhpcyxiZ2NvbG9yLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxjbGFzcyxjbGVhciwnICtcbiAgICAnY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSwnICtcbiAgICAnaXNtYXAsbGFuZyxsYW5ndWFnZSxub2hyZWYsbm93cmFwLHJlbCxyZXYscm93cyxyb3dzcGFuLHJ1bGVzLCcgK1xuICAgICdzY29wZSxzY3JvbGxpbmcsc2hhcGUsc2l6ZSxzcGFuLHN0YXJ0LHN1bW1hcnksdGFyZ2V0LHRpdGxlLHR5cGUsJyArXG4gICAgJ3ZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGgnKTtcblxuLy8gU1ZHIGF0dHJpYnV0ZXMgKHdpdGhvdXQgXCJpZFwiIGFuZCBcIm5hbWVcIiBhdHRyaWJ1dGVzKVxuLy8gaHR0cHM6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9TYW5pdGl6YXRpb25fcnVsZXMjc3ZnX0F0dHJpYnV0ZXNcbnZhciBzdmdBdHRycyA9IG1ha2VNYXAoJ2FjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbHBoYWJldGljLGFyYWJpYy1mb3JtLGFzY2VudCwnICtcbiAgICAnYXR0cmlidXRlTmFtZSxhdHRyaWJ1dGVUeXBlLGJhc2VQcm9maWxlLGJib3gsYmVnaW4sYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxjb2xvciwnICtcbiAgICAnY29sb3ItcmVuZGVyaW5nLGNvbnRlbnQsY3gsY3ksZCxkeCxkeSxkZXNjZW50LGRpc3BsYXksZHVyLGVuZCxmaWxsLGZpbGwtcnVsZSxmb250LWZhbWlseSwnICtcbiAgICAnZm9udC1zaXplLGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmcm9tLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsJyArXG4gICAgJ2dyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaG9yaXotYWR2LXgsaG9yaXotb3JpZ2luLXgsaWRlb2dyYXBoaWMsayxrZXlQb2ludHMsJyArXG4gICAgJ2tleVNwbGluZXMsa2V5VGltZXMsbGFuZyxtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cywnICtcbiAgICAnbWFya2VyV2lkdGgsbWF0aGVtYXRpY2FsLG1heCxtaW4sb2Zmc2V0LG9wYWNpdHksb3JpZW50LG9yaWdpbixvdmVybGluZS1wb3NpdGlvbiwnICtcbiAgICAnb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhdGgscGF0aExlbmd0aCxwb2ludHMscHJlc2VydmVBc3BlY3RSYXRpbyxyLHJlZlgscmVmWSwnICtcbiAgICAncmVwZWF0Q291bnQscmVwZWF0RHVyLHJlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLHJlc3RhcnQscm90YXRlLHJ4LHJ5LHNsb3BlLHN0ZW1oLCcgK1xuICAgICdzdGVtdixzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cm9rZSwnICtcbiAgICAnc3Ryb2tlLWRhc2hhcnJheSxzdHJva2UtZGFzaG9mZnNldCxzdHJva2UtbGluZWNhcCxzdHJva2UtbGluZWpvaW4sc3Ryb2tlLW1pdGVybGltaXQsJyArXG4gICAgJ3N0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzeXN0ZW1MYW5ndWFnZSx0YXJnZXQsdGV4dC1hbmNob3IsdG8sdHJhbnNmb3JtLHR5cGUsdTEsdTIsJyArXG4gICAgJ3VuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdmFsdWVzLHZlcnNpb24sJyArXG4gICAgJ3ZpZXdCb3gsdmlzaWJpbGl0eSx3aWR0aCx3aWR0aHMseCx4LWhlaWdodCx4MSx4Mix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUseGxpbms6cm9sZSwnICtcbiAgICAneGxpbms6c2hvdyx4bGluazp0aXRsZSx4bGluazp0eXBlLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx4bWxucyx4bWxuczp4bGluayx5LHkxLHkyLCcgK1xuICAgICd6b29tQW5kUGFuJyk7XG5cbnZhciB2YWxpZEF0dHJzID0gYW5ndWxhci5leHRlbmQoe30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVyaUF0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdmdBdHRycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEF0dHJzKTtcblxuZnVuY3Rpb24gbWFrZU1hcChzdHIpIHtcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdCgnLCcpLCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIG9ialtpdGVtc1tpXV0gPSB0cnVlO1xuICByZXR1cm4gb2JqO1xufVxuXG5cbi8qKlxuICogQGV4YW1wbGVcbiAqIGh0bWxQYXJzZXIoaHRtbFN0cmluZywge1xuICogICAgIHN0YXJ0OiBmdW5jdGlvbih0YWcsIGF0dHJzLCB1bmFyeSkge30sXG4gKiAgICAgZW5kOiBmdW5jdGlvbih0YWcpIHt9LFxuICogICAgIGNoYXJzOiBmdW5jdGlvbih0ZXh0KSB7fSxcbiAqICAgICBjb21tZW50OiBmdW5jdGlvbih0ZXh0KSB7fVxuICogfSk7XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGh0bWwgc3RyaW5nXG4gKiBAcGFyYW0ge29iamVjdH0gaGFuZGxlclxuICovXG5mdW5jdGlvbiBodG1sUGFyc2VyKGh0bWwsIGhhbmRsZXIpIHtcbiAgaWYgKHR5cGVvZiBodG1sICE9PSAnc3RyaW5nJykge1xuICAgIGlmIChodG1sID09PSBudWxsIHx8IHR5cGVvZiBodG1sID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbCA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBodG1sID0gJycgKyBodG1sO1xuICAgIH1cbiAgfVxuICB2YXIgaW5kZXgsIGNoYXJzLCBtYXRjaCwgc3RhY2sgPSBbXSwgbGFzdCA9IGh0bWwsIHRleHQ7XG4gIHN0YWNrLmxhc3QgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOyB9O1xuXG4gIHdoaWxlIChodG1sKSB7XG4gICAgdGV4dCA9ICcnO1xuICAgIGNoYXJzID0gdHJ1ZTtcblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgaW4gYSBzY3JpcHQgb3Igc3R5bGUgZWxlbWVudFxuICAgIGlmICghc3RhY2subGFzdCgpIHx8ICFzcGVjaWFsRWxlbWVudHNbc3RhY2subGFzdCgpXSkge1xuXG4gICAgICAvLyBDb21tZW50XG4gICAgICBpZiAoaHRtbC5pbmRleE9mKFwiPCEtLVwiKSA9PT0gMCkge1xuICAgICAgICAvLyBjb21tZW50cyBjb250YWluaW5nIC0tIGFyZSBub3QgYWxsb3dlZCB1bmxlc3MgdGhleSB0ZXJtaW5hdGUgdGhlIGNvbW1lbnRcbiAgICAgICAgaW5kZXggPSBodG1sLmluZGV4T2YoXCItLVwiLCA0KTtcblxuICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBodG1sLmxhc3RJbmRleE9mKFwiLS0+XCIsIGluZGV4KSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICBpZiAoaGFuZGxlci5jb21tZW50KSBoYW5kbGVyLmNvbW1lbnQoaHRtbC5zdWJzdHJpbmcoNCwgaW5kZXgpKTtcbiAgICAgICAgICBodG1sID0gaHRtbC5zdWJzdHJpbmcoaW5kZXggKyAzKTtcbiAgICAgICAgICBjaGFycyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAvLyBET0NUWVBFXG4gICAgICB9IGVsc2UgaWYgKERPQ1RZUEVfUkVHRVhQLnRlc3QoaHRtbCkpIHtcbiAgICAgICAgbWF0Y2ggPSBodG1sLm1hdGNoKERPQ1RZUEVfUkVHRVhQKTtcblxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKG1hdGNoWzBdLCAnJyk7XG4gICAgICAgICAgY2hhcnMgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgLy8gZW5kIHRhZ1xuICAgICAgfSBlbHNlIGlmIChCRUdJTkdfRU5EX1RBR0VfUkVHRVhQLnRlc3QoaHRtbCkpIHtcbiAgICAgICAgbWF0Y2ggPSBodG1sLm1hdGNoKEVORF9UQUdfUkVHRVhQKTtcblxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBodG1sID0gaHRtbC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICBtYXRjaFswXS5yZXBsYWNlKEVORF9UQUdfUkVHRVhQLCBwYXJzZUVuZFRhZyk7XG4gICAgICAgICAgY2hhcnMgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAvLyBzdGFydCB0YWdcbiAgICAgIH0gZWxzZSBpZiAoQkVHSU5fVEFHX1JFR0VYUC50ZXN0KGh0bWwpKSB7XG4gICAgICAgIG1hdGNoID0gaHRtbC5tYXRjaChTVEFSVF9UQUdfUkVHRVhQKTtcblxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAvLyBXZSBvbmx5IGhhdmUgYSB2YWxpZCBzdGFydC10YWcgaWYgdGhlcmUgaXMgYSAnPicuXG4gICAgICAgICAgaWYgKG1hdGNoWzRdKSB7XG4gICAgICAgICAgICBodG1sID0gaHRtbC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2UoU1RBUlRfVEFHX1JFR0VYUCwgcGFyc2VTdGFydFRhZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXJzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbm8gZW5kaW5nIHRhZyBmb3VuZCAtLS0gdGhpcyBwaWVjZSBzaG91bGQgYmUgZW5jb2RlZCBhcyBhbiBlbnRpdHkuXG4gICAgICAgICAgdGV4dCArPSAnPCc7XG4gICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFycykge1xuICAgICAgICBpbmRleCA9IGh0bWwuaW5kZXhPZihcIjxcIik7XG5cbiAgICAgICAgdGV4dCArPSBpbmRleCA8IDAgPyBodG1sIDogaHRtbC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICBodG1sID0gaW5kZXggPCAwID8gXCJcIiA6IGh0bWwuc3Vic3RyaW5nKGluZGV4KTtcblxuICAgICAgICBpZiAoaGFuZGxlci5jaGFycykgaGFuZGxlci5jaGFycyhkZWNvZGVFbnRpdGllcyh0ZXh0KSk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUUgdmVyc2lvbnMgOSBhbmQgMTAgZG8gbm90IHVuZGVyc3RhbmQgdGhlIHJlZ2V4ICdbXl0nLCBzbyB1c2luZyBhIHdvcmthcm91bmQgd2l0aCBbXFxXXFx3XS5cbiAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UobmV3IFJlZ0V4cChcIihbXFxcXFdcXFxcd10qKTxcXFxccypcXFxcL1xcXFxzKlwiICsgc3RhY2subGFzdCgpICsgXCJbXj5dKj5cIiwgJ2knKSxcbiAgICAgICAgZnVuY3Rpb24oYWxsLCB0ZXh0KSB7XG4gICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShDT01NRU5UX1JFR0VYUCwgXCIkMVwiKS5yZXBsYWNlKENEQVRBX1JFR0VYUCwgXCIkMVwiKTtcblxuICAgICAgICAgIGlmIChoYW5kbGVyLmNoYXJzKSBoYW5kbGVyLmNoYXJzKGRlY29kZUVudGl0aWVzKHRleHQpKTtcblxuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSk7XG5cbiAgICAgIHBhcnNlRW5kVGFnKFwiXCIsIHN0YWNrLmxhc3QoKSk7XG4gICAgfVxuXG4gICAgaWYgKGh0bWwgPT0gbGFzdCkge1xuICAgICAgdGhyb3cgJHNhbml0aXplTWluRXJyKCdiYWRwYXJzZScsIFwiVGhlIHNhbml0aXplciB3YXMgdW5hYmxlIHRvIHBhcnNlIHRoZSBmb2xsb3dpbmcgYmxvY2sgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib2YgaHRtbDogezB9XCIsIGh0bWwpO1xuICAgIH1cbiAgICBsYXN0ID0gaHRtbDtcbiAgfVxuXG4gIC8vIENsZWFuIHVwIGFueSByZW1haW5pbmcgdGFnc1xuICBwYXJzZUVuZFRhZygpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlU3RhcnRUYWcodGFnLCB0YWdOYW1lLCByZXN0LCB1bmFyeSkge1xuICAgIHRhZ05hbWUgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWdOYW1lKTtcbiAgICBpZiAoYmxvY2tFbGVtZW50c1t0YWdOYW1lXSkge1xuICAgICAgd2hpbGUgKHN0YWNrLmxhc3QoKSAmJiBpbmxpbmVFbGVtZW50c1tzdGFjay5sYXN0KCldKSB7XG4gICAgICAgIHBhcnNlRW5kVGFnKFwiXCIsIHN0YWNrLmxhc3QoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbmFsRW5kVGFnRWxlbWVudHNbdGFnTmFtZV0gJiYgc3RhY2subGFzdCgpID09IHRhZ05hbWUpIHtcbiAgICAgIHBhcnNlRW5kVGFnKFwiXCIsIHRhZ05hbWUpO1xuICAgIH1cblxuICAgIHVuYXJ5ID0gdm9pZEVsZW1lbnRzW3RhZ05hbWVdIHx8ICEhdW5hcnk7XG5cbiAgICBpZiAoIXVuYXJ5KVxuICAgICAgc3RhY2sucHVzaCh0YWdOYW1lKTtcblxuICAgIHZhciBhdHRycyA9IHt9O1xuXG4gICAgcmVzdC5yZXBsYWNlKEFUVFJfUkVHRVhQLFxuICAgICAgZnVuY3Rpb24obWF0Y2gsIG5hbWUsIGRvdWJsZVF1b3RlZFZhbHVlLCBzaW5nbGVRdW90ZWRWYWx1ZSwgdW5xdW90ZWRWYWx1ZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBkb3VibGVRdW90ZWRWYWx1ZVxuICAgICAgICAgIHx8IHNpbmdsZVF1b3RlZFZhbHVlXG4gICAgICAgICAgfHwgdW5xdW90ZWRWYWx1ZVxuICAgICAgICAgIHx8ICcnO1xuXG4gICAgICAgIGF0dHJzW25hbWVdID0gZGVjb2RlRW50aXRpZXModmFsdWUpO1xuICAgIH0pO1xuICAgIGlmIChoYW5kbGVyLnN0YXJ0KSBoYW5kbGVyLnN0YXJ0KHRhZ05hbWUsIGF0dHJzLCB1bmFyeSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUVuZFRhZyh0YWcsIHRhZ05hbWUpIHtcbiAgICB2YXIgcG9zID0gMCwgaTtcbiAgICB0YWdOYW1lID0gYW5ndWxhci5sb3dlcmNhc2UodGFnTmFtZSk7XG4gICAgaWYgKHRhZ05hbWUpXG4gICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IG9wZW5lZCB0YWcgb2YgdGhlIHNhbWUgdHlwZVxuICAgICAgZm9yIChwb3MgPSBzdGFjay5sZW5ndGggLSAxOyBwb3MgPj0gMDsgcG9zLS0pXG4gICAgICAgIGlmIChzdGFja1twb3NdID09IHRhZ05hbWUpXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICBpZiAocG9zID49IDApIHtcbiAgICAgIC8vIENsb3NlIGFsbCB0aGUgb3BlbiBlbGVtZW50cywgdXAgdGhlIHN0YWNrXG4gICAgICBmb3IgKGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IHBvczsgaS0tKVxuICAgICAgICBpZiAoaGFuZGxlci5lbmQpIGhhbmRsZXIuZW5kKHN0YWNrW2ldKTtcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBvcGVuIGVsZW1lbnRzIGZyb20gdGhlIHN0YWNrXG4gICAgICBzdGFjay5sZW5ndGggPSBwb3M7XG4gICAgfVxuICB9XG59XG5cbnZhciBoaWRkZW5QcmU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbi8qKlxuICogZGVjb2RlcyBhbGwgZW50aXRpZXMgaW50byByZWd1bGFyIHN0cmluZ1xuICogQHBhcmFtIHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyB3aXRoIGRlY29kZWQgZW50aXRpZXMuXG4gKi9cbmZ1bmN0aW9uIGRlY29kZUVudGl0aWVzKHZhbHVlKSB7XG4gIGlmICghdmFsdWUpIHsgcmV0dXJuICcnOyB9XG5cbiAgaGlkZGVuUHJlLmlubmVySFRNTCA9IHZhbHVlLnJlcGxhY2UoLzwvZyxcIiZsdDtcIik7XG4gIC8vIGlubmVyVGV4dCBkZXBlbmRzIG9uIHN0eWxpbmcgYXMgaXQgZG9lc24ndCBkaXNwbGF5IGhpZGRlbiBlbGVtZW50cy5cbiAgLy8gVGhlcmVmb3JlLCBpdCdzIGJldHRlciB0byB1c2UgdGV4dENvbnRlbnQgbm90IHRvIGNhdXNlIHVubmVjZXNzYXJ5IHJlZmxvd3MuXG4gIHJldHVybiBoaWRkZW5QcmUudGV4dENvbnRlbnQ7XG59XG5cbi8qKlxuICogRXNjYXBlcyBhbGwgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNoYXJhY3RlcnMsIHNvIHRoYXQgdGhlXG4gKiByZXN1bHRpbmcgc3RyaW5nIGNhbiBiZSBzYWZlbHkgaW5zZXJ0ZWQgaW50byBhdHRyaWJ1dGUgb3JcbiAqIGVsZW1lbnQgdGV4dC5cbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ30gZXNjYXBlZCB0ZXh0XG4gKi9cbmZ1bmN0aW9uIGVuY29kZUVudGl0aWVzKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5cbiAgICByZXBsYWNlKC8mL2csICcmYW1wOycpLlxuICAgIHJlcGxhY2UoU1VSUk9HQVRFX1BBSVJfUkVHRVhQLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGhpID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcbiAgICAgIHZhciBsb3cgPSB2YWx1ZS5jaGFyQ29kZUF0KDEpO1xuICAgICAgcmV0dXJuICcmIycgKyAoKChoaSAtIDB4RDgwMCkgKiAweDQwMCkgKyAobG93IC0gMHhEQzAwKSArIDB4MTAwMDApICsgJzsnO1xuICAgIH0pLlxuICAgIHJlcGxhY2UoTk9OX0FMUEhBTlVNRVJJQ19SRUdFWFAsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gJyYjJyArIHZhbHVlLmNoYXJDb2RlQXQoMCkgKyAnOyc7XG4gICAgfSkuXG4gICAgcmVwbGFjZSgvPC9nLCAnJmx0OycpLlxuICAgIHJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cblxuLyoqXG4gKiBjcmVhdGUgYW4gSFRNTC9YTUwgd3JpdGVyIHdoaWNoIHdyaXRlcyB0byBidWZmZXJcbiAqIEBwYXJhbSB7QXJyYXl9IGJ1ZiB1c2UgYnVmLmphaW4oJycpIHRvIGdldCBvdXQgc2FuaXRpemVkIGh0bWwgc3RyaW5nXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBpbiB0aGUgZm9ybSBvZiB7XG4gKiAgICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7fSxcbiAqICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge30sXG4gKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XG4gKiB9XG4gKi9cbmZ1bmN0aW9uIGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIHVyaVZhbGlkYXRvcikge1xuICB2YXIgaWdub3JlID0gZmFsc2U7XG4gIHZhciBvdXQgPSBhbmd1bGFyLmJpbmQoYnVmLCBidWYucHVzaCk7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMsIHVuYXJ5KSB7XG4gICAgICB0YWcgPSBhbmd1bGFyLmxvd2VyY2FzZSh0YWcpO1xuICAgICAgaWYgKCFpZ25vcmUgJiYgc3BlY2lhbEVsZW1lbnRzW3RhZ10pIHtcbiAgICAgICAgaWdub3JlID0gdGFnO1xuICAgICAgfVxuICAgICAgaWYgKCFpZ25vcmUgJiYgdmFsaWRFbGVtZW50c1t0YWddID09PSB0cnVlKSB7XG4gICAgICAgIG91dCgnPCcpO1xuICAgICAgICBvdXQodGFnKTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGF0dHJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgdmFyIGxrZXk9YW5ndWxhci5sb3dlcmNhc2Uoa2V5KTtcbiAgICAgICAgICB2YXIgaXNJbWFnZSA9ICh0YWcgPT09ICdpbWcnICYmIGxrZXkgPT09ICdzcmMnKSB8fCAobGtleSA9PT0gJ2JhY2tncm91bmQnKTtcbiAgICAgICAgICBpZiAodmFsaWRBdHRyc1tsa2V5XSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgKHVyaUF0dHJzW2xrZXldICE9PSB0cnVlIHx8IHVyaVZhbGlkYXRvcih2YWx1ZSwgaXNJbWFnZSkpKSB7XG4gICAgICAgICAgICBvdXQoJyAnKTtcbiAgICAgICAgICAgIG91dChrZXkpO1xuICAgICAgICAgICAgb3V0KCc9XCInKTtcbiAgICAgICAgICAgIG91dChlbmNvZGVFbnRpdGllcyh2YWx1ZSkpO1xuICAgICAgICAgICAgb3V0KCdcIicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG91dCh1bmFyeSA/ICcvPicgOiAnPicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZW5kOiBmdW5jdGlvbih0YWcpIHtcbiAgICAgICAgdGFnID0gYW5ndWxhci5sb3dlcmNhc2UodGFnKTtcbiAgICAgICAgaWYgKCFpZ25vcmUgJiYgdmFsaWRFbGVtZW50c1t0YWddID09PSB0cnVlKSB7XG4gICAgICAgICAgb3V0KCc8LycpO1xuICAgICAgICAgIG91dCh0YWcpO1xuICAgICAgICAgIG91dCgnPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT0gaWdub3JlKSB7XG4gICAgICAgICAgaWdub3JlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgY2hhcnM6IGZ1bmN0aW9uKGNoYXJzKSB7XG4gICAgICAgIGlmICghaWdub3JlKSB7XG4gICAgICAgICAgb3V0KGVuY29kZUVudGl0aWVzKGNoYXJzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfTtcbn1cblxuXG4vLyBkZWZpbmUgbmdTYW5pdGl6ZSBtb2R1bGUgYW5kIHJlZ2lzdGVyICRzYW5pdGl6ZSBzZXJ2aWNlXG5hbmd1bGFyLm1vZHVsZSgnbmdTYW5pdGl6ZScsIFtdKS5wcm92aWRlcignJHNhbml0aXplJywgJFNhbml0aXplUHJvdmlkZXIpO1xuXG4vKiBnbG9iYWwgc2FuaXRpemVUZXh0OiBmYWxzZSAqL1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxpbmt5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmluZHMgbGlua3MgaW4gdGV4dCBpbnB1dCBhbmQgdHVybnMgdGhlbSBpbnRvIGh0bWwgbGlua3MuIFN1cHBvcnRzIGh0dHAvaHR0cHMvZnRwL21haWx0byBhbmRcbiAqIHBsYWluIGVtYWlsIGFkZHJlc3MgbGlua3MuXG4gKlxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1Nhbml0aXplIGBuZ1Nhbml0aXplYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBJbnB1dCB0ZXh0LlxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCBXaW5kb3cgKF9ibGFua3xfc2VsZnxfcGFyZW50fF90b3ApIG9yIG5hbWVkIGZyYW1lIHRvIG9wZW4gbGlua3MgaW4uXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBIdG1sLWxpbmtpZmllZCB0ZXh0LlxuICpcbiAqIEB1c2FnZVxuICAgPHNwYW4gbmctYmluZC1odG1sPVwibGlua3lfZXhwcmVzc2lvbiB8IGxpbmt5XCI+PC9zcGFuPlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJsaW5reUV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnbGlua3lFeGFtcGxlJywgWyduZ1Nhbml0aXplJ10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnNuaXBwZXQgPVxuICAgICAgICAgICAgICAgJ1ByZXR0eSB0ZXh0IHdpdGggc29tZSBsaW5rczpcXG4nK1xuICAgICAgICAgICAgICAgJ2h0dHA6Ly9hbmd1bGFyanMub3JnLyxcXG4nK1xuICAgICAgICAgICAgICAgJ21haWx0bzp1c0Bzb21ld2hlcmUub3JnLFxcbicrXG4gICAgICAgICAgICAgICAnYW5vdGhlckBzb21ld2hlcmUub3JnLFxcbicrXG4gICAgICAgICAgICAgICAnYW5kIG9uZSBtb3JlOiBmdHA6Ly8xMjcuMC4wLjEvLic7XG4gICAgICAgICAgICAgJHNjb3BlLnNuaXBwZXRXaXRoVGFyZ2V0ID0gJ2h0dHA6Ly9hbmd1bGFyanMub3JnLyc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgIFNuaXBwZXQ6IDx0ZXh0YXJlYSBuZy1tb2RlbD1cInNuaXBwZXRcIiBjb2xzPVwiNjBcIiByb3dzPVwiM1wiPjwvdGV4dGFyZWE+XG4gICAgICAgPHRhYmxlPlxuICAgICAgICAgPHRyPlxuICAgICAgICAgICA8dGQ+RmlsdGVyPC90ZD5cbiAgICAgICAgICAgPHRkPlNvdXJjZTwvdGQ+XG4gICAgICAgICAgIDx0ZD5SZW5kZXJlZDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwibGlua3ktZmlsdGVyXCI+XG4gICAgICAgICAgIDx0ZD5saW5reSBmaWx0ZXI8L3RkPlxuICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXQgfCBsaW5reVwiJmd0Ozxicj4mbHQ7L2RpdiZndDs8L3ByZT5cbiAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgIDxkaXYgbmctYmluZC1odG1sPVwic25pcHBldCB8IGxpbmt5XCI+PC9kaXY+XG4gICAgICAgICAgIDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwibGlua3ktdGFyZ2V0XCI+XG4gICAgICAgICAgPHRkPmxpbmt5IHRhcmdldDwvdGQ+XG4gICAgICAgICAgPHRkPlxuICAgICAgICAgICAgPHByZT4mbHQ7ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRXaXRoVGFyZ2V0IHwgbGlua3k6J19ibGFuaydcIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICA8ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRXaXRoVGFyZ2V0IHwgbGlua3k6J19ibGFuaydcIj48L2Rpdj5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICAgIDx0ciBpZD1cImVzY2FwZWQtaHRtbFwiPlxuICAgICAgICAgICA8dGQ+bm8gZmlsdGVyPC90ZD5cbiAgICAgICAgICAgPHRkPjxwcmU+Jmx0O2RpdiBuZy1iaW5kPVwic25pcHBldFwiJmd0Ozxicj4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxuICAgICAgICAgICA8dGQ+PGRpdiBuZy1iaW5kPVwic25pcHBldFwiPjwvZGl2PjwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgIDwvdGFibGU+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgbGlua2lmeSB0aGUgc25pcHBldCB3aXRoIHVybHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS1maWx0ZXInKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0IHwgbGlua3knKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgICB0b0JlKCdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6IGh0dHA6Ly9hbmd1bGFyanMub3JnLywgdXNAc29tZXdoZXJlLm9yZywgJyArXG4gICAgICAgICAgICAgICAgICAnYW5vdGhlckBzb21ld2hlcmUub3JnLCBhbmQgb25lIG1vcmU6IGZ0cDovLzEyNy4wLjAuMS8uJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCg0KTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgbm90IGxpbmtpZnkgc25pcHBldCB3aXRob3V0IHRoZSBsaW5reSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdlc2NhcGVkLWh0bWwnKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0JykpLmdldFRleHQoKSkuXG4gICAgICAgICAgICAgdG9CZSgnUHJldHR5IHRleHQgd2l0aCBzb21lIGxpbmtzOiBodHRwOi8vYW5ndWxhcmpzLm9yZy8sIG1haWx0bzp1c0Bzb21ld2hlcmUub3JnLCAnICtcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNlc2NhcGVkLWh0bWwgYScpKS5jb3VudCgpKS50b0VxdWFsKDApO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuc2VuZEtleXMoJ25ldyBodHRwOi8vbGluay4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS1maWx0ZXInKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0IHwgbGlua3knKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgICB0b0JlKCduZXcgaHR0cDovL2xpbmsuJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCgxKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdlc2NhcGVkLWh0bWwnKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0JykpLmdldFRleHQoKSlcbiAgICAgICAgICAgICAudG9CZSgnbmV3IGh0dHA6Ly9saW5rLicpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggdGhlIHRhcmdldCBwcm9wZXJ0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGlua3ktdGFyZ2V0JykpLlxuICAgICAgICAgICAgZWxlbWVudChieS5iaW5kaW5nKFwic25pcHBldFdpdGhUYXJnZXQgfCBsaW5reTonX2JsYW5rJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvQmUoJ2h0dHA6Ly9hbmd1bGFyanMub3JnLycpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNsaW5reS10YXJnZXQgYScpKS5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0VxdWFsKCdfYmxhbmsnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbmdTYW5pdGl6ZScpLmZpbHRlcignbGlua3knLCBbJyRzYW5pdGl6ZScsIGZ1bmN0aW9uKCRzYW5pdGl6ZSkge1xuICB2YXIgTElOS1lfVVJMX1JFR0VYUCA9XG4gICAgICAgIC8oKGZ0cHxodHRwcz8pOlxcL1xcL3wod3d3XFwuKXwobWFpbHRvOik/W0EtWmEtejAtOS5fJSstXStAKVxcUypbXlxccy47LCgpe308Plwi4oCd4oCZXS9pLFxuICAgICAgTUFJTFRPX1JFR0VYUCA9IC9ebWFpbHRvOi9pO1xuXG4gIHJldHVybiBmdW5jdGlvbih0ZXh0LCB0YXJnZXQpIHtcbiAgICBpZiAoIXRleHQpIHJldHVybiB0ZXh0O1xuICAgIHZhciBtYXRjaDtcbiAgICB2YXIgcmF3ID0gdGV4dDtcbiAgICB2YXIgaHRtbCA9IFtdO1xuICAgIHZhciB1cmw7XG4gICAgdmFyIGk7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJhdy5tYXRjaChMSU5LWV9VUkxfUkVHRVhQKSkpIHtcbiAgICAgIC8vIFdlIGNhbiBub3QgZW5kIGluIHRoZXNlIGFzIHRoZXkgYXJlIHNvbWV0aW1lcyBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBzZW50ZW5jZVxuICAgICAgdXJsID0gbWF0Y2hbMF07XG4gICAgICAvLyBpZiB3ZSBkaWQgbm90IG1hdGNoIGZ0cC9odHRwL3d3dy9tYWlsdG8gdGhlbiBhc3N1bWUgbWFpbHRvXG4gICAgICBpZiAoIW1hdGNoWzJdICYmICFtYXRjaFs0XSkge1xuICAgICAgICB1cmwgPSAobWF0Y2hbM10gPyAnaHR0cDovLycgOiAnbWFpbHRvOicpICsgdXJsO1xuICAgICAgfVxuICAgICAgaSA9IG1hdGNoLmluZGV4O1xuICAgICAgYWRkVGV4dChyYXcuc3Vic3RyKDAsIGkpKTtcbiAgICAgIGFkZExpbmsodXJsLCBtYXRjaFswXS5yZXBsYWNlKE1BSUxUT19SRUdFWFAsICcnKSk7XG4gICAgICByYXcgPSByYXcuc3Vic3RyaW5nKGkgKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRUZXh0KHJhdyk7XG4gICAgcmV0dXJuICRzYW5pdGl6ZShodG1sLmpvaW4oJycpKTtcblxuICAgIGZ1bmN0aW9uIGFkZFRleHQodGV4dCkge1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGh0bWwucHVzaChzYW5pdGl6ZVRleHQodGV4dCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZExpbmsodXJsLCB0ZXh0KSB7XG4gICAgICBodG1sLnB1c2goJzxhICcpO1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgaHRtbC5wdXNoKCd0YXJnZXQ9XCInLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgJ1wiICcpO1xuICAgICAgfVxuICAgICAgaHRtbC5wdXNoKCdocmVmPVwiJyxcbiAgICAgICAgICAgICAgICB1cmwucmVwbGFjZSgvXCIvZywgJyZxdW90OycpLFxuICAgICAgICAgICAgICAgICdcIj4nKTtcbiAgICAgIGFkZFRleHQodGV4dCk7XG4gICAgICBodG1sLnB1c2goJzwvYT4nKTtcbiAgICB9XG4gIH07XG59XSk7XG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdjaGF5a2EtYnV0dG9ucycsIFsnY2hheWthLXV0aWxzJ10pXG4gICAgLnByb3ZpZGVyKCdidXR0b25zJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHN0ZEJ1dHRvbkNsYXNzID0gJyc7XG5cbiAgICAgICAgLy92YXIgYnV0dG9ucyA9IHtcbiAgICAgICAgLy9cbiAgICAgICAgLy99O1xuXG4gICAgICAgIC8vYW5ndWxhci5leHRlbmQodGhpcywgYnV0dG9ucyk7XG4gICAgICAgIHZhciBidXR0b25zID0ge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBidXR0b24gY2xhc3NcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0QnV0dG9uQ2xhc3M6IGZ1bmN0aW9uKGNscyl7XG4gICAgICAgICAgICAgICAgc3RkQnV0dG9uQ2xhc3MgPSBjbHM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEdldCBidXR0b24gY2xhc3NcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0QnV0dG9uQ2xhc3M6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ZEJ1dHRvbkNsYXNzO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJGdldDogWyd1dGlscycsIGZ1bmN0aW9uKHV0aWxzKXtcblxuICAgICAgICAgICAgICAgIHV0aWxzLmVuc3VyZSgnQ2hheWthLkJ1dHRvbnMnLGJ1dHRvbnMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbnM7XG4gICAgICAgICAgICB9XVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH0pXG47XG5cbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS1ubHMnLCBbJ2NoYXlrYS11dGlscyddKVxuICAgIC5wcm92aWRlcignbmxzJywgZnVuY3Rpb24oKXtcblxuICAgICAgICB2YXIgY3VycmVudExvY2FsZSA9ICdlbi1VUyc7XG5cbiAgICAgICAgdmFyIGRpY3Rpb25hcmllcyA9IHt9O1xuXG4gICAgICAgIHZhciBubHMgPSB7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGN1cnJlbnQgbG9jYWxlIChlLmcuICdlbi1VUycpXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2FsZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRMb2NhbGU6IGZ1bmN0aW9uKGxvY2FsZSl7XG4gICAgICAgICAgICAgICAgY3VycmVudExvY2FsZSA9IGxvY2FsZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IGN1cnJlbnQgbG9jYWxlXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRMb2NhbGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRMb2NhbGU7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCB0cmFuc2xhdGlvbnMgZm9yIHNwZWNpZmllZCBsb2NhbGVcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3t9fSB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3t9fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRUcmFuc2xhdGlvbnM6IGZ1bmN0aW9uKGxvY2FsZSwgdHJhbnNsYXRpb25zKXtcbiAgICAgICAgICAgICAgICBkaWN0aW9uYXJpZXNbbG9jYWxlXSA9IGRpY3Rpb25hcmllc1tsb2NhbGVdIHx8IHt9O1xuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGRpY3Rpb25hcmllc1tsb2NhbGVdLCB0cmFuc2xhdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpY3Rpb25hcmllc1tsb2NhbGVdO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIGFycmF5IG9mIHJlZ2lzdGVyZWQgbG9jYWxlc1xuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRTdXBwb3J0ZWRMb2NhbGVzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhkaWN0aW9uYXJpZXMpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgdHJhbnNsYXRpb24gZm9yIHNwZWNpZmllZCBzdHJpbmdcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xvY2FsZV1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgXzogZnVuY3Rpb24oc3RyLCBsb2NhbGUpe1xuICAgICAgICAgICAgICAgIGxvY2FsZSA9IGxvY2FsZSB8fCBjdXJyZW50TG9jYWxlIHx8ICdlbi1VUyc7XG4gICAgICAgICAgICAgICAgdmFyIGRpY3Rpb25hcnkgPSBkaWN0aW9uYXJpZXNbbG9jYWxlXSB8fCB7fTtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdERpY3Rpb25hcnkgPSBkaWN0aW9uYXJpZXNbJ2VuLVVTJ10gfHwge307XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpY3Rpb25hcnlbc3RyXSB8fCBkZWZhdWx0RGljdGlvbmFyeVtzdHJdIHx8IHN0cjtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICRnZXQ6IFsndXRpbHMnLCBmdW5jdGlvbih1dGlscyl7XG5cbiAgICAgICAgICAgICAgICB1dGlscy5lbnN1cmUoJ0NoYXlrYS5OTFMnLCBubHMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5scztcbiAgICAgICAgICAgIH1dXG5cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmxzO1xuICAgIH0pXG4gICAgLmZpbHRlcignbmxzJywgWydubHMnLCBmdW5jdGlvbihubHMpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3RyLCBsb2NhbGUpe1xuICAgICAgICAgICAgcmV0dXJuIG5scy5fKHN0ciwgbG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuY29uZmlnKFsnbmxzUHJvdmlkZXInLCBmdW5jdGlvbihubHNQcm92aWRlcil7XG4gICAgICAgIHZhciBsb2NhbGUgPSB3aW5kb3cuQ2hheWthICYmIHdpbmRvdy5DaGF5a2EuQ29yZSAmJiB3aW5kb3cuQ2hheWthLkNvcmUubG9jYWxlIHx8ICdlbi1VUyc7XG4gICAgICAgIG5sc1Byb3ZpZGVyLnNldExvY2FsZShsb2NhbGUpO1xuICAgIH1dKVxuICAgIDsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdjaGF5a2Etc3Bpbm5lcnMnLCBbJ2NoYXlrYS1ubHMnLCAnY2hheWthLXV0aWxzJ10pXG4gICAgLmRpcmVjdGl2ZSgnc3Bpbm5lcicsIFtmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICBzY29wZTp7XG4gICAgICAgICAgICAgICAgc3Bpbm5lcjogJz0nLFxuICAgICAgICAgICAgICAgIHZpc2libGU6ICc9PycsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJz0/J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJjaGF5a2Etc3Bpbm5lclwiIGRhdGEtbmctc2hvdz1cInZpc2libGVcIiBkYXRhLW5nLWJpbmQtaHRtbD1cIm1lc3NhZ2VcIj48L2Rpdj4nLFxuXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpe1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3cgPSBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICRzY29wZS5tZXNzYWdlIHx8ICdMb2FkaW5nLi4uJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVyID0gJHNjb3BlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5kaXJlY3RpdmUoJ211bHRpU3Bpbm5lcicsIFtmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICBzY29wZTp7XG4gICAgICAgICAgICAgICAgc3Bpbm5lcjogJz1tdWx0aVNwaW5uZXInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImNoYXlrYS1tdWx0aV9zcGlubmVyXCIgZGF0YS1uZy1zaG93PVwidG90YWxcIj48ZGl2IGRhdGEtbmctcmVwZWF0PVwiKGlkLCBtZXNzYWdlKSBpbiBtZXNzYWdlc1wiPjxkaXYgZGF0YS1zcGlubmVyPVwic3Bpbm5lcnNbaWRdXCIgZGF0YS1tZXNzYWdlPVwibWVzc2FnZVwiIGRhdGEtdmlzaWJsZT1cInRydWVcIj48L2Rpdj48L2Rpdj48L2Rpdj4nLFxuICAgICAgICAgICAgLy9yZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlKXtcbiAgICAgICAgICAgICAgICB2YXIgY3RybCA9IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVycyA9IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcyA9IHt9O1xuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbCA9IDA7XG5cbiAgICAgICAgICAgICAgICBjdHJsLnNob3cgPSBmdW5jdGlvbihtZXNzYWdlLCBpZCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9ICdzcGlubmVyXycrJHNjb3BlLnRvdGFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUubWVzc2FnZXNbaWRdKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlc1tpZF0gPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjdHJsLmhpZGUgPSBmdW5jdGlvbihpZCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5tZXNzYWdlc1tpZF0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgJHNjb3BlLm1lc3NhZ2VzW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVyc1tpZF0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwaW5uZXIgPSBjdHJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5kaXJlY3RpdmUoJ2dlbmVyYWxTcGlubmVyJywgWyd1dGlscycsICdnZW5lcmFsU3Bpbm5lcicsIGZ1bmN0aW9uKHV0aWxzKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY2hheWthLWdlbmVyYWxfc3Bpbm5lclwiPjxkaXYgZGF0YS1tdWx0aS1zcGlubmVyPVwic3Bpbm5lclwiPjwvZGl2PjwvZGl2PicsXG4gICAgICAgICAgICAvL3JlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgJCA9IGFuZ3VsYXIuZWxlbWVudDtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignQ2hheWthLlNwaW5uZXJzLnNob3cnLCBmdW5jdGlvbihlLCBtZXNzYWdlLCBpZCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zcGlubmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVyLnNob3cobWVzc2FnZSwgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMucGF0Y2hTY29wZSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignQ2hheWthLlNwaW5uZXJzLmhpZGUnLCBmdW5jdGlvbihlLCBpZCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5zcGlubmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zcGlubmVyLmhpZGUoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbHMucGF0Y2hTY29wZSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuZmFjdG9yeSgnZ2VuZXJhbFNwaW5uZXInLCBbJ3V0aWxzJywgZnVuY3Rpb24odXRpbHMpe1xuICAgICAgICB2YXIgJCA9IGFuZ3VsYXIuZWxlbWVudDtcblxuICAgICAgICByZXR1cm4gdXRpbHMuZW5zdXJlKCdDaGF5a2EuU3Bpbm5lcnMnLCB7XG4gICAgICAgICAgICBzaG93OiAgZnVuY3Rpb24obWVzc2FnZSwgaWQpe1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ0NoYXlrYS5TcGlubmVycy5zaG93JywgW21lc3NhZ2UsIGlkXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24oaWQpe1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ0NoYXlrYS5TcGlubmVycy5oaWRlJywgW2lkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1dKVxuOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2NoYXlrYS1hamF4JywgWydjaGF5a2EtbW9kYWxzJywgJ2NoYXlrYS1zcGlubmVycyddKVxuICAgIC5mYWN0b3J5KCdhamF4JywgWyckd2luZG93JywgJyRodHRwJywgJyR0aW1lb3V0JywgJ21vZGFscycsICdnZW5lcmFsU3Bpbm5lcicsICd1dGlscycsIGZ1bmN0aW9uKCR3aW5kb3csICRodHRwLCAkdGltZW91dCwgbW9kYWxzLCBnZW5lcmFsU3Bpbm5lciwgdXRpbHMpe1xuICAgICAgICB2YXIgJCA9IGFuZ3VsYXIuZWxlbWVudDtcbiAgICAgICAgdmFyIENoYXlrYSA9ICR3aW5kb3cuQ2hheWthIHx8IHt9O1xuICAgICAgICB2YXIgYWpheCA9IENoYXlrYS5BamF4ID0gQ2hheWthLkFqYXggfHwge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlZ2lzdGVyZWQgZXJyb3IgaGFuZGxlcnMgZm9yIGRpZmZlcmVudCBlcnJvciBjb2Rlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBlcnJvckhhbmRsZXJzOiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFkZCBlcnJvciBoYW5kbGVyIGZvciBlcnJvckNvZGUuXG4gICAgICAgICAgICAgKiBIYW5kbGVyIG1heSBhY2NlcHQgZm9sbG93aW5nIHBhcmFtcyAoY29kZSwgbWVzc2FnZSwgcGF5bG9hZCksXG4gICAgICAgICAgICAgKiBhbmQgc2hvdWxkIHJldHVybiB0cnVlIGlmIGVycm9yIHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIHdpdGggb3RoZXIgaGFuZGxlcnMsXG4gICAgICAgICAgICAgKiBmYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlkICAgdW5pcXVlIGhhbmRsZXIgaWRcbiAgICAgICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgICAgZXJyb3IgaGFuZGxlclxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yQ29kZSAgICBlcnJvciBjb2RlIHRvIHByb2Nlc3MgdXNpbmcgaGFuZGxlclxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhZGRFcnJvckhhbmRsZXI6IGZ1bmN0aW9uKGlkLCBoYW5kbGVyLCBlcnJvckNvZGUpe1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IGVycm9yQ29kZSB8fCBudWxsO1xuICAgICAgICAgICAgICAgIGFqYXguZXJyb3JIYW5kbGVyc1tpZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICdjb2RlJzogZXJyb3JDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnaGFuZGxlcic6IGhhbmRsZXJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW1vdmUgZXJyb3IgaGFuZGxlciBmb3Igc3BlY2lmaWVkIGlkXG4gICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVtb3ZlRXJyb3JIYW5kbGVyOiBmdW5jdGlvbihpZCl7XG4gICAgICAgICAgICAgICAgYWpheC5lcnJvckhhbmRsZXJzW2lkXSA9IG51bGw7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEhhbmRsZSBlcnJvciB3aXRoIGFsbCB0aGUgcmVnaXN0ZXJlZCBlcnJvciBoYW5kbGVyc1xuICAgICAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGVycm9yIHdhcyBwcm9jZXNzZWQgYW5kIHNob3VsZCBiZSByZW1vdmVkIGZyb20gdGhlIHN0YWNrXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIGNvZGVcbiAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0gcGF5bG9hZFxuICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbihjb2RlLCBtZXNzYWdlLCBwYXlsb2FkKXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpZCBpbiBhamF4LmVycm9ySGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFqYXguZXJyb3JIYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBhamF4LmVycm9ySGFuZGxlcnNbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZyAmJiAoIXJlZy5jb2RlIHx8IHJlZy5jb2RlID09PSBjb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcyB8fCByZWcuaGFuZGxlcihjb2RlLCBtZXNzYWdlLCBwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEhhbmRsZSBhbGwgdGhlIGVycm9ycyBmb3VuZCBpbiByZXNwb25zZSBpbmNsdWRpbmcgbWFzc19lcnJvcnNcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGhhbmRsZUVycm9yczogZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgaWYoIWRhdGEpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geydlbXB0eV9yZXNwb25zZSc6ICdFbXB0eSByZXNwb25zZSd9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZignbWFzc19lcnJvcnMnID09PSBkYXRhLmNvZGUpe1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGNvZGUgaW4gZGF0YS5tZXNzYWdlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEubWVzc2FnZS5oYXNPd25Qcm9wZXJ0eShjb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhamF4LmhhbmRsZUVycm9yKGNvZGUsIGRhdGEubWVzc2FnZVtjb2RlXSwgZGF0YS5wYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YS5tZXNzYWdlW2NvZGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlcnJvcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZighYWpheC5oYW5kbGVFcnJvcihkYXRhLmNvZGUsIGRhdGEubWVzc2FnZSwgZGF0YS5wYXlsb2FkKSl7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yc1tkYXRhLmNvZGVdID0gZGF0YS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQYXJzZSBqc29uIGluIGNhc2Ugc29tZSBlbXB0eSBvciBodG1sIHJlc3BvbnNlXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHJlc3BvbnNlXG4gICAgICAgICAgICAgKiBAcGFyYW0gZGVmYXVsdE1lc3NhZ2VcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcm9jZXNzUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlLCBkZWZhdWx0TWVzc2FnZSl7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBkZWZhdWx0TWVzc2FnZSB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IDE7XG4gICAgICAgICAgICAgICAgaWYoIWFuZ3VsYXIuaXNVbmRlZmluZWQocmVzcG9uc2UucGF5bG9hZCkpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoIXJlc3BvbnNlIHx8IGFuZ3VsYXIuaXNTdHJpbmcocmVzcG9uc2UpICYmICFyZXNwb25zZS5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ0VtcHR5IHJlc3BvbnNlJztcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihhbmd1bGFyLmlzU3RyaW5nKHJlc3BvbnNlKSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0gcmVzcG9uc2UubWF0Y2goLzxib2R5W14+XSo+KFtcXHNcXFNdKik8XFwvYm9keT4vbSk7XG4gICAgICAgICAgICAgICAgICAgIG0gPSBtP206cmVzcG9uc2UubWF0Y2goLzxiclxccypcXC8+XFxzKjxiPltePF0rPFxcL2I+XFw6XFxzKiguKik8YnJcXHMqXFwvPi9tKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IG0/bVsxXS50cmltKCk6ZGVmYXVsdE1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7Y29kZTogY29kZSwgbWVzc2FnZTogbWVzc2FnZSwgcGF5bG9hZDogbnVsbH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzcGlubmVyc1VzZWQ6IDAsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJlcGFyZXMgYWxsIHRoZSBoYW5kbGVycyB0byBzaG93IGFsbCB0aGUgc3Bpbm5lcnMgYW5kIGVycm9yc1xuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICAgICAgICAgKiAtIHNwaW5uZXI6IHJlZmVyZW5jZSB0byBDaGF5a2EuU3Bpbm5lcnMuc3Bpbm5lciBvciBmYWxzZSBpZiBubyBzcGlubmVycyBuZWVkZWRcbiAgICAgICAgICAgICAqIC0gc3Bpbm5lcklkOiBpZCBmb3IgZ2VuZXJhbFNwaW5uZXJcbiAgICAgICAgICAgICAqIC0gc3Bpbm5lckZpZWxkSWQ6IGZpZWxkIGlkIGZvciBzaG93aW5nIHNwaW5uZXIgaW4gdGhlIGZvcm0gZmllbGQgKHVzZXMgZm9ybVZhbGlkYXRvcilcbiAgICAgICAgICAgICAqIC0gc3Bpbm5lck1lc3NhZ2U6IG1lc3NhZ2UgdG8gc2hvdyB3aXRoIHNwaW5uZXJcbiAgICAgICAgICAgICAqIC0gZXJyb3JNZXNzYWdlOiBkZWZhdWx0IGVycm9yIG1lc3NhZ2UgdG8gc2hvdyBpbiBjYXNlIG9mIGVycm9yLiBQYXNzICdmYWxzZScgdG8gc3VwcHJlc3MuXG4gICAgICAgICAgICAgKiAtIHN1Y2Nlc3NNZXNzYWdlOiBkZWZhdWx0IHN1Y2Nlc3MgbWVzc2FnZSB0byBzaG93IGluIGNhc2Ugb2Ygc3VjY2Vzcy4gUGFzcyAnZmFsc2UnIHRvIHN1cHByZXNzLlxuICAgICAgICAgICAgICogLSBmb3JtVmFsaWRhdG9yOiByZWZlcmVuY2UgdG8gQ2hheWthLkZvcm1zLmZvcm1WYWxpZGF0b3JcbiAgICAgICAgICAgICAqIC0gdmFsaWRhdGVPblNlbmQ6IHNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCBhdXRvbWF0aWMgdmFsaWRhdGlvblxuICAgICAgICAgICAgICogLSBzY29wZTogc2NvcGUgdG8gY2FsbCAkYXBwbHkgaW4gY2FsbGJhY2tzXG4gICAgICAgICAgICAgKiAtIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKVxuICAgICAgICAgICAgICogLSBlcnJvcjogZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpXG4gICAgICAgICAgICAgKiAtIGNvbXBsZXRlOiBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZylcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJlcGFyZTogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lciA9IG9wdGlvbnMuc3Bpbm5lcjsgLy98fCBudWxsO1xuICAgICAgICAgICAgICAgIGlmKCFzcGlubmVyICYmIHNwaW5uZXIgIT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBzcGlubmVySWQgPSBvcHRpb25zLnNwaW5uZXJJZCB8fCAnc3Bpbm5lcic7XG4gICAgICAgICAgICAgICAgdmFyIHNwaW5uZXJGaWVsZElkID0gb3B0aW9ucy5zcGlubmVyRmllbGRJZDtcbiAgICAgICAgICAgICAgICB2YXIgc3Bpbm5lck1lc3NhZ2UgPSBvcHRpb25zLnNwaW5uZXJNZXNzYWdlIHx8ICdQcm9jZXNzaW5nLi4uJztcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gb3B0aW9ucy5lcnJvck1lc3NhZ2UgfHwgJ09wZXJhdGlvbiBmYWlsZWQnO1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzTWVzc2FnZSA9IG9wdGlvbnMuc3VjY2Vzc01lc3NhZ2U7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1WYWxpZGF0b3IgPSBvcHRpb25zLmZvcm1WYWxpZGF0b3I7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRlT25TZW5kID0gYW5ndWxhci5pc1VuZGVmaW5lZChvcHRpb25zLnZhbGlkYXRlT25TZW5kKT90cnVlOm9wdGlvbnMudmFsaWRhdGVPblNlbmQ7XG4gICAgICAgICAgICAgICAgdmFyIHNjb3BlID0gb3B0aW9ucy5zY29wZTtcblxuICAgICAgICAgICAgICAgIHZhciBzZW5kID0gb3B0aW9ucy5zZW5kO1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gb3B0aW9ucy5jb21wbGV0ZTtcblxuICAgICAgICAgICAgICAgIHNwaW5uZXJJZCA9IHNwaW5uZXJJZCArIGFqYXguc3Bpbm5lcnNVc2VkKys7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJlcGFyZWQgPSB7fTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZW5kZXIsIGVuc3VyZXMgYWxsIHRoZSBzcGlubmVyIGluaXRpYWxpemF0aW9uc1xuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIHNlbmRIYW5kbGVyID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZihmb3JtVmFsaWRhdG9yICYmIHZhbGlkYXRlT25TZW5kICYmICEoIXNwaW5uZXJGaWVsZElkICYmIGZvcm1WYWxpZGF0b3IudmFsaWRhdGVGaWVsZHMoKSB8fCBzcGlubmVyRmllbGRJZCAmJiBmb3JtVmFsaWRhdG9yLnZhbGlkYXRlRmllbGRCeUlkKHNwaW5uZXJJZCkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihzZW5kICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihzZW5kKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNwaW5uZXIhPT1mYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Bpbm5lcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuc2hvdyhzcGlubmVyTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoc3Bpbm5lckZpZWxkSWQgJiYgZm9ybVZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3Iuc2V0RmllbGRTdGF0ZShzcGlubmVyRmllbGRJZCwgJ3Byb2dyZXNzJywgc3Bpbm5lck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFsU3Bpbm5lci5zaG93KHNwaW5uZXJNZXNzYWdlLCBzcGlubmVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1WYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3IuY2xlYXJNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNjb3BlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYoc2NvcGUgJiYgIXNjb3BlLiQkcGhhc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHByZXBhcmVkLnNlbmQgPSBzZW5kSGFuZGxlcjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIENvbXBsZXRlIGhhbmRsZXIsIGNhbGxlZCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHN0YXR1c1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbmZpZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBjb21wbGV0ZUhhbmRsZXIgPSBmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHNwaW5uZXIhPT1mYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzcGlubmVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNwaW5uZXJGaWVsZElkICYmIGZvcm1WYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3Iuc2V0RmllbGRTdGF0ZShzcGlubmVyRmllbGRJZCwgJ2NsZWFuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmFsU3Bpbm5lci5oaWRlKHNwaW5uZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoY29tcGxldGUgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGNvbXBsZXRlKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZShkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcHJlcGFyZWQuY29tcGxldGUgPSBjb21wbGV0ZUhhbmRsZXI7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBFeHRlbmRlZCBlcnJvciBoYW5kbGVyLCBjYWxscyBjb21wbGV0ZSBiZWZvcmVoYW5kXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzdGF0dXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb25maWdcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhamF4LnByb2Nlc3NSZXNwb25zZShkYXRhLCBlcnJvck1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlSGFuZGxlcihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9ycyA9IGFqYXguaGFuZGxlRXJyb3JzKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGVycm9ycyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlcnJvcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gZXJyb3JzW2ldIHx8IGVycm9yTWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihmb3JtVmFsaWRhdG9yKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNwaW5uZXJGaWVsZElkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtVmFsaWRhdG9yLnNldEZpZWxkU3RhdGUoc3Bpbm5lckZpZWxkSWQsICdlcnJvcicsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3Iuc2hvd0Vycm9ycyhlcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihtZXNzYWdlICE9PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuYWxlcnQobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzRnVuY3Rpb24oZXJyb3IpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihzY29wZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwcmVwYXJlZC5lcnJvciA9IGVycm9ySGFuZGxlcjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEV4dGVuZGVkIHN1Y2Nlc3MgaGFuZGxlciwgY2FsbHMgY29tcGxldGUgYmVmb3JlaGFuZCwgYW5kIGVycm9yIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGRhdGFcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc3RhdHVzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29uZmlnXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuICAgICAgICAgICAgICAgICAgICAvL3ZhciBkYXRhID0gJC5icnguQWpheC5kZXRlY3RBcmdEYXRhKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhamF4LnByb2Nlc3NSZXNwb25zZShkYXRhLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZUhhbmRsZXIoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBzdWNjZXNzTWVzc2FnZSA9PT0gZmFsc2UgPyBmYWxzZSA6IGRhdGEubWVzc2FnZSB8fCBzdWNjZXNzTWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvcm1WYWxpZGF0b3IgJiYgbWVzc2FnZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvci5zaG93TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN1Y2Nlc3MgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHN1Y2Nlc3MpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihzY29wZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5wYXRjaFNjb3BlKHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBwcmVwYXJlZC5zdWNjZXNzID0gc3VjY2Vzc0hhbmRsZXI7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlcGFyZWQ7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTWFpbiByZXF1ZXN0IGZ1bmN0aW9uLlxuICAgICAgICAgICAgICogQHBhcmFtIHVybFxuICAgICAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgY2FuIGNvbnRhaW4gYWxsIHRoZSAncHJlcGFyZScgb3B0aW9ucyBhbG9uZ3NpZGUgd2l0aDpcbiAgICAgICAgICAgICAqIC0gZGF0YTogZGF0YSBmb3IgcG9zdCwgcHV0LCBwYXRjaFxuICAgICAgICAgICAgICogLSBtZXRob2Q6IGh0dHAgbWV0aG9kICgnZ2V0JywgJ3Bvc3QnLCBldGMpXG4gICAgICAgICAgICAgKiAtIGNvbmZpZzogY29uZmlnIGZvciBhbmd1bGFyLiRodHRwXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKHVybCwgb3B0aW9ucyl7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAncG9zdCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IG9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlbmQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXRob2Qpe1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdnZXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGVhZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuaGVhZCh1cmwsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2pzb25wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5qc29ucCh1cmwsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Bvc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QodXJsLCBkYXRhLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwdXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCh1cmwsIGRhdGEsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdGNoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wYXRjaCh1cmwsIGRhdGEsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VuZCA9IHNlbmQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJlcGFyZWQgPSBhamF4LnByZXBhcmUob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHByZXBhcmVkLnNlbmQoKTtcblxuICAgICAgICAgICAgICAgIGlmKHByb21pc2Upe1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnN1Y2Nlc3MocHJlcGFyZWQuc3VjY2VzcykuZXJyb3IocHJlcGFyZWQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih1cmwsIG9wdGlvbnMsIGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAnZ2V0JztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBkZWw6IGZ1bmN0aW9uKHVybCwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdkZWxldGUnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhamF4LnJlcXVlc3QodXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhlYWQ6IGZ1bmN0aW9uKHVybCwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdoZWFkJztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBqc29ucDogZnVuY3Rpb24odXJsLCBvcHRpb25zLCBjb25maWcpe1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gJ2pzb25wJztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwb3N0OiBmdW5jdGlvbih1cmwsIGRhdGEsIG9wdGlvbnMsIGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSAncG9zdCc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwdXQ6IGZ1bmN0aW9uKHVybCwgZGF0YSwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdwdXQnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb25maWcgPSBjb25maWc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFqYXgucmVxdWVzdCh1cmwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcGF0Y2g6IGZ1bmN0aW9uKHVybCwgZGF0YSwgb3B0aW9ucywgY29uZmlnKXtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9ICdwYXRjaCc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWpheC5yZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGFqYXg7XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnYnV0dG9uQWpheFJlcXVlc3QnLCBbJ2FqYXgnLCAnbW9kYWxzJywgZnVuY3Rpb24oYWpheCwgbW9kYWxzKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICAgICAgdXJsOiAnQGJ1dHRvbkFqYXhSZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICBwb3N0RGF0YTogJz0/cG9zdCcsXG4gICAgICAgICAgICAgICAgY29uZmlybTogJ0A/JyxcbiAgICAgICAgICAgICAgICBmb3JtVmFsaWRhdG9yOiAnPT92YWxpZGF0b3InXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KXtcbiAgICAgICAgICAgICAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEubWVzc2FnZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuYWxlcnQoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IG9uU3VjY2Vzc1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuZm9ybVZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZm9ybVZhbGlkYXRvciA9ICRzY29wZS5mb3JtVmFsaWRhdG9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wb3N0RGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhamF4LnBvc3QoJHNjb3BlLnVybCwgJHNjb3BlLnBvc3REYXRhLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFqYXguZ2V0KCRzY29wZS51cmwsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuY2xpY2soZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmNvbmZpcm0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxzLmNvbmZpcm0oJHNjb3BlLmNvbmZpcm0sIHNlbmRSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG47IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLW1vZGFscycsIFsnY2hheWthLW5scycsICdjaGF5a2EtYnV0dG9ucycsICdjaGF5a2EtdXRpbHMnXSlcbiAgICAucHJvdmlkZXIoJ21vZGFscycsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRnZXQ6IFsnJHdpbmRvdycsICdubHMnLCAnYnV0dG9ucycsICd1dGlscycsIGZ1bmN0aW9uKCR3aW5kb3csIG5scywgYnRuLCB1dGlscyl7XG5cbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxzID0gdXRpbHMuZW5zdXJlKCdDaGF5a2EuTW9kYWxzJywge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZTogW10sXG4gICAgICAgICAgICAgICAgICAgIC8vcXVldWU6IG1vZGFscy5xdWV1ZSxcblxuICAgICAgICAgICAgICAgICAgICAvL3NldFF1ZXVlU2NvcGU6IGZ1bmN0aW9uKCRzY29wZSl7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIG1vZGFscy5zY29wZSA9ICRzY29wZTtcbiAgICAgICAgICAgICAgICAgICAgLy99LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGNvbmZpZyBvYmplY3QgdG8gYmUgcHVzaGVkIHRvIGEgbW9kYWwgcXVldWVcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge21vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmJ1dHRvbnMgJiYgYW5ndWxhci5pc09iamVjdChvcHRpb25zLmJ1dHRvbnMpICYmICFhbmd1bGFyLmlzQXJyYXkob3B0aW9ucy5idXR0b25zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidXR0b25zID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHZhciB7e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICB0ZXh0OiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIGNsaWNrOiBmdW5jdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgcGVyc2lzdDogYm9vbGVhbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgY2xzOiBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB9fSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gob3B0aW9ucy5idXR0b25zLCBmdW5jdGlvbihidXR0b24sIHRleHQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24udGV4dCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMucHVzaChidXR0b24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGJ1dHRvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gYW5ndWxhci5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgbSA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zLCBtb2RhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL20ucHJvdG90eXBlID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChtLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIG0uZWxlbWVudC5kYXRhKCdtb2RhbCcsIG0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2hvd3MgYW55dGhpbmcgaW4gYSBtb2RhbCB3aW5kb3cuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAqICAtIHRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAqICAtIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICogIC0gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgKiAgLSB3aWR0aFxuICAgICAgICAgICAgICAgICAgICAgKiAgLSBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICogIC0gYnV0dG9uc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG1vZGFscy5jcmVhdGUob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMucXVldWUucHVzaChtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTaG93cyBhbGVydCBib3guXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbdGl0bGVdXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbbW9kYWxDbGFzc11cbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgYWxlcnQ6IGZ1bmN0aW9uKG1lc3NhZ2UsIHRpdGxlLCBtb2RhbENsYXNzLCBjYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbENsYXNzID0gbW9kYWxDbGFzcyB8fCAnbW9kYWxfYWxlcnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxzLnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsQ2xhc3M6IG1vZGFsQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGV4dDogbmxzLl8oJ09rJyksIGNsaWNrOiBjYWxsYmFja31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2hvd3MgY29uZmlybSBib3hcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt0aXRsZV1cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IGZ1bmN0aW9uKG1lc3NhZ2UsIGNhbGxiYWNrLCB0aXRsZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWxDbGFzczogJ21vZGFsX2NvbmZpcm0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbW9kYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RleHQ6IG5scy5fKCdZZXMnKSwgY2xpY2s6IGNhbGxiYWNrfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RleHQ6IG5scy5fKCdObycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDbG9zZSBjdXJyZW50IG1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oJGV2ZW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkZXZlbnQgfHwgJGV2ZW50LnRhcmdldCA9PT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFscy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBHZXQgYnV0dG9uIGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e3RleHQ6IHN0cmluZywgY2xpY2s6IGZ1bmN0aW9uLCBjbHM6IHN0cmluZ319IGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBnZXRCdXR0b25DbGFzczogZnVuY3Rpb24oYnV0dG9uKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGJ1dHRvbkNsYXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbkNsYXNzID0gYnRuLmdldEJ1dHRvbkNsYXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMucHVzaChidXR0b25DbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uICYmIGJ1dHRvbi5jbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMucHVzaChidXR0b24uY2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbHMuam9pbignICcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL21vZGFscyA9IGFuZ3VsYXIuZXh0ZW5kKG1vZGFscywgYXBpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBtb2RhbHM7XG4gICAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgIH0pXG4gICAgLmRpcmVjdGl2ZSgnbW9kYWxzTWFuYWdlcicsIFsnbW9kYWxzJywgJ2J1dHRvbnMnLCBmdW5jdGlvbihtb2RhbHMpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdtbScsXG4gICAgICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7fSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBpZD1cImNoYXlrYS1tb2RhbHNcIiBkYXRhLW5nLXNob3c9XCJtbS5xdWV1ZS5sZW5ndGhcIiBjbGFzcz1cIm5nLWNsb2FrIGNoYXlrYS1tb2RhbHNcIiBkYXRhLW5nLWNsb2FrPVwiXCI+JyArXG4gICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtZmFkZXJcIiBkYXRhLW5nLWNsaWNrPVwibW0uY2xvc2UoJGV2ZW50KVwiPicgK1xuICAgICAgICAgICAgJyAgICAgICA8ZGl2IGRhdGEtbmctcmVwZWF0PVwiaXRlbSBpbiBtbS5xdWV1ZSB8IGxpbWl0VG86IDFcIiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtbW9kYWxcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9oZWFkZXJcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLXRpdGxlXCI+e3tpdGVtLnRpdGxlIHwgbmxzfX08L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLWNsb3NlXCIgZGF0YS1uZy1jbGljaz1cIm1tLmNsb3NlKCRldmVudClcIj4mdGltZXM7PC9kaXY+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9ib2R5XCI+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX2JvZHktY29udGVudFwiIGRhdGEtbmctYmluZC1odG1sPVwiaXRlbS5jb250ZW50XCI+PC9kaXY+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9idXR0b25zXCIgZGF0YS1uZy1zaG93PVwiaXRlbS5idXR0b25zICYmIGl0ZW0uYnV0dG9ucy5sZW5ndGhcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtbmctcmVwZWF0PVwiYnV0dG9uIGluIGl0ZW0uYnV0dG9uc1wiIGRhdGEtbmctY2xpY2s9XCJidXR0b24ucGVyc2lzdCB8fCBtbS5jbG9zZSgpOyBidXR0b24uY2xpY2sgJiYgYnV0dG9uLmNsaWNrKCk7XCIgY2xhc3M9XCJ7e21tLmdldEJ1dHRvbkNsYXNzKGJ1dHRvbil9fVwiPnt7YnV0dG9uLnRleHQgfCBubHN9fTwvYnV0dG9uPicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPC9kaXY+JyArXG4gICAgICAgICAgICAnICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xuICAgICAgICAgICAgICAgIC8vJyAgIDxkaXYgY2xhc3M9XCJuZy1oaWRlXCIgaWQ9XCJjaGF5a2EtbW9kYWxzLXBvb2xcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlOiBtb2RhbHMuY2xvc2UsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBtb2RhbHMucXVldWUsXG4gICAgICAgICAgICAgICAgICAgIGdldEJ1dHRvbkNsYXNzOiBtb2RhbHMuZ2V0QnV0dG9uQ2xhc3NcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5kaXJlY3RpdmUoJ21vZGFsJywgWydtb2RhbHMnLCBmdW5jdGlvbihtb2RhbHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ20nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBtb2RhbDogJz1tb2RhbCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdAP21vZGFsVGl0bGUnLFxuICAgICAgICAgICAgICAgIHNob3c6ICdAbW9kYWxTaG93JyxcbiAgICAgICAgICAgICAgICBidXR0b25zOiAnPT9tb2RhbEJ1dHRvbnMnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnQG1vZGFsV2lkdGgnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJ0Btb2RhbEhlaWdodCcsXG4gICAgICAgICAgICAgICAgb25DbG9zZTogJyY/b25Nb2RhbENsb3NlJ1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY2hheWthLW1vZGFscyBuZy1jbG9ha1wiIGRhdGEtbmctc2hvdz1cIm0uaXNPcGVuXCI+JyArXG4gICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtZmFkZXJcIiBkYXRhLW5nLWNsaWNrPVwibS5oaWRlKCRldmVudClcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgPGRpdiBjbGFzcz1cImNoYXlrYS1tb2RhbHMtbW9kYWxcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9oZWFkZXJcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLXRpdGxlXCI+e3ttLnRpdGxlIHwgbmxzfX08L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfaGVhZGVyLWNsb3NlXCIgZGF0YS1uZy1jbGljaz1cIm0uaGlkZSgkZXZlbnQpXCI+JnRpbWVzOzwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICAgICAgPC9kaXY+JyArXG4gICAgICAgICAgICAnICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfYm9keVwiIGRhdGEtbmctdHJhbnNjbHVkZT48L2Rpdj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9idXR0b25zXCIgZGF0YS1uZy1zaG93PVwibS5idXR0b25zICYmIG0uYnV0dG9ucy5sZW5ndGhcIj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtbmctcmVwZWF0PVwiYnV0dG9uIGluIGJ1dHRvbnNcIiBkYXRhLW5nLWNsaWNrPVwiYnV0dG9uLnBlcnNpc3QgfHwgbS5oaWRlKCk7IGJ1dHRvbi5jbGljayAmJiBidXR0b24uY2xpY2soKTtcIiBjbGFzcz1cInt7bS5nZXRCdXR0b25DbGFzcyhidXR0b24pfX1cIj57e2J1dHRvbi50ZXh0IHwgbmxzfX08L2J1dHRvbj4nICtcbiAgICAgICAgICAgICcgICAgICAgICAgIDwvZGl2PicgK1xuICAgICAgICAgICAgJyAgICAgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICcgICA8L2Rpdj4nICtcbiAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdtb2RhbC5kaXJlY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgIHZhciBjdHJsID0ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW10sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNob3cgZWxlbWVudCB3aXRoaW4gbW9kYWwgcG9wdXAuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmlzT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEhpZGUgbW9kYWwgcG9wdXAuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uICgkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJGV2ZW50IHx8ICRldmVudC50YXJnZXQgPT09ICRldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm9uQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9uQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNldCBwb3B1cCB3aW5kb3cuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2V0VGl0bGU6IGZ1bmN0aW9uICh0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTZXQgYnV0dG9uIHNldC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtvYmplY3R8QXJyYXl9IGJ1dHRvbnNcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHNldEJ1dHRvbnM6IGZ1bmN0aW9uIChidXR0b25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9ucyAmJiBhbmd1bGFyLmlzT2JqZWN0KGJ1dHRvbnMpICYmICFhbmd1bGFyLmlzQXJyYXkoYnV0dG9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnRucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChidXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uLCB0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0ID0gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRucy5wdXNoKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9ucyA9IGJ0bnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmJ1dHRvbnMgPSAkc2NvcGUuYnV0dG9ucyA9IGJ1dHRvbnM7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZ2V0QnV0dG9uQ2xhc3M6IGZ1bmN0aW9uIChidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RhbHMuZ2V0QnV0dG9uQ2xhc3MoYnV0dG9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJ1dHRvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRCdXR0b25zKCRzY29wZS5idXR0b25zKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWwgPSBjdHJsO1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2hvdykge1xuICAgICAgICAgICAgICAgICAgICBjdHJsLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jc3MoJ2hlaWdodCcsICRzY29wZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuY3NzKCd3aWR0aCcsICRzY29wZS53aWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJ25sc1Byb3ZpZGVyJywgZnVuY3Rpb24obmxzUHJvdmlkZXIpe1xuXG4gICAgICAgIC8vIEFkZGluZyBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciB0aGUgRW5nbGlzaCBsYW5ndWFnZVxuICAgICAgICBubHNQcm92aWRlci5zZXRUcmFuc2xhdGlvbnMoJ2VuLVVTJywge1xuICAgICAgICAgICAgJ1llcyc6ICdZZXMnLFxuICAgICAgICAgICAgJ05vJzogJ05vJyxcbiAgICAgICAgICAgICdPayc6ICdPaydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdydS1SVScsIHtcbiAgICAgICAgICAgICdZZXMnOiAn0JTQsCcsXG4gICAgICAgICAgICAnTm8nOiAn0J3QtdGCJyxcbiAgICAgICAgICAgICdPayc6ICdPaydcbiAgICAgICAgfSk7XG4gICAgfV0pXG47IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIGNoYXlrYS1mb3Jtc1xuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhpcyBpcyBhIG1vZHVsZSB0aGF0IGVuYWJsZXMgZm9ybSB2YWxpZGF0aW9uIHN0dWZmLlxuICovXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLWZvcm1zJywgWyduZ1Nhbml0aXplJywgJ2NoYXlrYS1tb2RhbHMnLCAnY2hheWthLW5scycsICdjaGF5a2EtYWpheCddKVxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAgICAgKiBAbmFtZSBjaGF5a2EtZm9ybXMjZm9ybVZhbGlkYXRvclxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVGhpcyBkaXJlY3RpdmUgY3JlYXRlcyB3cmFwcGVyIGZvciB0aGUgZmllbGRzIHRoYXQgc2hvdWxkIGJlIHZhbGlkYXRlZC5cbiAgICAgKiBUaGVuIHlvdSBjYW4gYWNjZXNzIGl0IGFuZCBwZXJmb3JtIGZpZWxkIHNldCB2YWxpZGF0aW9uLlxuICAgICAqL1xuICAgIC5kaXJlY3RpdmUoJ2Zvcm1WYWxpZGF0b3InLCBbJyR3aW5kb3cnLCAnbW9kYWxzJywgJ2FqYXgnLCAndXRpbHMnLCBmdW5jdGlvbigkd2luZG93LCBtb2RhbHMsIGFqYXgsIHV0aWxzKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgLy90cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3I6ICc9P2Zvcm1WYWxpZGF0b3InLFxuICAgICAgICAgICAgICAgIHNjcm9sbE1hcmdpbjogJ0AnLFxuICAgICAgICAgICAgICAgIHNjcm9sbER1cmF0aW9uOiAnQCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50KXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG4gICAgICAgICAgICAgICAgdmFyIGN0cmwgPSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTWFyZ2luOiAkc2NvcGUuc2Nyb2xsTWFyZ2luIHx8IDUwLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxEdXJhdGlvbjogJHNjb3BlLnNjcm9sbE1hcmdpbiB8fCA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogJHNjb3BlLmZpZWxkcyB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJveDogbnVsbCxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2V0cyBtZXNzYWdlIGJveCBmb3IgdmFsaWRhdG9yLlxuICAgICAgICAgICAgICAgICAgICAgKiBUaGUgYm94IHRoYXQgd2lsbCBzaG93IGNvbW1vbiBlcnJvcnMuXG4gICAgICAgICAgICAgICAgICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGJ5ICdmb3JtLW1lc3NhZ2UnIGRpcmVjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogSWYgbm90IHNldCwgQ2hheWthLk1vZGFscy5hbGVydCgpIHdpbGwgYmUgdXRpbGl6ZWQuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBtc2dCb3hcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VCb3g6IGZ1bmN0aW9uKG1zZ0JveCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLm1lc3NhZ2VCb3ggPSBtc2dCb3g7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNob3cgbWVzc2FnZSB1c2luZyBtZXNzYWdlIGJveCBvciBDaGF5a2EuTW9kYWxzLmFsZXJ0KClcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2hvd01lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UsIHN0YXRlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHJsLm1lc3NhZ2VCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLm1lc3NhZ2VCb3gubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5tZXNzYWdlQm94LnN0YXRlID0gc3RhdGUgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RhbHMuYWxlcnQobWVzc2FnZSwgJycsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogSGlkZSBtZXNzYWdlIHNob3duIGJ5IG1lc3NhZ2UgYm94XG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJNZXNzYWdlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwubWVzc2FnZUJveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwubWVzc2FnZUJveC5tZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5tZXNzYWdlQm94LnN0YXRlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEFkZCBmaWVsZCB0byB0aGUgc2V0IG9mIHZhbGlkYXRlZCBmaWVsZHNcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5maWVsZHNbZmllbGRbJ25hbWUnXV0gPSBmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2V0IGZpZWxkIHN0YXRlIGFuZCBtZXNzYWdlIChoaW50KVxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3wkc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFN0YXRlOiBmdW5jdGlvbihmaWVsZCwgc3RhdGUsIG1lc3NhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNTdHJpbmcoZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBjdHJsLmZpZWxkc1tmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRbJ3ZhbGlkJ10gPSBzdGF0ZSA9PT0gJ3ZhbGlkJyB8fCBzdGF0ZSA9PT0gJ2NsZWFuJyB8fCBzdGF0ZSA9PT0gJ3Byb2dyZXNzJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkWydzdGF0ZSddID0gc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFsnbWVzc2FnZSddID0gbWVzc2FnZSB8fCBmaWVsZFsnaGludCddO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3V0aWxzLnBhdGNoU2NvcGUoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTZXQgZmllbGQgc3RhdGUgdG8gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd8c2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZEVycm9yOiBmdW5jdGlvbihmaWVsZCwgbWVzc2FnZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldEZpZWxkU3RhdGUoZmllbGQsICdpbnZhbGlkJywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENsZWFyIGZpZWxkIGVycm9yIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyRmllbGRFcnJvcjogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAnY2xlYXInKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgcmVxdWlyZWQgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tSZXF1aXJlZDogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ucmVxdWlyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8ICEhZmllbGRbJ3ZhbHVlJ107XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIGZpZWxkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tMZW5ndGg6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgIShjLm1heCAmJiBmaWVsZFsndmFsdWUnXS5sZW5ndGggPiBjLm1heCB8fCBmaWVsZFsndmFsdWUnXS5sZW5ndGggPCBjLm1pbik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIGZpZWxkIHZhbHVlIHJhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSBtaW5cbiAgICAgICAgICAgICAgICAgICAgICogLSBtaW5FXG4gICAgICAgICAgICAgICAgICAgICAqIC0gbWF4XG4gICAgICAgICAgICAgICAgICAgICAqIC0gbWF4RVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUmFuZ2U6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvd2VyID0gYy5taW4gJiYgKGMubWluRSAmJiBmaWVsZFsndmFsdWUnXSA8IGMubWluIHx8ICFjLm1pbkUgJiYgZmllbGRbJ3ZhbHVlJ10gPD0gYy5taW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdyZWF0ZXIgPSBjLm1heCAmJiAoYy5tYXhFICYmIGZpZWxkWyd2YWx1ZSddID4gYy5tYXggfHwgIWMubWluRSAmJiBmaWVsZFsndmFsdWUnXSA+PSBjLm1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8ICEobG93ZXIgfHwgZ3JlYXRlcik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIGZpZWxkIHZhbHVlIGx0ICg8KS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gbWF4XG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tMdDogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ubHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8IGZpZWxkWyd2YWx1ZSddIDwgYy5tYXg7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoZWNrIGZpZWxkIHZhbHVlIGxlICg8PSkuXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7JHNjb3BlfSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgKiAtIG1heFxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrTGU6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjLmFjdGl2ZSB8fCBmaWVsZFsndmFsdWUnXSA8PSBjLm1heDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgdmFsdWUgZ3QgKD4pLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSBtaW5cbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja0d0OiBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGZpZWxkWydjaGVja3MnXS5ndDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgZmllbGRbJ3ZhbHVlJ10gPiBjLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgZmllbGQgdmFsdWUgZ2UgKD49KS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gbWluXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tHZTogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10uZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8IGZpZWxkWyd2YWx1ZSddID49IGMubWluO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDaGVjayBmaWVsZCB2YWx1ZSBhZ2FpbnN0IHJlZ2V4cC5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gcmVnZXhwXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfGJvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjaGVja1JlZ2V4cDogZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmaWVsZFsnY2hlY2tzJ10ucmVnZXhwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gYy5yZWdleHAudGVzdChmaWVsZFsndmFsdWUnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5mb3JiaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9ICF2YWxpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgdmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbXBhcmUgdHdvIHBhc3N3b3JkIGZpZWxkIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIC0gcmVwZWF0XG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tQYXNzd29yZHM6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLnBhc3N3b3JkcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXBlYXRGaWVsZCA9IGN0cmwuZmllbGRzW2MucmVwZWF0XSB8fCBmaWVsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhYy5hY3RpdmUgfHwgZmllbGRbJ3ZhbHVlJ10gPT09IHJlcGVhdEZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDaGVjayB2YWx1ZSB1c2luZyBhcGkgY2FsbC5cbiAgICAgICAgICAgICAgICAgICAgICogU3RvcmVzIGNoZWNrZWQgdmFsdWVzIHRvIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogLSB1cmxcbiAgICAgICAgICAgICAgICAgICAgICogLSBkZWxheVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tBcGk6IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLmFwaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSB1dGlscy50ZW1wbGF0ZShjLnVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGVuY29kZVVSSUNvbXBvbmVudChmaWVsZFsnbmFtZSddKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW5jb2RlVVJJQ29tcG9uZW50KGZpZWxkWyd2YWx1ZSddKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBmaWVsZFsndmFsdWUnXSArICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluIGMuZGljdGlvbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3ZhbGlkJyA9PT0gYy5kaWN0aW9uYXJ5W3ZhbHVlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAndmFsaWQnLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ2ludmFsaWQnLCBjLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjLmRpY3Rpb25hcnlbdmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuZGljdGlvbmFyeVt2YWx1ZV0gPSAncHJvZ3Jlc3MnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXguZ2V0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyOiAkc2NvcGUuc3Bpbm5lcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bpbm5lckZpZWxkSWQ6IGZpZWxkWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaW5uZXJNZXNzYWdlOiAnICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvcjogY3RybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBjLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlT25TZW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5kaXIoeydkYXRhJzogZGF0YX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5kaWN0aW9uYXJ5W3ZhbHVlXSA9ICd2YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldEZpZWxkU3RhdGUoZmllbGQsICd2YWxpZCcsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmRpY3Rpb25hcnlbdmFsdWVdID0gJ2ludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5tZXNzYWdlID0gYy5tZXNzYWdlIHx8ICdtYXNzX2Vycm9ycycgPT09IGRhdGEuY29kZSAmJiBkYXRhLm1lc3NhZ2VbZmllbGRbJ25hbWUnXV0gfHwgZGF0YS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8IGMuZGljdGlvbmFyeVt2YWx1ZV07XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogUGVyZm9ybSBjdXN0b20gY2hlY2sgYnkgY2FsbGluZyBwcm92aWRlZCBzY29wZSBjYWxsYmFjay5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHskc2NvcGV9IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tDdXN0b206IGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZmllbGRbJ2NoZWNrcyddLmN1c3RvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGMuY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWMuYWN0aXZlIHx8ICRzY29wZS4kcGFyZW50W2NhbGxiYWNrXS5jYWxsKCRzY29wZSwgZmllbGRbJ3ZhbHVlJ10pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBQZXJmb3JtIGFsbCB0aGUgc2V0IHVwIGNoZWNrcyBmb3IgdGhlIGdpdmVuIGZpZWxkLlxuICAgICAgICAgICAgICAgICAgICAgKiBJZiBzaWxlbnQsIGRvZXMgbm90IHZpc3VhbGl6ZSB2YWxpZGF0aW9uIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyRzY29wZX0gZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbc2lsZW50XVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRmllbGQ6IGZ1bmN0aW9uKGZpZWxkLCBzaWxlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tzID0gZmllbGRbJ2NoZWNrcyddO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkWydhY3RpdmUnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tzLnJlcXVpcmVkICYmICFjdHJsLmNoZWNrUmVxdWlyZWQoZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gY2hlY2tzLnJlcXVpcmVkLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFsndmFsdWUnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjaGVja3MsIGZ1bmN0aW9uKGMsIGNoZWNrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrTGVuZ3RoKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JhbmdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tSYW5nZShmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrTHQoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY3RybC5jaGVja0xlKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2d0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tHdChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBjdHJsLmNoZWNrR2UoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVnZXhwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tSZWdleHAoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFzc3dvcmRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGN0cmwuY2hlY2tQYXNzd29yZHMoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGMubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQgJiYgY2hlY2tzLmN1c3RvbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gY3RybC5jaGVja0N1c3RvbShmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHZhbGlkID8gJycgOiBjaGVja3MuY3VzdG9tLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gdmFsaWQgPyAndmFsaWQnIDogJ2ludmFsaWQnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQgJiYgY2hlY2tzLmFwaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gY3RybC5jaGVja0FwaShmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHN0YXRlID09PSAnaW52YWxpZCcgPyBjaGVja3MuYXBpLm1lc3NhZ2UgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgc3RhdGUsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGQudmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFZhbGlkYXRlIGZpZWxkIGJ5IGZpZWxkIGlkXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBmaWVsZElkXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBbc2lsZW50XVxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGaWVsZEJ5SWQ6IGZ1bmN0aW9uKGZpZWxkSWQsIHNpbGVudCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBjdHJsLmZpZWxkc1tmaWVsZElkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnZhbGlkYXRlRmllbGQoZmllbGQsIHNpbGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFZhbGlkYXRlIGFsbCByZWdpc3RlcmVkIGZpZWxkcyBhbmQgc2Nyb2xsIHRvXG4gICAgICAgICAgICAgICAgICAgICAqIHRvcCBpbnZhbGlkIGZpZWxkIGluIGNhc2UgaXQgaXMgaW52aXNpYmxlLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRmllbGRzOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGN0cmwuZmllbGRzLCBmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsLnZhbGlkYXRlRmllbGQoZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxQb3MgPSBmaWVsZC5lbGVtZW50Lm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzY3JvbGxUbyB8fCBzY3JvbGxQb3MgJiYgc2Nyb2xsVG8gPiBzY3JvbGxQb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvID0gc2Nyb2xsUG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCAmJiBzY3JvbGxUbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2Nyb2xsVG8oc2Nyb2xsVG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS52YWxpZCA9IHZhbGlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNjcm9sbCB0byBzZXQgcG9zaXRpb24gaW4gY2FzZSBpZiBwb3NpdGlvbiBpcyBvdXQgb2YgdGhlIHZpZXBvcnQuXG4gICAgICAgICAgICAgICAgICAgICAqIElmIGR1cmF0aW9uIGlzIDAsIHNjcm9sbCBpcyBub3QgYW5pbWF0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAqIERlZmF1bHQgZHVyYXRpb24gdmFsdWUgaXMgdGFrZW4gZnJvbSBtYXJrdXAgKHNlZSBzY3JvbGwtZHVyYXRpb24gZGlyZWN0aXZlKS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbnR9IHNjcm9sbFRvXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fHN0cmluZ30gW2R1cmF0aW9uXVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG86IGZ1bmN0aW9uKHNjcm9sbFRvLCBkdXJhdGlvbil7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGR1cmF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gcGFyc2VJbnQoY3RybC5zY3JvbGxEdXJhdGlvbikgfHwgY3RybC5zY3JvbGxEdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG8gLT0gcGFyc2VJbnQoY3RybC5zY3JvbGxNYXJnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR3aW5kb3cualF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICQgPSAkd2luZG93LmpRdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG8gPCAkd2luZG93LnBhZ2VZT2Zmc2V0IHx8IHNjcm9sbFRvID4gJHdpbmRvdy5wYWdlWU9mZnNldCArICQoJHdpbmRvdykuaGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsVG99LCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmpRdWVyeSgnaHRtbCwgYm9keScpLnNjcm9sbFRvcChzY3JvbGxUbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNjcm9sbCB0byB0b3Agb2YgdGhlIGZvcm0tdmFsaWRhdG9yIERPTS1lbGVtZW50IGlmIG9uZSBpcyBub3QgdmlzaWJsZS5cbiAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtpbnR8c3RyaW5nfSBbZHVyYXRpb25dXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxVcDogZnVuY3Rpb24oZHVyYXRpb24pe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zY3JvbGxUbygkc2NvcGUuZWxlbWVudC5vZmZzZXQoKS50b3AsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogU2hvdyBzZXQgb2YgZXJyb3JzIG9yZ2FuaXplZCBieSBmaWVsZHMuXG4gICAgICAgICAgICAgICAgICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgaGFuZHkgdG8gc2hvdyBlcnJvcnMgZnJvbSBiYWNrZW5kIGFwaSBjYWxsLlxuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBFcnJvcnMgZm9yIG5vbi1leGlzdGluZyBmaWVsZHMgd2lsbCBiZSBzaG93biBpbiBtZXNzYWdlIGJveFxuICAgICAgICAgICAgICAgICAgICAgKiBvciB2aWEgQ2hheWthLk1vZGFscy5hbGVydCgpO1xuICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3JzOiBmdW5jdGlvbihlcnJvcnMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChlcnJvcnMsIGZ1bmN0aW9uKG1lc3NhZ2UsIGtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gY3RybC5maWVsZHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAnaW52YWxpZCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsUG9zID0gZmllbGQuZWxlbWVudC5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2Nyb2xsVG8gfHwgc2Nyb2xsUG9zICYmIHNjcm9sbFRvID4gc2Nyb2xsUG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUbyA9IHNjcm9sbFBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2hvd01lc3NhZ2UobWVzc2FnZSwgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2Nyb2xsVG8oc2Nyb2xsVG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBHZXQgZm9ybSBmaWVsZHMgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge3t9fVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZ2V0RmllbGRWYWx1ZXM6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY3RybC5maWVsZHMsIGZ1bmN0aW9uKGZpZWxkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbZmllbGRdID0gY3RybC5maWVsZHNbZmllbGRdLnZhbHVlIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbGlkYXRvciA9IGN0cmw7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY3RybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuZGlyZWN0aXZlKCdmb3JtRmllbGQnLCBbJ25scycsICdkZWxheWVkQ2FsbCcsICd1dGlscycsIGZ1bmN0aW9uKG5scywgZGVsYXllZENhbGwsIHV0aWxzKXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVpcmU6IFsnXl5mb3JtVmFsaWRhdG9yJywgJ2Zvcm1GaWVsZCddLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnZicsXG4gICAgICAgICAgICB0ZW1wbGF0ZTpcbiAgICAgICAgICAgICAgICAnPGxhYmVsPnt7Zi5sYWJlbHxubHN9fTwvbGFiZWw+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbnB1dCB7e2Yuc3RhdGV9fVwiIGRhdGEtbmctdHJhbnNjbHVkZT48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1lc3NhZ2VcIiBkYXRhLW5nLWNsYXNzPVwie2Vycm9yOiAhZi52YWxpZH1cIiBkYXRhLW5nLWJpbmQtaHRtbD1cImYubWVzc2FnZVwiPjwvZGl2PicsXG4gICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdAZm9ybUZpZWxkJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0AnLFxuICAgICAgICAgICAgICAgIGhpbnQ6ICdAJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQGhpbnQnXG4gICAgICAgICAgICAgICAgLy92YWx1ZTogJz0nXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXJzKXtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybUN0cmwgPSBjb250cm9sbGVyc1swXSwgZmllbGQgPSBjb250cm9sbGVyc1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgJGlucHV0ID0gJGVsZW1lbnQuZmluZCgnW25nLW1vZGVsXSxbZGF0YS1uZy1tb2RlbF0nKSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlID0gJGlucHV0LmF0dHIoJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICAgICAgJG9sZExhYmVsID0gJGVsZW1lbnQuZmluZCgnLmlucHV0ID4gbGFiZWw6Zmlyc3QtY2hpbGQnKSxcbiAgICAgICAgICAgICAgICAgICAgJG5ld0xhYmVsID0gJGVsZW1lbnQuZmluZCgnPiBsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGZpZWxkLm1vZGVsID0gJGlucHV0LmF0dHIoJ2RhdGEtbmctbW9kZWwnKSB8fCAkaW5wdXQuYXR0cignbmctbW9kZWwnKTtcbiAgICAgICAgICAgICAgICBmaWVsZC5lbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUubGFiZWwgJiYgaW5wdXRUeXBlICE9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sYWJlbCA9ICRvbGRMYWJlbC50ZXh0KCkucmVwbGFjZSgvXFxzKjpcXHMqJC8sICcnKTtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRvbGRMYWJlbC5hdHRyaWJ1dGVzLCBmdW5jdGlvbihpLCBhdHRyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRuZXdMYWJlbC5hdHRyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICRuZXdMYWJlbC5hZGRDbGFzcygkb2xkTGFiZWwuYXR0cignY2xhc3MnKSk7XG4gICAgICAgICAgICAgICAgICAgICRuZXdMYWJlbC50ZXh0KCRzY29wZS5sYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICRvbGRMYWJlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy9zY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmllbGQubGFiZWwgPSAkc2NvcGUubGFiZWw7XG4gICAgICAgICAgICAgICAgZmllbGQubmFtZSA9ICRzY29wZS5uYW1lO1xuICAgICAgICAgICAgICAgIGZpZWxkLm1lc3NhZ2UgPSAkc2NvcGUubWVzc2FnZTtcblxuICAgICAgICAgICAgICAgICRpbnB1dC5mb2N1cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvL2Zvcm1DdHJsLmNsZWFyRmllbGRFcnJvcihzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vZm9ybUN0cmwuc2V0RmllbGRTdGF0ZShmaWVsZCwgJ2NsZWFuJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkaW5wdXQuYmx1cihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvL2Zvcm1DdHJsLnNldEZpZWxkRXJyb3Ioc2NvcGUsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3ZhbGlkYXRpbmcgdmFsdWU6ICcrc2NvcGUudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUN0cmwudmFsaWRhdGVGaWVsZChmaWVsZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHV0aWxzLnBhdGNoU2NvcGUoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9zY29wZS4kYXBwbHkoKTsgLy8gb2tcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIHNldHVwIGRhdGEtY2hlY2staWY9XCJjb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwSWYoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkYXR0cnNbJ2NoZWNrSWYnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKCRhdHRyc1snY2hlY2tJZiddLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuYWN0aXZlID0gISF2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgcmVxdWlyZWQgZmllbGQgY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtcmVxdWlyZWQgPSBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJlcXVpcmVkLW1lc3NhZ2UgPSBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZXF1aXJlZC1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwUmVxdWlyZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tSZXF1aXJlZCddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbmxzLl8oc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tSZXF1aXJlZE1lc3NhZ2UnXSB8fCAnbWVzc2FnZV9yZXF1aXJlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yZXF1aXJlZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrUmVxdWlyZWRJZiddO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHBhcmVudC4kd2F0Y2goY29uZGl0aW9uLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJlcXVpcmVkLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBmaWVsZCB2YWx1ZSBsZW5ndGggY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbGVuZ3RoID0gXCJUaGUgbGVuZ3RoIG9mIHRoaXMgdmFsdWUgc2hvdWxkIGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9IHN5bWJvbHN8MHwxNnxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbGVuZ3RoLW1lc3NhZ2UgPSBcIlRoZSBsZW5ndGggb2YgdGhpcyB2YWx1ZSBzaG91bGQgYmUgYmV0d2VlbiB7bWlufSBhbmQge21heH0gc3ltYm9sc1wiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlbmd0aC1taW4gPSBcIjBcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sZW5ndGgtbWF4ID0gXCIxNlwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlbmd0aC1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBMZW5ndGgoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tMZW5ndGgnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gcGFyc2VJbnQoc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tMZW5ndGhNaW4nXSB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IHBhcnNlSW50KHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrTGVuZ3RoTWF4J10gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBubHMuXyhzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0xlbmd0aE1lc3NhZ2UnXSB8fCAnbWVzc2FnZV9sZW5ndGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB1dGlscy50ZW1wbGF0ZShtZXNzYWdlVGVtcGxhdGUsIHttaW46IG1pbiwgbWF4OiBtYXgsIGxhYmVsOiBmaWVsZC5sYWJlbH0pO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MubGVuZ3RoID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1szXSB8fCAkYXR0cnNbJ2NoZWNrTGVuZ3RoSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5sZW5ndGguYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHZhbHVlIHJhbmdlIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJhbmdlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9fD0wfDE2fGludHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmFuZ2UtbWVzc2FnZSA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBiZXR3ZWVuIHttaW59IGFuZCB7bWF4fVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJhbmdlLW1pbiA9IFwiPTBcIiAoJz0nIG1lYW5zICdpbmNsdXNpdmUnKVxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yYW5nZS1tYXggPSBcIjE2XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmFuZ2UtZm9ybWF0ID0gXCJpbnRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yYW5nZS1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBSYW5nZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0ID0gJGF0dHJzWydjaGVja1JhbmdlJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pblN0ciA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrUmFuZ2VNaW4nXSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluRSA9ICEhbWluU3RyLm1hdGNoKC9ePS8pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gbWluRSA/IG1pblN0ci5zdWJzdHIoMSkgOiBtaW5TdHI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhTdHIgPSBzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja1JhbmdlTWF4J10gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEUgPSAhIW1heFN0ci5tYXRjaCgvXj0vKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IG1heEUgPyBtYXhTdHIuc3Vic3RyKDEpIDogbWF4U3RyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tSYW5nZUZvcm1hdCddIHx8ICdpbnQnO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBwYXJzZUludChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IHBhcnNlSW50KG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmbG9hdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcGFyc2VGbG9hdChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VUZW1wbGF0ZSA9IHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrUmFuZ2VNZXNzYWdlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5scy5fKCdtZXNzYWdlX3JhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdXRpbHMudGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlLCB7bWluOiBtaW4sIG1heDogbWF4LCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJhbmdlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluRTogbWluRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4RTogbWF4RSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzRdIHx8ICRhdHRyc1snY2hlY2tSYW5nZUlmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucmFuZ2UuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHZhbHVlICdsb3dlciB0aGFuICg8KScuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbHQgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgbG93ZXIgdGhhbiB7bWF4fXwwfGludHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbHQtbWVzc2FnZSA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBsb3dlciB0aGFuIHttYXh9XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbHQtbWF4ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbHQtZm9ybWF0ID0gXCJpbnRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1sdC1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwTHQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tMdCddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja0x0TWF4J10gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VUZW1wbGF0ZSA9IHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrTHRNZXNzYWdlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5scy5fKCdtZXNzYWdlX2x0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdXRpbHMudGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlLCB7bWF4OiBtYXgsIGxhYmVsOiBmaWVsZC5sYWJlbH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tMdEZvcm1hdCddIHx8ICdpbnQnO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUludChtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbM10gfHwgJGF0dHJzWydjaGVja0x0SWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5sdC5hY3RpdmUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgZmllbGQgdmFsdWUgJ2xvd2VyIG9yIGVxdWFsICg8PSknLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGxvd2VyIHRoYW4ge21heH0gb3IgZXF1YWx8MHxpbnR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlLW1lc3NhZ2UgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgbG93ZXIgdGhhbiB7bWF4fSBvciBlcXVhbFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlLW1heCA9IFwiMFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWxlLWZvcm1hdCA9IFwiaW50XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stbGUtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cExlKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrTGUnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4ID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tMZU1heCddIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0xlTWVzc2FnZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBubHMuXygnbWVzc2FnZV9sZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHV0aWxzLnRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSwge21heDogbWF4LCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrTGVGb3JtYXQnXSB8fCAnaW50JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGFyc2VJbnQobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5sZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tMZUlmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MubGUuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHZhbHVlICdncmVhdGVyIHRoYW4gKD4pJy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1ndCA9IFwiVGhlIHZhbHVlIHNob3VsZCBiZSBncmVhdGVyIHRoYW4ge21pbn18MHxpbnR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWd0LW1lc3NhZ2UgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ3QtbWF4ID0gXCIwXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ3QtZm9ybWF0ID0gXCJpbnRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1ndC1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwR3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tHdCddO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnRzID0gc2hvcnQgPyBzaG9ydC5zcGxpdCgnfCcpIDogW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW4gPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja0d0TWluJ10gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VUZW1wbGF0ZSA9IHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrR3RNZXNzYWdlJ10gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5scy5fKCdtZXNzYWdlX2d0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdXRpbHMudGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlLCB7bWluOiBtaW4sIGxhYmVsOiBmaWVsZC5sYWJlbH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybWF0ID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tHdEZvcm1hdCddIHx8ICdpbnQnO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBwYXJzZUludChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmxvYXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBhcnNlRmxvYXQobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmd0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbM10gfHwgJGF0dHJzWydjaGVja0d0SWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5ndC5hY3RpdmUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0dXAgZmllbGQgdmFsdWUgJ2dyZWF0ZXIgb3IgZXF1YWwgKDw9KScuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ2UgPSBcIlRoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59IG9yIGVxdWFsfDB8aW50fHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1nZS1tZXNzYWdlID0gXCJUaGUgdmFsdWUgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB7bWlufSBvciBlcXVhbFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWdlLW1pbiA9IFwiMFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWdlLWZvcm1hdCA9IFwiaW50XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZ2UtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEdlKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrR2UnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tHZU1pbiddIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0dlTWVzc2FnZSddIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBubHMuXygnbWVzc2FnZV9nZScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHV0aWxzLnRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSwge21pbjogbWluLCBsYWJlbDogZmllbGQubGFiZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrR2VGb3JtYXQnXSB8fCAnaW50JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gcGFyc2VJbnQobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBwYXJzZUZsb2F0KG1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IG1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzNdIHx8ICRhdHRyc1snY2hlY2tHZUlmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MuZ2UuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGZpZWxkIHJlZ2V4cCBjaGVjay5cbiAgICAgICAgICAgICAgICAgKiBIZWFkcyB1cDogSWYgeW91IG5lZWQgJy8nIGNoYXIgaW4gYSBtZXNzYWdlIG9yICd8JyBjaGFyIGluIGEgcGF0dGVybixcbiAgICAgICAgICAgICAgICAgKiBZb3UnZCBiZXR0ZXIgdXNlIGV4dGVuZGVkIGZvcm1hdCBpbnN0ZWFkIG9mIHNob3J0IG9uZS5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZWdleHAgPSBcIkludmFsaWQgcGhvbmUgZm9ybWF0fC9cXGR7N30vaXxmb3JiaWR8c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJlZ2V4cC1tZXNzYWdlID0gXCJJbnZhbGlkIHBob25lIGZvcm1hdFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXJlZ2V4cC1wYXR0ZXJuID0gXCJcXGR7N31cIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1yZWdleHAtbW9kaWZpZXJzID0gXCJpXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmVnZXhwLWZvcmJpZCA9IFwiZm9yYmlkXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcmVnZXhwLWlmID0gXCJzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0dXBSZWdFeHAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tSZWdleHAnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybkFuZE1vZGlmaWVycyA9IHNob3J0ICYmIC9cXC8oLiopXFwvKFxcdyopJC8uZXhlYyhzaG9ydHNbMV0pIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrUmVnZXhwTWVzc2FnZSddIHx8IG5scy5fKCdtZXNzYWdlX3JlZ2V4cCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0dGVybiA9IHBhdHRlcm5BbmRNb2RpZmllcnNbMV0gfHwgJGF0dHJzWydjaGVja1JlZ2V4cFBhdHRlcm4nXSB8fCAnLionO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kaWZpZXJzID0gcGF0dGVybkFuZE1vZGlmaWVyc1syXSB8fCAkYXR0cnNbJ2NoZWNrUmVnZXhwTW9kaWZpZXJzJ10gfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JiaWQgPSBzaG9ydHNbMl0gfHwgJGF0dHJzWydjaGVja1JlZ2V4cEZvcmJpZCddIHx8IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIG1vZGlmaWVycyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJlZ2V4cCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleHA6IHJlZ2V4cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmJpZDogZm9yYmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbNF0gfHwgJGF0dHJzWydjaGVja1JlZ2V4cElmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MucmVnZXhwLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGlyKHsncmVnZXhwJzpzY29wZS5jaGVja3MucmVnZXhwfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBlbWFpbCBmaWVsZCBjaGVjay5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEh0bWwgZm9ybWF0OlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1lbWFpbCA9IFwiVmFsaWQgZW1haWwgZm9ybWF0OiB1c2VyQGRvbWFpbi5jb218c2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqIG9yXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWVtYWlsLW1lc3NhZ2UgPSBcIlZhbGlkIGVtYWlsIGZvcm1hdDogdXNlckBkb21haW4uY29tXCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stZW1haWwtaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEVtYWlsKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrRW1haWwnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5scy5fKHNob3J0c1swXSB8fCAkYXR0cnNbJ2NoZWNrRW1haWxNZXNzYWdlJ10gfHwgJ21lc3NhZ2VfZW1haWwnKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLnJlZ2V4cCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleHA6IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8kL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JiaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja0VtYWlsSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5yZWdleHAuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIHBhc3N3b3JkIGNvbXBhcmUgY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stcGFzc3dvcmRzID0gXCJwYXNzMV9pZHxQYXNzd29yZHMgZG8gbm90IG1hdGNofHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1wYXNzd29yZHMtbWVzc2FnZSA9IFwiSW52YWxpZCBwaG9uZSBmb3JtYXRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1wYXNzd29yZHMtcmVwZWF0ID0gXCJwYXNzMV9pZFwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLXBhc3N3b3Jkcy1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwUGFzc3dvcmRzKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrUGFzc3dvcmRzJ107IC8vICdwYXNzMWlkfNCS0LLQtdC00LXQvdC90YvQtSDQv9Cw0YDQvtC70Lgg0L7RgtC70LjRh9Cw0Y7RgtGB0Y8nXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVwZWF0ID0gc2hvcnRzWzBdIHx8ICRhdHRyc1snY2hlY2tQYXNzd29yZHNSZXBlYXQnXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHNob3J0c1sxXSB8fCAkYXR0cnNbJ2NoZWNrUGFzc3dvcmRzTWVzc2FnZSddIHx8IG5scy5fKCdtZXNzYWdlX3Bhc3N3b3JkcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5wYXNzd29yZHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0OiByZXBlYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHNob3J0c1syXSB8fCAkYXR0cnNbJ2NoZWNrUGFzc3dvcmRzSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5wYXNzd29yZHMuYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldHVwIGJhY2tlbmQgYXBpIGNoZWNrLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogSHRtbCBmb3JtYXQ6XG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWFwaSA9IFwiL2FwaS9jaGVjay1leGlzdGluZy97bmFtZX0ve3ZhbHVlfXxFbWFpbCBleGlzdHN8NTAwfHNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKiBvclxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1hcGktbWVzc2FnZSA9IFwiSW52YWxpZCBwaG9uZSBmb3JtYXRcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1hcGktdXJsID0gXCIvYXBpL2NoZWNrLWV4aXN0aW5nL3tuYW1lfS97dmFsdWV9XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stYXBpLWRlbGF5ID0gXCI1MDBcIlxuICAgICAgICAgICAgICAgICAqICAgICAgZGF0YS1jaGVjay1hcGktaWYgPSBcInNjb3BlQ29uZGl0aW9uXCJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEFwaUNhbGwoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydCA9ICRhdHRyc1snY2hlY2tBcGknXTsgLy8gJy9hcGkvY2hlY2stZXhpc3Rpbmcve25hbWV9L3t2YWx1ZX18RW1haWwgZXhpc3RzfDUwMCdcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3J0cyA9IHNob3J0ID8gc2hvcnQuc3BsaXQoJ3wnKSA6IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0FwaVVybCddO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gc2hvcnRzWzFdIHx8ICRhdHRyc1snY2hlY2tBcGlNZXNzYWdlJ107XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tBcGlEZWxheSddIHx8IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgZmllbGQuY2hlY2tzLmFwaSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiBkZWxheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpY3Rpb25hcnk6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb24gPSBzaG9ydHNbM10gfHwgJGF0dHJzWydjaGVja0FwaUlmJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChjb25kaXRpb24sIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MuYXBpLmFjdGl2ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkaW5wdXQub24oJ2tleXVwIGNoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ3RybC5zZXRGaWVsZFN0YXRlKGZpZWxkLCAnY2xlYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdXRpbHMucGF0Y2hTY29wZSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9zY29wZS4kYXBwbHkoKTsgLy8gb2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ZWRDYWxsKCdjaGVjay1hcGktJyArIGZpZWxkLm5hbWUsIGRlbGF5LCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtQ3RybC52YWxpZGF0ZUZpZWxkKGZpZWxkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91dGlscy5wYXRjaFNjb3BlKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXR1cCBjdXN0b20gY2hlY2suXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBIdG1sIGZvcm1hdDpcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stY3VzdG9tID0gXCJ2YWxpZGF0ZVByb2plY3RUaXRsZXxQcm9qZWN0IFRpdGxlIHNob3VsZCBiZSBzd2VldHxzY29wZUNvbmRpdGlvblwiXG4gICAgICAgICAgICAgICAgICogb3JcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stY3VzdG9tLW1lc3NhZ2UgPSBcIlByb2plY3QgVGl0bGUgc2hvdWxkIGJlIHN3ZWV0XCJcbiAgICAgICAgICAgICAgICAgKiAgICAgIGRhdGEtY2hlY2stY3VzdG9tLWNhbGxiYWNrID0gXCJ2YWxpZGF0ZVByb2plY3RUaXRsZVwiXG4gICAgICAgICAgICAgICAgICogICAgICBkYXRhLWNoZWNrLWN1c3RvbS1pZiA9IFwic2NvcGVDb25kaXRpb25cIlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogY2FsbGJhY2suY2FsbCgkc2NvcGUsIHZhbHVlKSB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldHVwQ3VzdG9tKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvcnQgPSAkYXR0cnNbJ2NoZWNrQ3VzdG9tJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG9ydHMgPSBzaG9ydCA/IHNob3J0LnNwbGl0KCd8JykgOiBbXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBzaG9ydHNbMF0gfHwgJGF0dHJzWydjaGVja0N1c3RvbUNhbGxiYWNrJ107XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBzaG9ydHNbMV0gfHwgJGF0dHJzWydjaGVja0N1c3RvbU1lc3NhZ2UnXSB8fCBubHMuXygnbWVzc2FnZV9jdXN0b20nKTtcblxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5jaGVja3MuY3VzdG9tID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uID0gc2hvcnRzWzJdIHx8ICRhdHRyc1snY2hlY2tDdXN0b21lSWYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQuJHdhdGNoKGNvbmRpdGlvbiwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmNoZWNrcy5jdXN0b20uYWN0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkYXR0cnMsIGZ1bmN0aW9uKGF0dHIsIGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtID0ga2V5Lm1hdGNoKC9eY2hlY2soW0EtWl1bYS16XSopLyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVjayA9IG0gJiYgbVsxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrICYmICFmaWVsZC5jaGVja3NbY2hlY2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSWYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cElmKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlcXVpcmVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBSZXF1aXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdMZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cExlbmd0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdMZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwTGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cEx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0dlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBHZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdHdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwR3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2V4cCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwUmVnRXhwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBFbWFpbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQYXNzd29yZHMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFBhc3N3b3JkcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdBcGknOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cEFwaUNhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ3VzdG9tJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBDdXN0b20oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5kaXIoeydjaGVja3MnOiBzY29wZS5jaGVja3N9KTtcblxuICAgICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LiR3YXRjaChmaWVsZC5tb2RlbCwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd3ZSBhcmUgd2F0Y2hpbmc6ICcrdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvL2Zvcm1DdHJsLnZhbGlkYXRlRmllbGQoc2NvcGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3RhdGUnLCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCdjbGVhbiBwcm9ncmVzcyB2YWxpZCBpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvcm1DdHJsLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxuXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcblxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJyxcblxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbnVsbCxcblxuICAgICAgICAgICAgICAgICAgICB2YWxpZDogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2NsZWFuJywgLy8gY2xlYW58cHJvZ3Jlc3N8dmFsaWR8aW52YWxpZFxuXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcblxuICAgICAgICAgICAgICAgICAgICBjaGVja3M6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuZGlyZWN0aXZlKCdmb3JtTWVzc2FnZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1aXJlOiBbJ15eZm9ybVZhbGlkYXRvcicsICdmb3JtTWVzc2FnZSddLFxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbWInLFxuICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImZvcm0tbWVzc2FnZSB7e21iLnN0YXRlfX1cIiBkYXRhLW5nLXNob3c9XCIhIW1iLm1lc3NhZ2VcIiBkYXRhLW5nLWJpbmQtaHRtbD1cIm1iLm1lc3NhZ2VcIj48L2Rpdj4nLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQCdcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAnJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzKXtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybUN0cmwgPSBjb250cm9sbGVyc1swXSwgbWVzc2FnZUJveCA9IGNvbnRyb2xsZXJzWzFdO1xuICAgICAgICAgICAgICAgIGZvcm1DdHJsLnNldE1lc3NhZ2VCb3gobWVzc2FnZUJveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSlcbiAgICAuZGlyZWN0aXZlKCdhdXRvSGVpZ2h0JywgW2Z1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgdmFyIHJlc2l6ZVRleHRhcmVhID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICRlbGVtZW50LmNzcygnYm94LXNpemluZycpID09PSAnYm9yZGVyLWJveCcgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkZWxlbWVudC5jc3MoJ2JvcmRlclRvcFdpZHRoJykpICtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQucHJvcCgnc2Nyb2xsSGVpZ2h0JykgK1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkZWxlbWVudC5jc3MoJ2JvcmRlckJvdHRvbVdpZHRoJykpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnByb3AoJ3Njcm9sbEhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5jc3MoJ2hlaWdodCcsIGhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC5vbignY2hhbmdlIGlucHV0IGN1dCBwYXN0ZSBkcm9wIGtleWRvd24nLCByZXNpemVUZXh0YXJlYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmZhY3RvcnkoJ2RlbGF5ZWRDYWxsJywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KXtcbiAgICAgICAgdmFyIHRpbWVvdXRzID0ge307XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlZCBuYW1lZCB0aW1lb3V0IHRoYXQgaXMgY2FuY2VsZWQgYW5kIHJlc2NoZWR1bGVkXG4gICAgICAgICAqIGlmIGZ1bmN0aW9uIHdhcyBjYWxsZWQgb25jZSBhZ2FpbiBiZWZvcmUgdGltZW91dCBoYXBwZW5lZC5cbiAgICAgICAgICogSGFuZHkgZm9yIGZpZWxkIGNoZWNrcyB3aGlsZSB1c2VyIHR5cGVzIGluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbElkXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSB0aW1lb3V0XG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbElkLCBkZWxheSwgY2FsbGJhY2spe1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHRpbWVvdXRzW2NhbGxJZF07XG4gICAgICAgICAgICBpZiAoaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKGhhbmRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aW1lb3V0c1tjYWxsSWRdID0gJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aW1lb3V0c1tjYWxsSWRdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9O1xuICAgIH1dKVxuICAgIC5jb25maWcoWydubHNQcm92aWRlcicsIGZ1bmN0aW9uKG5sc1Byb3ZpZGVyKXtcblxuICAgICAgICAvLyBBZGRpbmcgYSB0cmFuc2xhdGlvbiB0YWJsZSBmb3IgdGhlIEVuZ2xpc2ggbGFuZ3VhZ2VcbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdlbi1VUycsIHtcbiAgICAgICAgICAgICdtZXNzYWdlX3JlcXVpcmVkJzogJ1JlcXVpcmVkIEZpZWxkJyxcbiAgICAgICAgICAgICdtZXNzYWdlX2xlbmd0aCc6ICdUaGUgbGVuZ3RoIG9mIHRoaXMgdmFsdWUgc2hvdWxkIGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9IHN5bWJvbHMnLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmFuZ2UnOiAnVGhlIHZhbHVlIHNob3VsZCBiZSBiZXR3ZWVuIHttaW59IGFuZCB7bWF4fScsXG4gICAgICAgICAgICAnbWVzc2FnZV9sdCc6ICdUaGUgdmFsdWUgc2hvdWxkIGJlIGxvd2VyIHRoYW4ge21heH0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGUnOiAnVGhlIHZhbHVlIHNob3VsZCBiZSBsb3dlciB0aGFuIHttYXh9IG9yIGVxdWFsJyxcbiAgICAgICAgICAgICdtZXNzYWdlX2d0JzogJ1RoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59JyxcbiAgICAgICAgICAgICdtZXNzYWdlX2dlJzogJ1RoZSB2YWx1ZSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuIHttaW59IG9yIGVxdWFsJyxcbiAgICAgICAgICAgICdtZXNzYWdlX3JlZ2V4cCc6ICdJbnZhbGlkIGZvcm1hdCcsXG4gICAgICAgICAgICAnbWVzc2FnZV9lbWFpbCc6ICdWYWxpZCBlbWFpbCBmb3JtYXQ6IHVzZXJAZG9tYWluLmNvbScsXG4gICAgICAgICAgICAnbWVzc2FnZV9wYXNzd29yZHMnOiAnUGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcsXG4gICAgICAgICAgICAnbWVzc2FnZV9jdXN0b20nOiAnSW52YWxpZCB2YWx1ZSdcblxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5sc1Byb3ZpZGVyLnNldFRyYW5zbGF0aW9ucygncnUtUlUnLCB7XG4gICAgICAgICAgICAnbWVzc2FnZV9yZXF1aXJlZCc6ICfQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LUnLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGVuZ3RoJzogJ9CU0LvQuNC90LAg0LfQvdCw0YfQtdC90LjRjyDQtNC+0LvQttC90LAg0LHRi9GC0Ywg0L7RgiB7bWlufSDQtNC+IHttYXh9INGB0LjQvNCy0L7Qu9C+0LInLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmFuZ2UnOiAn0JfQvdCw0YfQtdC90LjQtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LIg0LTQuNCw0L/QsNC30L7QvdC1INC+0YIge21pbn0g0LTQviB7bWF4fScsXG4gICAgICAgICAgICAnbWVzc2FnZV9sdCc6ICfQl9C90LDRh9C10L3QuNC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQvNC10L3RjNGI0LUge21heH0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfbGUnOiAn0JfQvdCw0YfQtdC90LjQtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LzQtdC90YzRiNC1INC40LvQuCDRgNCw0LLQvdC+IHttYXh9JyxcbiAgICAgICAgICAgICdtZXNzYWdlX2d0JzogJ9CX0L3QsNGH0LXQvdC40LUg0LTQvtC70LbQvdC+INCx0YvRgtGMINCx0L7Qu9GM0YjQtSB7bWlufScsXG4gICAgICAgICAgICAnbWVzc2FnZV9nZSc6ICfQl9C90LDRh9C10L3QuNC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQsdC+0LvRjNGI0LUg0LjQu9C4INGA0LDQstC90L4ge21pbn0nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcmVnZXhwJzogJ9Cd0LXQutC+0YDRgNC10LrRgtC90YvQuSDRhNC+0YDQvNCw0YInLFxuICAgICAgICAgICAgJ21lc3NhZ2VfZW1haWwnOiAn0KTQvtGA0LzQsNGCIGVtYWlsOiB1c2VyQGRvbWFpbi5jb20nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfcGFzc3dvcmRzJzogJ9CS0LLQtdC00LXQvdC90YvQtSDQv9Cw0YDQvtC70Lgg0L7RgtC70LjRh9Cw0Y7RgtGB0Y8nLFxuICAgICAgICAgICAgJ21lc3NhZ2VfY3VzdG9tJzogJ9Cd0LXQutC+0YDRgNC10LrRgtC90L7QtSDQt9C90LDRh9C10L3QuNC1J1xuICAgICAgICB9KTtcbiAgICB9XSlcbjtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnY2hheWthLXBhZ2luYXRpb24nLCBbJ2NoYXlrYS1ubHMnLCAnY2hheWthLXV0aWxzJ10pXG4gICAgLmRpcmVjdGl2ZSgncGFnaW5hdGlvbicsIFsndXRpbHMnLCBmdW5jdGlvbih1dGlscyl7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICAgICAgdGVtcGxhdGU6XG4gICAgICAgICAgICAnPHVsIGRhdGEtbmctc2hvdz1cInRvdGFsUGFnZXMgPiAxXCI+JyArXG4gICAgICAgICAgICAgICAgJzxsaSBkYXRhLW5nLXJlcGVhdD1cIml0ZW0gaW4gaXRlbXNcIiBjbGFzcz1cInt7aXRlbS5jbHN9fVwiPjxhIGRhdGEtbmctY2xpY2s9XCJpdGVtLmNsaWNrKCk7XCIgZGF0YS1uZy1iaW5kLWh0bWw9XCJpdGVtLnRleHRcIj48L2E+PC9saT4nK1xuICAgICAgICAgICAgJzwvdWw+JyxcbiAgICAgICAgICAgIHNjb3BlOntcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAnPScsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6ICc9PycsXG4gICAgICAgICAgICAgICAgdG90YWxQYWdlczogJz0/JyxcbiAgICAgICAgICAgICAgICBwYWNrU2l6ZTogJz0/JyxcbiAgICAgICAgICAgICAgICBocmVmVGVtcGxhdGU6ICdAPycsXG4gICAgICAgICAgICAgICAgY2xpY2s6ICc9PycsXG4gICAgICAgICAgICAgICAgb3JkZXI6ICdAJ1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlKXtcblxuICAgICAgICAgICAgICAgICRzY29wZS5zdGF0ZSA9ICcnO1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSA9ICRzY29wZS5jdXJyZW50UGFnZSB8fCAxO1xuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbFBhZ2VzID0gJHNjb3BlLnRvdGFsUGFnZXMgfHwgMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFja1NpemUgPSAkc2NvcGUucGFja1NpemUgfHwgMTA7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhyZWZUZW1wbGF0ZSA9ICRzY29wZS5ocmVmVGVtcGxhdGUgfHwgJy9wYWdlLzwlPSBwYWdlICU+JztcbiAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS5vcmRlciA9ICRzY29wZS5vcmRlcj9cbiAgICAgICAgICAgICAgICAvLyAgICAkc2NvcGUub3JkZXIuc3BsaXQoL1xccysvKTpcbiAgICAgICAgICAgICAgICAvLyAgICBbJ3ByZXZpb3VzJywgJ2ZpcnN0JywgJ3Jld2luZCcsICdwYWdlcycsICdmb3J3YXJkJywgJ2xhc3QnLCAnbmV4dCddO1xuXG4gICAgICAgICAgICAgICAgaWYoISRzY29wZS5jbGljayl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGljayA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdQYWdpbmF0aW9uLmN1cnJlbnRQYWdlJywgcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwYWdlICE9PSAkc2NvcGUuY3VycmVudFBhZ2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnUGFnaW5hdGlvbi5wYWdlQ2hhbmdlZCcsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldCBjdXJyZW50IHBhZ2VcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7aW50fSB2YWxcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2x9IHJlbmRlclxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRDdXJyZW50UGFnZSA9IGZ1bmN0aW9uKHZhbCwgcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICBpZihyZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGU7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCBjdXJyZW50IHBhZ2VcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfG51bWJlcn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXQgdG90YWwgYW1vdW50IG9mIHBhZ2VzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHJlbmRlclxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRUb3RhbFBhZ2VzID0gZnVuY3Rpb24odmFsLCByZW5kZXIpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxQYWdlcyA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgdG90YWwgYW1vdW50IG9mIHBhZ2VzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7KnxudW1iZXJ9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFRvdGFsUGFnZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFNldCBudW1iZXIgb2YgcGFnZXMgYmV0d2VlbiBbLi4uXVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHZhbFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSByZW5kZXJcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0UGFja1NpemUgPSBmdW5jdGlvbih2YWwsIHJlbmRlcil7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWNrU2l6ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgbnVtYmVyIG9mIHBhZ2VzIGJldHdlZW4gWy4uLl1cbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7KnxudW1iZXJ9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldFBhY2tTaXplID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5wYWNrU2l6ZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2V0IGhyZWYgdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWxcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcmVuZGVyXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldEhyZWZUZW1wbGF0ZSA9IGZ1bmN0aW9uKHZhbCwgcmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmhyZWZUZW1wbGF0ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVuZGVyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgaHJlZiB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp8c3RyaW5nfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRIcmVmVGVtcGxhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmhyZWZUZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHBhZ2UgaHJlZlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0SHJlZiA9IGZ1bmN0aW9uKHBhZ2Upe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPj0gMSAmJiBwYWdlIDw9ICRzY29wZS5nZXRUb3RhbFBhZ2VzKCkgJiYgJHNjb3BlLmdldEhyZWZUZW1wbGF0ZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlscy50ZW1wbGF0ZSgkc2NvcGUuZ2V0SHJlZlRlbXBsYXRlKCksIHtwYWdlOiBwYWdlfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyMnO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdlbmVyYXRlIHBhZ2UgbmF2IGxpbmsgaXRlbVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdGV4dFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHt7cGFnZTogTnVtYmVyLCB0ZXh0OiAqLCBocmVmOiAqLCBjbHM6IHN0cmluZywgY2xpY2s6IEZ1bmN0aW9ufX1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0SXRlbSA9IGZ1bmN0aW9uKHBhZ2UsIHRleHQpe1xuXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSBwYXJzZUludChwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHQgfHwgcGFnZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPT09ICRzY29wZS5nZXRDdXJyZW50UGFnZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9ICdhY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhZ2UgPCAxIHx8IHBhZ2UgPiAkc2NvcGUuZ2V0VG90YWxQYWdlcygpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9ICdkaXNhYmxlZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAkc2NvcGUuZ2V0SHJlZihwYWdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogY2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFnZSA+IDAgJiYgcGFnZSA8PSAkc2NvcGUudG90YWxQYWdlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGljayhwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZW5lcmF0ZSBwYWdlIG5hdiBsaW5rIGl0ZW1zXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEl0ZW1zID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAkc2NvcGUuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhY2tTaXplID0gJHNjb3BlLmdldFBhY2tTaXplKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbFBhZ2VzID0gJHNjb3BlLmdldFRvdGFsUGFnZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhY2tTdGFydCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWNrRmluaXNoID0gdG90YWxQYWdlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgaWYocGFja1NpemUgPCB0b3RhbFBhZ2VzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2tTdGFydCA9IGN1cnJlbnQgLSBNYXRoLmZsb29yKChwYWNrU2l6ZSAtMSkvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFja0ZpbmlzaCA9IGN1cnJlbnQgKyBNYXRoLmNlaWwoKHBhY2tTaXplIC0xKS8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhY2tTdGFydDwxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAxIC0gcGFja1N0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFja0ZpbmlzaD50b3RhbFBhZ2VzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB0b3RhbFBhZ2VzIC0gcGFja0ZpbmlzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhY2tTdGFydCs9b2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFja0ZpbmlzaCs9b2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogIFsncHJldmlvdXMnLCAnZmlyc3QnLCAncmV3aW5kJywgJ3BhZ2VzJywgJ2ZvcndhcmQnLCAnbGFzdCcsICduZXh0J107XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShjdXJyZW50LTEsICcmbGFycjsnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcnN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFja1N0YXJ0ID4gMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCRzY29wZS5nZXRJdGVtKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXdpbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYWNrU3RhcnQgPiAyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJHNjb3BlLmdldEl0ZW0ocGFja1N0YXJ0IC0gMSwgJy4uLicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWdlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IHBhY2tTdGFydDsgaSA8PSBwYWNrRmluaXNoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9yd2FyZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvdGFsUGFnZXMgLSBwYWNrRmluaXNoID49IDIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbShwYWNrRmluaXNoICsgMSwgJy4uLicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsYXN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodG90YWxQYWdlcyA+IHBhY2tGaW5pc2gpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCgkc2NvcGUuZ2V0SXRlbSh0b3RhbFBhZ2VzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goJHNjb3BlLmdldEl0ZW0oY3VycmVudCsxLCAnJnJhcnI7JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBSZW5kZXIgcGFnaW5hdGlvblxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRzY29wZS5yZW5kZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMgPSAkc2NvcGUuZ2V0SXRlbXMoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSAkc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pXG4gICAgLmNvbmZpZyhbJ25sc1Byb3ZpZGVyJywgZnVuY3Rpb24obmxzUHJvdmlkZXIpe1xuXG4gICAgICAgIC8vIEFkZGluZyBhIHRyYW5zbGF0aW9uIHRhYmxlIGZvciB0aGUgRW5nbGlzaCBsYW5ndWFnZVxuICAgICAgICBubHNQcm92aWRlci5zZXRUcmFuc2xhdGlvbnMoJ2VuLVVTJywge1xuICAgICAgICAgICAgJ25leHQnOiAnTmV4dCcsXG4gICAgICAgICAgICAncHJldmlvdXMnOiAnUHJldmlvdXMnLFxuICAgICAgICAgICAgJ25leHRfcGFnZSc6ICdOZXh0IHBhZ2UnLFxuICAgICAgICAgICAgJ3ByZXZpb3VzX3BhZ2UnOiAnUHJldmlvdXMgUGFnZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmxzUHJvdmlkZXIuc2V0VHJhbnNsYXRpb25zKCdydS1SVScsIHtcbiAgICAgICAgICAgICduZXh0JzogJ9Ch0LvQtdC00YPRjtGJ0LDRjycsXG4gICAgICAgICAgICAncHJldmlvdXMnOiAn0J/RgNC10LTRi9C00YPRidCw0Y8nLFxuICAgICAgICAgICAgJ25leHRfcGFnZSc6ICfQodC70LXQtNGD0Y7RidCw0Y8g0YHRgtGA0LDQvdC40YbQsCcsXG4gICAgICAgICAgICAncHJldmlvdXNfcGFnZSc6ICfQn9GA0LXQtNGL0LTRg9GJ0LDRjyDRgdGC0YDQsNC90LjRhtCwJ1xuICAgICAgICB9KTtcbiAgICB9XSlcbjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
